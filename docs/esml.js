!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).esml={})}(this,(function(e){"use strict";var t={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},n={isSpaceSeparator:e=>"string"==typeof e&&t.Space_Separator.test(e),isIdStartChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||t.ID_Start.test(e)),isIdContinueChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||t.ID_Continue.test(e)),isDigit:e=>"string"==typeof e&&/[0-9]/.test(e),isHexDigit:e=>"string"==typeof e&&/[0-9A-Fa-f]/.test(e)};let r,u,i,a,o,s,c,d,f;function h(e,t,n){const r=e[t];if(null!=r&&"object"==typeof r)if(Array.isArray(r))for(let e=0;e<r.length;e++){const t=String(e),u=h(r,t,n);void 0===u?delete r[t]:Object.defineProperty(r,t,{value:u,writable:!0,enumerable:!0,configurable:!0})}else for(const e in r){const t=h(r,e,n);void 0===t?delete r[e]:Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}return n.call(e,t,r)}let l,p,v,D,m;function g(){for(l="default",p="",v=!1,D=1;;){m=y();const e=_[l]();if(e)return e}}function y(){if(r[a])return String.fromCodePoint(r.codePointAt(a))}function E(){const e=y();return"\n"===e?(o++,s=0):e?s+=e.length:s++,e&&(a+=e.length),e}const _={default(){switch(m){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void E();case"/":return E(),void(l="comment");case void 0:return E(),C("eof")}if(!n.isSpaceSeparator(m))return _[u]();E()},comment(){switch(m){case"*":return E(),void(l="multiLineComment");case"/":return E(),void(l="singleLineComment")}throw B(E())},multiLineComment(){switch(m){case"*":return E(),void(l="multiLineCommentAsterisk");case void 0:throw B(E())}E()},multiLineCommentAsterisk(){switch(m){case"*":return void E();case"/":return E(),void(l="default");case void 0:throw B(E())}E(),l="multiLineComment"},singleLineComment(){switch(m){case"\n":case"\r":case"\u2028":case"\u2029":return E(),void(l="default");case void 0:return E(),C("eof")}E()},value(){switch(m){case"{":case"[":return C("punctuator",E());case"n":return E(),A("ull"),C("null",null);case"t":return E(),A("rue"),C("boolean",!0);case"f":return E(),A("alse"),C("boolean",!1);case"-":case"+":return"-"===E()&&(D=-1),void(l="sign");case".":return p=E(),void(l="decimalPointLeading");case"0":return p=E(),void(l="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return p=E(),void(l="decimalInteger");case"I":return E(),A("nfinity"),C("numeric",1/0);case"N":return E(),A("aN"),C("numeric",NaN);case'"':case"'":return v='"'===E(),p="",void(l="string")}throw B(E())},identifierNameStartEscape(){if("u"!==m)throw B(E());E();const e=F();switch(e){case"$":case"_":break;default:if(!n.isIdStartChar(e))throw j()}p+=e,l="identifierName"},identifierName(){switch(m){case"$":case"_":case"‌":case"‍":return void(p+=E());case"\\":return E(),void(l="identifierNameEscape")}if(!n.isIdContinueChar(m))return C("identifier",p);p+=E()},identifierNameEscape(){if("u"!==m)throw B(E());E();const e=F();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!n.isIdContinueChar(e))throw j()}p+=e,l="identifierName"},sign(){switch(m){case".":return p=E(),void(l="decimalPointLeading");case"0":return p=E(),void(l="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return p=E(),void(l="decimalInteger");case"I":return E(),A("nfinity"),C("numeric",D*(1/0));case"N":return E(),A("aN"),C("numeric",NaN)}throw B(E())},zero(){switch(m){case".":return p+=E(),void(l="decimalPoint");case"e":case"E":return p+=E(),void(l="decimalExponent");case"x":case"X":return p+=E(),void(l="hexadecimal")}return C("numeric",0*D)},decimalInteger(){switch(m){case".":return p+=E(),void(l="decimalPoint");case"e":case"E":return p+=E(),void(l="decimalExponent")}if(!n.isDigit(m))return C("numeric",D*Number(p));p+=E()},decimalPointLeading(){if(n.isDigit(m))return p+=E(),void(l="decimalFraction");throw B(E())},decimalPoint(){switch(m){case"e":case"E":return p+=E(),void(l="decimalExponent")}return n.isDigit(m)?(p+=E(),void(l="decimalFraction")):C("numeric",D*Number(p))},decimalFraction(){switch(m){case"e":case"E":return p+=E(),void(l="decimalExponent")}if(!n.isDigit(m))return C("numeric",D*Number(p));p+=E()},decimalExponent(){switch(m){case"+":case"-":return p+=E(),void(l="decimalExponentSign")}if(n.isDigit(m))return p+=E(),void(l="decimalExponentInteger");throw B(E())},decimalExponentSign(){if(n.isDigit(m))return p+=E(),void(l="decimalExponentInteger");throw B(E())},decimalExponentInteger(){if(!n.isDigit(m))return C("numeric",D*Number(p));p+=E()},hexadecimal(){if(n.isHexDigit(m))return p+=E(),void(l="hexadecimalInteger");throw B(E())},hexadecimalInteger(){if(!n.isHexDigit(m))return C("numeric",D*Number(p));p+=E()},string(){switch(m){case"\\":return E(),void(p+=function(){switch(y()){case"b":return E(),"\b";case"f":return E(),"\f";case"n":return E(),"\n";case"r":return E(),"\r";case"t":return E(),"\t";case"v":return E(),"\v";case"0":if(E(),n.isDigit(y()))throw B(E());return"\0";case"x":return E(),function(){let e="",t=y();if(!n.isHexDigit(t))throw B(E());if(e+=E(),t=y(),!n.isHexDigit(t))throw B(E());return e+=E(),String.fromCodePoint(parseInt(e,16))}();case"u":return E(),F();case"\n":case"\u2028":case"\u2029":return E(),"";case"\r":return E(),"\n"===y()&&E(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw B(E())}return E()}());case'"':return v?(E(),C("string",p)):void(p+=E());case"'":return v?void(p+=E()):(E(),C("string",p));case"\n":case"\r":throw B(E());case"\u2028":case"\u2029":!function(e){console.warn(`JSON5: '${N(e)}' in strings is not valid ECMAScript; consider escaping`)}(m);break;case void 0:throw B(E())}p+=E()},start(){switch(m){case"{":case"[":return C("punctuator",E())}l="value"},beforePropertyName(){switch(m){case"$":case"_":return p=E(),void(l="identifierName");case"\\":return E(),void(l="identifierNameStartEscape");case"}":return C("punctuator",E());case'"':case"'":return v='"'===E(),void(l="string")}if(n.isIdStartChar(m))return p+=E(),void(l="identifierName");throw B(E())},afterPropertyName(){if(":"===m)return C("punctuator",E());throw B(E())},beforePropertyValue(){l="value"},afterPropertyValue(){switch(m){case",":case"}":return C("punctuator",E())}throw B(E())},beforeArrayValue(){if("]"===m)return C("punctuator",E());l="value"},afterArrayValue(){switch(m){case",":case"]":return C("punctuator",E())}throw B(E())},end(){throw B(E())}};function C(e,t){return{type:e,value:t,line:o,column:s}}function A(e){for(const t of e){if(y()!==t)throw B(E());E()}}function F(){let e="",t=4;for(;t-- >0;){const t=y();if(!n.isHexDigit(t))throw B(E());e+=E()}return String.fromCodePoint(parseInt(e,16))}const b={start(){if("eof"===c.type)throw k();w()},beforePropertyName(){switch(c.type){case"identifier":case"string":return d=c.value,void(u="afterPropertyName");case"punctuator":return void x();case"eof":throw k()}},afterPropertyName(){if("eof"===c.type)throw k();u="beforePropertyValue"},beforePropertyValue(){if("eof"===c.type)throw k();w()},beforeArrayValue(){if("eof"===c.type)throw k();"punctuator"!==c.type||"]"!==c.value?w():x()},afterPropertyValue(){if("eof"===c.type)throw k();switch(c.value){case",":return void(u="beforePropertyName");case"}":x()}},afterArrayValue(){if("eof"===c.type)throw k();switch(c.value){case",":return void(u="beforeArrayValue");case"]":x()}},end(){}};function w(){let e;switch(c.type){case"punctuator":switch(c.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=c.value}if(void 0===f)f=e;else{const t=i[i.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,d,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(null!==e&&"object"==typeof e)i.push(e),u=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{const e=i[i.length-1];u=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}}function x(){i.pop();const e=i[i.length-1];u=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function B(e){return O(void 0===e?`JSON5: invalid end of input at ${o}:${s}`:`JSON5: invalid character '${N(e)}' at ${o}:${s}`)}function k(){return O(`JSON5: invalid end of input at ${o}:${s}`)}function j(){return s-=5,O(`JSON5: invalid identifier character at ${o}:${s}`)}function N(e){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){const t=e.charCodeAt(0).toString(16);return"\\x"+("00"+t).substring(t.length)}return e}function O(e){const t=new SyntaxError(e);return t.lineNumber=o,t.columnNumber=s,t}const S={parse:function(e,t){r=String(e),u="start",i=[],a=0,o=1,s=0,c=void 0,d=void 0,f=void 0;do{c=g(),b[u]()}while("eof"!==c.type);return"function"==typeof t?h({"":f},"",t):f},stringify:function(e,t,r){const u=[];let i,a,o,s="",c="";if(null==t||"object"!=typeof t||Array.isArray(t)||(r=t.space,o=t.quote,t=t.replacer),"function"==typeof t)a=t;else if(Array.isArray(t)){i=[];for(const e of t){let t;"string"==typeof e?t=e:("number"==typeof e||e instanceof String||e instanceof Number)&&(t=String(e)),void 0!==t&&i.indexOf(t)<0&&i.push(t)}}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),"number"==typeof r?r>0&&(r=Math.min(10,Math.floor(r)),c="          ".substr(0,r)):"string"==typeof r&&(c=r.substr(0,10)),d("",{"":e});function d(e,t){let n=t[e];switch(null!=n&&("function"==typeof n.toJSON5?n=n.toJSON5(e):"function"==typeof n.toJSON&&(n=n.toJSON(e))),a&&(n=a.call(t,e,n)),n instanceof Number?n=Number(n):n instanceof String?n=String(n):n instanceof Boolean&&(n=n.valueOf()),n){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof n?f(n):"number"==typeof n?String(n):"object"==typeof n?Array.isArray(n)?function(e){if(u.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");u.push(e);let t=s;s+=c;let n,r=[];for(let t=0;t<e.length;t++){const n=d(String(t),e);r.push(void 0!==n?n:"null")}if(0===r.length)n="[]";else if(""===c){n="["+r.join(",")+"]"}else{let e=",\n"+s,u=r.join(e);n="[\n"+s+u+",\n"+t+"]"}return u.pop(),s=t,n}(n):function(e){if(u.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");u.push(e);let t=s;s+=c;let n,r=i||Object.keys(e),a=[];for(const t of r){const n=d(t,e);if(void 0!==n){let e=h(t)+":";""!==c&&(e+=" "),e+=n,a.push(e)}}if(0===a.length)n="{}";else{let e;if(""===c)e=a.join(","),n="{"+e+"}";else{let r=",\n"+s;e=a.join(r),n="{\n"+s+e+",\n"+t+"}"}}return u.pop(),s=t,n}(n):void 0}function f(e){const t={"'":.1,'"':.2},r={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let u="";for(let i=0;i<e.length;i++){const a=e[i];switch(a){case"'":case'"':t[a]++,u+=a;continue;case"\0":if(n.isDigit(e[i+1])){u+="\\x00";continue}}if(r[a])u+=r[a];else if(a<" "){let e=a.charCodeAt(0).toString(16);u+="\\x"+("00"+e).substring(e.length)}else u+=a}const i=o||Object.keys(t).reduce(((e,n)=>t[e]<t[n]?e:n));return u=u.replace(new RegExp(i,"g"),r[i]),i+u+i}function h(e){if(0===e.length)return f(e);const t=String.fromCodePoint(e.codePointAt(0));if(!n.isIdStartChar(t))return f(e);for(let r=t.length;r<e.length;r++)if(!n.isIdContinueChar(String.fromCodePoint(e.codePointAt(r))))return f(e);return e}}};var I,T,Z=S;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(I||(I={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(T||(T={}));const P=I.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),M=e=>{switch(typeof e){case"undefined":return P.undefined;case"string":return P.string;case"number":return isNaN(e)?P.nan:P.number;case"boolean":return P.boolean;case"function":return P.function;case"bigint":return P.bigint;case"symbol":return P.symbol;case"object":return Array.isArray(e)?P.array:null===e?P.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?P.promise:"undefined"!=typeof Map&&e instanceof Map?P.map:"undefined"!=typeof Set&&e instanceof Set?P.set:"undefined"!=typeof Date&&e instanceof Date?P.date:P.object;default:return P.unknown}},z=I.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class L extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const u of e.issues)if("invalid_union"===u.code)u.unionErrors.map(r);else if("invalid_return_type"===u.code)r(u.returnTypeError);else if("invalid_arguments"===u.code)r(u.argumentsError);else if(0===u.path.length)n._errors.push(t(u));else{let e=n,r=0;for(;r<u.path.length;){const n=u.path[r];r===u.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(u))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,I.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}L.create=e=>new L(e);const $=(e,t)=>{let n;switch(e.code){case z.invalid_type:n=e.received===P.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case z.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,I.jsonStringifyReplacer)}`;break;case z.unrecognized_keys:n=`Unrecognized key(s) in object: ${I.joinValues(e.keys,", ")}`;break;case z.invalid_union:n="Invalid input";break;case z.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${I.joinValues(e.options)}`;break;case z.invalid_enum_value:n=`Invalid enum value. Expected ${I.joinValues(e.options)}, received '${e.received}'`;break;case z.invalid_arguments:n="Invalid function arguments";break;case z.invalid_return_type:n="Invalid function return type";break;case z.invalid_date:n="Invalid date";break;case z.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:I.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case z.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case z.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case z.custom:n="Invalid input";break;case z.invalid_intersection_types:n="Intersection results could not be merged";break;case z.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case z.not_finite:n="Number must be finite";break;default:n=t.defaultError,I.assertNever(e)}return{message:n}};let R=$;function U(){return R}const V=e=>{const{data:t,path:n,errorMaps:r,issueData:u}=e,i=[...n,...u.path||[]],a={...u,path:i};let o="";const s=r.filter((e=>!!e)).slice().reverse();for(const e of s)o=e(a,{data:t,defaultError:o}).message;return{...u,path:i,message:u.message||o}};function G(e,t){const n=V({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,U(),$].filter((e=>!!e))});e.common.issues.push(n)}class q{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return H;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t)n.push({key:await e.key,value:await e.value});return q.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:u}=r;if("aborted"===t.status)return H;if("aborted"===u.status)return H;"dirty"===t.status&&e.dirty(),"dirty"===u.status&&e.dirty(),(void 0!==u.value||r.alwaysSet)&&(n[t.value]=u.value)}return{status:e.value,value:n}}}const H=Object.freeze({status:"aborted"}),W=e=>({status:"dirty",value:e}),K=e=>({status:"valid",value:e}),Y=e=>"aborted"===e.status,J=e=>"dirty"===e.status,X=e=>"valid"===e.status,Q=e=>"undefined"!=typeof Promise&&e instanceof Promise;var ee;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(ee||(ee={}));class te{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ne=(e,t)=>{if(X(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new L(e.common.issues);return this._error=t,this._error}}};function re(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:u}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:u};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=r?r:t.defaultError}:{message:null!=n?n:t.defaultError},description:u}}class ue{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return M(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:M(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new q,ctx:{common:e.parent.common,data:e.data,parsedType:M(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Q(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:M(e)},u=this._parseSync({data:e,path:r.path,parent:r});return ne(r,u)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:M(e)},r=this._parse({data:e,path:n.path,parent:n}),u=await(Q(r)?r:Promise.resolve(r));return ne(n,u)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const u=e(t),i=()=>r.addIssue({code:z.custom,...n(t)});return"undefined"!=typeof Promise&&u instanceof Promise?u.then((e=>!!e||(i(),!1))):!!u||(i(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new qe({schema:this,typeName:rt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return He.create(this,this._def)}nullable(){return We.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xe.create(this,this._def)}promise(){return Ge.create(this,this._def)}or(e){return je.create([this,e],this._def)}and(e){return Ie.create(this,e,this._def)}transform(e){return new qe({...re(this._def),schema:this,typeName:rt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ke({...re(this._def),innerType:this,defaultValue:t,typeName:rt.ZodDefault})}brand(){return new Qe({typeName:rt.ZodBranded,type:this,...re(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Ye({...re(this._def),innerType:this,catchValue:t,typeName:rt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return et.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ie=/^c[^\s-]{8,}$/i,ae=/^[a-z][a-z0-9]*$/,oe=/[0-9A-HJKMNP-TV-Z]{26}/,se=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,ce=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,de=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,fe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,he=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;function le(e,t){return!("v4"!==t&&t||!fe.test(e))||!("v6"!==t&&t||!he.test(e))}class pe extends ue{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement((t=>e.test(t)),{validation:t,code:z.invalid_string,...ee.errToObj(n)}),this.nonempty=e=>this.min(1,ee.errToObj(e)),this.trim=()=>new pe({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new pe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new pe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==P.string){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.string,received:t.parsedType}),H}const t=new q;let n;for(const u of this._def.checks)if("min"===u.kind)e.data.length<u.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:z.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),t.dirty());else if("max"===u.kind)e.data.length>u.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:z.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),t.dirty());else if("length"===u.kind){const r=e.data.length>u.value,i=e.data.length<u.value;(r||i)&&(n=this._getOrReturnCtx(e,n),r?G(n,{code:z.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):i&&G(n,{code:z.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),t.dirty())}else if("email"===u.kind)ce.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"email",code:z.invalid_string,message:u.message}),t.dirty());else if("emoji"===u.kind)de.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"emoji",code:z.invalid_string,message:u.message}),t.dirty());else if("uuid"===u.kind)se.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"uuid",code:z.invalid_string,message:u.message}),t.dirty());else if("cuid"===u.kind)ie.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"cuid",code:z.invalid_string,message:u.message}),t.dirty());else if("cuid2"===u.kind)ae.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"cuid2",code:z.invalid_string,message:u.message}),t.dirty());else if("ulid"===u.kind)oe.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"ulid",code:z.invalid_string,message:u.message}),t.dirty());else if("url"===u.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),G(n,{validation:"url",code:z.invalid_string,message:u.message}),t.dirty()}else if("regex"===u.kind){u.regex.lastIndex=0;u.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"regex",code:z.invalid_string,message:u.message}),t.dirty())}else if("trim"===u.kind)e.data=e.data.trim();else if("includes"===u.kind)e.data.includes(u.value,u.position)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),t.dirty());else if("toLowerCase"===u.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===u.kind)e.data=e.data.toUpperCase();else if("startsWith"===u.kind)e.data.startsWith(u.value)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:{startsWith:u.value},message:u.message}),t.dirty());else if("endsWith"===u.kind)e.data.endsWith(u.value)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:{endsWith:u.value},message:u.message}),t.dirty());else if("datetime"===u.kind){((r=u).precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):0===r.precision?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:"datetime",message:u.message}),t.dirty())}else"ip"===u.kind?le(e.data,u.version)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"ip",code:z.invalid_string,message:u.message}),t.dirty()):I.assertNever(u);var r;return{status:t.value,value:e.data}}_addCheck(e){return new pe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ee.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...ee.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ee.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...ee.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ee.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ee.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ee.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ee.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ee.errToObj(t)})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ve(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,u=n>r?n:r;return parseInt(e.toFixed(u).replace(".",""))%parseInt(t.toFixed(u).replace(".",""))/Math.pow(10,u)}pe.create=e=>{var t;return new pe({checks:[],typeName:rt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...re(e)})};class De extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==P.number){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.number,received:t.parsedType}),H}let t;const n=new q;for(const r of this._def.checks)if("int"===r.kind)I.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),G(t,{code:z.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==ve(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),G(t,{code:z.not_finite,message:r.message}),n.dirty()):I.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ee.toString(t))}setLimit(e,t,n,r){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ee.toString(r)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ee.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&I.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}De.create=e=>new De({checks:[],typeName:rt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...re(e)});class me extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==P.bigint){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.bigint,received:t.parsedType}),H}let t;const n=new q;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):I.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ee.toString(t))}setLimit(e,t,n,r){return new me({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ee.toString(r)}]})}_addCheck(e){return new me({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}me.create=e=>{var t;return new me({checks:[],typeName:rt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...re(e)})};class ge extends ue{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==P.boolean){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.boolean,received:t.parsedType}),H}return K(e.data)}}ge.create=e=>new ge({typeName:rt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...re(e)});class ye extends ue{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==P.date){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.date,received:t.parsedType}),H}if(isNaN(e.data.getTime())){return G(this._getOrReturnCtx(e),{code:z.invalid_date}),H}const t=new q;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:z.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:z.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):I.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ye({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ee.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ee.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ye.create=e=>new ye({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:rt.ZodDate,...re(e)});class Ee extends ue{_parse(e){if(this._getType(e)!==P.symbol){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.symbol,received:t.parsedType}),H}return K(e.data)}}Ee.create=e=>new Ee({typeName:rt.ZodSymbol,...re(e)});class _e extends ue{_parse(e){if(this._getType(e)!==P.undefined){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.undefined,received:t.parsedType}),H}return K(e.data)}}_e.create=e=>new _e({typeName:rt.ZodUndefined,...re(e)});class Ce extends ue{_parse(e){if(this._getType(e)!==P.null){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.null,received:t.parsedType}),H}return K(e.data)}}Ce.create=e=>new Ce({typeName:rt.ZodNull,...re(e)});class Ae extends ue{constructor(){super(...arguments),this._any=!0}_parse(e){return K(e.data)}}Ae.create=e=>new Ae({typeName:rt.ZodAny,...re(e)});class Fe extends ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return K(e.data)}}Fe.create=e=>new Fe({typeName:rt.ZodUnknown,...re(e)});class be extends ue{_parse(e){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.never,received:t.parsedType}),H}}be.create=e=>new be({typeName:rt.ZodNever,...re(e)});class we extends ue{_parse(e){if(this._getType(e)!==P.undefined){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.void,received:t.parsedType}),H}return K(e.data)}}we.create=e=>new we({typeName:rt.ZodVoid,...re(e)});class xe extends ue{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==P.array)return G(t,{code:z.invalid_type,expected:P.array,received:t.parsedType}),H;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,u=t.data.length<r.exactLength.value;(e||u)&&(G(t,{code:e?z.too_big:z.too_small,minimum:u?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(G(t,{code:z.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(G(t,{code:z.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new te(t,e,t.path,n))))).then((e=>q.mergeArray(n,e)));const u=[...t.data].map(((e,n)=>r.type._parseSync(new te(t,e,t.path,n))));return q.mergeArray(n,u)}get element(){return this._def.type}min(e,t){return new xe({...this._def,minLength:{value:e,message:ee.toString(t)}})}max(e,t){return new xe({...this._def,maxLength:{value:e,message:ee.toString(t)}})}length(e,t){return new xe({...this._def,exactLength:{value:e,message:ee.toString(t)}})}nonempty(e){return this.min(1,e)}}function Be(e){if(e instanceof ke){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=He.create(Be(r))}return new ke({...e._def,shape:()=>t})}return e instanceof xe?new xe({...e._def,type:Be(e.element)}):e instanceof He?He.create(Be(e.unwrap())):e instanceof We?We.create(Be(e.unwrap())):e instanceof Te?Te.create(e.items.map((e=>Be(e)))):e}xe.create=(e,t)=>new xe({type:e,minLength:null,maxLength:null,exactLength:null,typeName:rt.ZodArray,...re(t)});class ke extends ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=I.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==P.object){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.object,received:t.parsedType}),H}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:u}=this._getCached(),i=[];if(!(this._def.catchall instanceof be&&"strip"===this._def.unknownKeys))for(const e in n.data)u.includes(e)||i.push(e);const a=[];for(const e of u){const t=r[e],u=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new te(n,u,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof be){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(G(n,{code:z.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new te(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>q.mergeObjectSync(t,e))):q.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return ee.errToObj,new ke({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,u,i,a;const o=null!==(i=null===(u=(r=this._def).errorMap)||void 0===u?void 0:u.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=ee.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new ke({...this._def,unknownKeys:"strip"})}passthrough(){return new ke({...this._def,unknownKeys:"passthrough"})}extend(e){return new ke({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ke({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:rt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ke({...this._def,catchall:e})}pick(e){const t={};return I.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new ke({...this._def,shape:()=>t})}omit(e){const t={};return I.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new ke({...this._def,shape:()=>t})}deepPartial(){return Be(this)}partial(e){const t={};return I.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new ke({...this._def,shape:()=>t})}required(e){const t={};return I.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof He;)e=e._def.innerType;t[n]=e}})),new ke({...this._def,shape:()=>t})}keyof(){return Re(I.objectKeys(this.shape))}}ke.create=(e,t)=>new ke({shape:()=>e,unknownKeys:"strip",catchall:be.create(),typeName:rt.ZodObject,...re(t)}),ke.strictCreate=(e,t)=>new ke({shape:()=>e,unknownKeys:"strict",catchall:be.create(),typeName:rt.ZodObject,...re(t)}),ke.lazycreate=(e,t)=>new ke({shape:e,unknownKeys:"strip",catchall:be.create(),typeName:rt.ZodObject,...re(t)});class je extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new L(e.ctx.common.issues)));return G(t,{code:z.invalid_union,unionErrors:n}),H}));{let e;const r=[];for(const u of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=u._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const u=r.map((e=>new L(e)));return G(t,{code:z.invalid_union,unionErrors:u}),H}}get options(){return this._def.options}}je.create=(e,t)=>new je({options:e,typeName:rt.ZodUnion,...re(t)});const Ne=e=>e instanceof Le?Ne(e.schema):e instanceof qe?Ne(e.innerType()):e instanceof $e?[e.value]:e instanceof Ue?e.options:e instanceof Ve?Object.keys(e.enum):e instanceof Ke?Ne(e._def.innerType):e instanceof _e?[void 0]:e instanceof Ce?[null]:null;class Oe extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.object)return G(t,{code:z.invalid_type,expected:P.object,received:t.parsedType}),H;const n=this.discriminator,r=t.data[n],u=this.optionsMap.get(r);return u?t.common.async?u._parseAsync({data:t.data,path:t.path,parent:t}):u._parseSync({data:t.data,path:t.path,parent:t}):(G(t,{code:z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=Ne(n.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of t){if(r.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);r.set(u,n)}}return new Oe({typeName:rt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...re(n)})}}function Se(e,t){const n=M(e),r=M(t);if(e===t)return{valid:!0,data:e};if(n===P.object&&r===P.object){const n=I.objectKeys(t),r=I.objectKeys(e).filter((e=>-1!==n.indexOf(e))),u={...e,...t};for(const n of r){const r=Se(e[n],t[n]);if(!r.valid)return{valid:!1};u[n]=r.data}return{valid:!0,data:u}}if(n===P.array&&r===P.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const u=Se(e[r],t[r]);if(!u.valid)return{valid:!1};n.push(u.data)}return{valid:!0,data:n}}return n===P.date&&r===P.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ie extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(Y(e)||Y(r))return H;const u=Se(e.value,r.value);return u.valid?((J(e)||J(r))&&t.dirty(),{status:t.value,value:u.data}):(G(n,{code:z.invalid_intersection_types}),H)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ie.create=(e,t,n)=>new Ie({left:e,right:t,typeName:rt.ZodIntersection,...re(n)});class Te extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==P.array)return G(n,{code:z.invalid_type,expected:P.array,received:n.parsedType}),H;if(n.data.length<this._def.items.length)return G(n,{code:z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&n.data.length>this._def.items.length&&(G(n,{code:z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new te(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>q.mergeArray(t,e))):q.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Te({...this._def,rest:e})}}Te.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Te({items:e,typeName:rt.ZodTuple,rest:null,...re(t)})};class Ze extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==P.object)return G(n,{code:z.invalid_type,expected:P.object,received:n.parsedType}),H;const r=[],u=this._def.keyType,i=this._def.valueType;for(const e in n.data)r.push({key:u._parse(new te(n,e,n.path,e)),value:i._parse(new te(n,n.data[e],n.path,e))});return n.common.async?q.mergeObjectAsync(t,r):q.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new Ze(t instanceof ue?{keyType:e,valueType:t,typeName:rt.ZodRecord,...re(n)}:{keyType:pe.create(),valueType:e,typeName:rt.ZodRecord,...re(t)})}}class Pe extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==P.map)return G(n,{code:z.invalid_type,expected:P.map,received:n.parsedType}),H;const r=this._def.keyType,u=this._def.valueType,i=[...n.data.entries()].map((([e,t],i)=>({key:r._parse(new te(n,e,n.path,[i,"key"])),value:u._parse(new te(n,t,n.path,[i,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of i){const r=await n.key,u=await n.value;if("aborted"===r.status||"aborted"===u.status)return H;"dirty"!==r.status&&"dirty"!==u.status||t.dirty(),e.set(r.value,u.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of i){const r=n.key,u=n.value;if("aborted"===r.status||"aborted"===u.status)return H;"dirty"!==r.status&&"dirty"!==u.status||t.dirty(),e.set(r.value,u.value)}return{status:t.value,value:e}}}}Pe.create=(e,t,n)=>new Pe({valueType:t,keyType:e,typeName:rt.ZodMap,...re(n)});class Me extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==P.set)return G(n,{code:z.invalid_type,expected:P.set,received:n.parsedType}),H;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(G(n,{code:z.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(G(n,{code:z.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const u=this._def.valueType;function i(e){const n=new Set;for(const r of e){if("aborted"===r.status)return H;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map(((e,t)=>u._parse(new te(n,e,n.path,t))));return n.common.async?Promise.all(a).then((e=>i(e))):i(a)}min(e,t){return new Me({...this._def,minSize:{value:e,message:ee.toString(t)}})}max(e,t){return new Me({...this._def,maxSize:{value:e,message:ee.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Me.create=(e,t)=>new Me({valueType:e,minSize:null,maxSize:null,typeName:rt.ZodSet,...re(t)});class ze extends ue{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.function)return G(t,{code:z.invalid_type,expected:P.function,received:t.parsedType}),H;function n(e,n){return V({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,U(),$].filter((e=>!!e)),issueData:{code:z.invalid_arguments,argumentsError:n}})}function r(e,n){return V({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,U(),$].filter((e=>!!e)),issueData:{code:z.invalid_return_type,returnTypeError:n}})}const u={errorMap:t.common.contextualErrorMap},i=t.data;return this._def.returns instanceof Ge?K((async(...e)=>{const t=new L([]),a=await this._def.args.parseAsync(e,u).catch((r=>{throw t.addIssue(n(e,r)),t})),o=await i(...a);return await this._def.returns._def.type.parseAsync(o,u).catch((e=>{throw t.addIssue(r(o,e)),t}))})):K(((...e)=>{const t=this._def.args.safeParse(e,u);if(!t.success)throw new L([n(e,t.error)]);const a=i(...t.data),o=this._def.returns.safeParse(a,u);if(!o.success)throw new L([r(a,o.error)]);return o.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ze({...this._def,args:Te.create(e).rest(Fe.create())})}returns(e){return new ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ze({args:e||Te.create([]).rest(Fe.create()),returns:t||Fe.create(),typeName:rt.ZodFunction,...re(n)})}}class Le extends ue{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Le.create=(e,t)=>new Le({getter:e,typeName:rt.ZodLazy,...re(t)});class $e extends ue{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return G(t,{received:t.data,code:z.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Re(e,t){return new Ue({values:e,typeName:rt.ZodEnum,...re(t)})}$e.create=(e,t)=>new $e({value:e,typeName:rt.ZodLiteral,...re(t)});class Ue extends ue{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return G(t,{expected:I.joinValues(n),received:t.parsedType,code:z.invalid_type}),H}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return G(t,{received:t.data,code:z.invalid_enum_value,options:n}),H}return K(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Ue.create(e)}exclude(e){return Ue.create(this.options.filter((t=>!e.includes(t))))}}Ue.create=Re;class Ve extends ue{_parse(e){const t=I.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==P.string&&n.parsedType!==P.number){const e=I.objectValues(t);return G(n,{expected:I.joinValues(e),received:n.parsedType,code:z.invalid_type}),H}if(-1===t.indexOf(e.data)){const e=I.objectValues(t);return G(n,{received:n.data,code:z.invalid_enum_value,options:e}),H}return K(e.data)}get enum(){return this._def.values}}Ve.create=(e,t)=>new Ve({values:e,typeName:rt.ZodNativeEnum,...re(t)});class Ge extends ue{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.promise&&!1===t.common.async)return G(t,{code:z.invalid_type,expected:P.promise,received:t.parsedType}),H;const n=t.parsedType===P.promise?t.data:Promise.resolve(t.data);return K(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Ge.create=(e,t)=>new Ge({type:e,typeName:rt.ZodPromise,...re(t)});class qe extends ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null;if("preprocess"===r.type){const e=r.transform(n.data);return n.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n}))):this._def.schema._parseSync({data:e,path:n.path,parent:n})}const u={addIssue:e=>{G(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(u.addIssue=u.addIssue.bind(u),"refinement"===r.type){const e=e=>{const t=r.refinement(e,u);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?H:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?H:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!X(e))return e;const i=r.transform(e.value,u);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>X(e)?Promise.resolve(r.transform(e.value,u)).then((e=>({status:t.value,value:e}))):e))}I.assertNever(r)}}qe.create=(e,t,n)=>new qe({schema:e,typeName:rt.ZodEffects,effect:t,...re(n)}),qe.createWithPreprocess=(e,t,n)=>new qe({schema:t,effect:{type:"preprocess",transform:e},typeName:rt.ZodEffects,...re(n)});class He extends ue{_parse(e){return this._getType(e)===P.undefined?K(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}He.create=(e,t)=>new He({innerType:e,typeName:rt.ZodOptional,...re(t)});class We extends ue{_parse(e){return this._getType(e)===P.null?K(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}We.create=(e,t)=>new We({innerType:e,typeName:rt.ZodNullable,...re(t)});class Ke extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===P.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ke.create=(e,t)=>new Ke({innerType:e,typeName:rt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...re(t)});class Ye extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Q(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new L(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new L(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ye.create=(e,t)=>new Ye({innerType:e,typeName:rt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...re(t)});class Je extends ue{_parse(e){if(this._getType(e)!==P.nan){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.nan,received:t.parsedType}),H}return{status:"valid",value:e.data}}}Je.create=e=>new Je({typeName:rt.ZodNaN,...re(e)});const Xe=Symbol("zod_brand");class Qe extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class et extends ue{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?H:"dirty"===e.status?(t.dirty(),W(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?H:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new et({in:e,out:t,typeName:rt.ZodPipeline})}}const tt=(e,t={},n)=>e?Ae.create().superRefine(((r,u)=>{var i,a;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,o=null===(a=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===a||a,s="string"==typeof e?{message:e}:e;u.addIssue({code:"custom",...s,fatal:o})}})):Ae.create(),nt={object:ke.lazycreate};var rt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline"}(rt||(rt={}));const ut=pe.create,it=De.create,at=Je.create,ot=me.create,st=ge.create,ct=ye.create,dt=Ee.create,ft=_e.create,ht=Ce.create,lt=Ae.create,pt=Fe.create,vt=be.create,Dt=we.create,mt=xe.create,gt=ke.create,yt=ke.strictCreate,Et=je.create,_t=Oe.create,Ct=Ie.create,At=Te.create,Ft=Ze.create,bt=Pe.create,wt=Me.create,xt=ze.create,Bt=Le.create,kt=$e.create,jt=Ue.create,Nt=Ve.create,Ot=Ge.create,St=qe.create,It=He.create,Tt=We.create,Zt=qe.createWithPreprocess,Pt=et.create,Mt={string:e=>pe.create({...e,coerce:!0}),number:e=>De.create({...e,coerce:!0}),boolean:e=>ge.create({...e,coerce:!0}),bigint:e=>me.create({...e,coerce:!0}),date:e=>ye.create({...e,coerce:!0})},zt=H;var Lt=Object.freeze({__proto__:null,defaultErrorMap:$,setErrorMap:function(e){R=e},getErrorMap:U,makeIssue:V,EMPTY_PATH:[],addIssueToContext:G,ParseStatus:q,INVALID:H,DIRTY:W,OK:K,isAborted:Y,isDirty:J,isValid:X,isAsync:Q,get util(){return I},get objectUtil(){return T},ZodParsedType:P,getParsedType:M,ZodType:ue,ZodString:pe,ZodNumber:De,ZodBigInt:me,ZodBoolean:ge,ZodDate:ye,ZodSymbol:Ee,ZodUndefined:_e,ZodNull:Ce,ZodAny:Ae,ZodUnknown:Fe,ZodNever:be,ZodVoid:we,ZodArray:xe,ZodObject:ke,ZodUnion:je,ZodDiscriminatedUnion:Oe,ZodIntersection:Ie,ZodTuple:Te,ZodRecord:Ze,ZodMap:Pe,ZodSet:Me,ZodFunction:ze,ZodLazy:Le,ZodLiteral:$e,ZodEnum:Ue,ZodNativeEnum:Ve,ZodPromise:Ge,ZodEffects:qe,ZodTransformer:qe,ZodOptional:He,ZodNullable:We,ZodDefault:Ke,ZodCatch:Ye,ZodNaN:Je,BRAND:Xe,ZodBranded:Qe,ZodPipeline:et,custom:tt,Schema:ue,ZodSchema:ue,late:nt,get ZodFirstPartyTypeKind(){return rt},coerce:Mt,any:lt,array:mt,bigint:ot,boolean:st,date:ct,discriminatedUnion:_t,effect:St,enum:jt,function:xt,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>tt((t=>t instanceof e),t),intersection:Ct,lazy:Bt,literal:kt,map:bt,nan:at,nativeEnum:Nt,never:vt,null:ht,nullable:Tt,number:it,object:gt,oboolean:()=>st().optional(),onumber:()=>it().optional(),optional:It,ostring:()=>ut().optional(),pipeline:Pt,preprocess:Zt,promise:Ot,record:Ft,set:wt,strictObject:yt,string:ut,symbol:dt,transformer:St,tuple:At,undefined:ft,union:Et,unknown:pt,void:Dt,NEVER:zt,ZodIssueCode:z,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:L});const $t={context:"white",actor:"#ffc107",aggregate:"#fffabb",system:"#eca0c3",projector:"#d5f694",policy:"#c595cd",process:"#c595cd",command:"#7adcfb",event:"#ffaa61"},Rt=["string","number","boolean","uuid","date"];class Ut{constructor(e,t,n,r){this.name=e,this.required=t,this.type=n,this.size=r}}let Vt=class extends Map{constructor(e,t){super(),this.name=e,this.description=t}toString(){return this.name}};const Gt={system:{handles:"command",emits:"event"},aggregate:{handles:"command",emits:"event"},policy:{handles:"event",invokes:"command"},process:{handles:"event",invokes:"command"},projector:{handles:"event"}},qt=(e,t)=>"command"===t.visual?{source:t,target:e}:{source:e,target:t},Ht=(e,t)=>"event"===t.visual?{source:e.ctx===t.ctx?t:{...t,name:t.name+"*"},target:e,color:$t.event,arrow:!1}:e.ctx!==t.ctx||e.useRefs?void 0:{source:e,target:t,color:$t.command,arrow:!1},Wt={context:(e,t,n)=>"event"===t.visual?{source:n.nodes.get(t.ctx.name),target:n.nodes.get(e.ctx.name),color:$t.event,arrow:!0}:"command"===t.visual?{source:n.nodes.get(e.ctx.name),target:n.nodes.get(t.ctx.name),color:$t.command,arrow:!0}:"projector"===t.visual?{source:n.nodes.get(e.ctx.name),target:n.nodes.get(t.ctx.name),color:$t.projector,arrow:!0}:void 0,aggregate:qt,system:qt,policy:Ht,process:Ht,projector:(e,t)=>({source:e.ctx===t.ctx?t:{...t,name:t.name+"*"},target:e,color:$t.event,arrow:!1}),command:()=>{},event:()=>{},actor:()=>{}},Kt=(e,t)=>{!e.refs&&(e.refs=new Set),e.refs.add(t)},Yt=(e,t)=>{t.rels=t.rels??new Set,t.rels.add(e.index)},Jt=(e,t,{requires:n,optional:r,description:u})=>{const i=e.schemas.get(t)??new Vt(t,u);e.schemas.set(t,i);const a=(t,n,r)=>{Rt.includes(n)?i.set(t,new Ut(t,r,n)):(e.schemas.has(n)||e.schemas.set(n,new Vt(n)),i.set(t,new Ut(t,r,e.schemas.get(n))))};n&&Object.entries(n).forEach((([e,t])=>a(e,t,!0))),r&&Object.entries(r).forEach((([e,t])=>a(e,t,!1)))},Xt=(e,t,n)=>{const r=e.schemas.get(t),u=e.schemas.get(n);r&&u&&u.forEach(((e,t)=>!r.has(t)&&r.set(t,e)))},Qt=e=>{let t=0;const n=(e,n="",r=!1)=>({index:++t,name:n,visual:"context",ctx:e??{},color:r?void 0:$t.context,nodes:new Map,edges:new Map,schemas:new Map,x:0,y:0}),r=n(),u=(e,u,i)=>{const[a,o]=u.split(".");o&&((e=r.nodes.get(a))||(e=n(r,a),r.nodes.set(a,e)),u=o),!e.nodes.has(u)&&e.nodes.set(u,{index:++t,name:u,visual:i,color:$t[i],ctx:e});return e.nodes.get(u)};return Object.entries(e).forEach((([e,t])=>{const i=n(r,e);r.nodes.set(e,i),Object.entries(t).forEach((([e,t])=>((e,t,n)=>{if("schema"===n.type)Jt(e,t,n);else{const r=u(e,t,n.type);r.description=n.description,"useRefs"in n&&(r.useRefs=n.useRefs),"schema"in n&&Jt(e,t,n.schema),"command"===n.type?n.actors&&Object.keys(n.actors).forEach((t=>u(e,t,"actor"))):"event"!==n.type&&Object.entries(n).forEach((([t,i])=>{if(Array.isArray(i)){const a=Gt[n.type][t];a&&i.forEach((t=>{const n=u(e,t,a);Yt(r,n)}))}}))}})(i,e,t)))})),Object.entries(e).forEach((([e,t])=>{const n=r.nodes.get(e);Object.entries(t).forEach((([e,t])=>{if("schema"===t.type)t.base&&Xt(n,e,t.base);else{const i=Wt[t.type],a=n.nodes.get(e);"schema"in t&&t.schema?.base&&Xt(n,e,t.schema.base),"command"===t.type&&t.actors&&Object.entries(t.actors).forEach((([e,t])=>{const r={...n.nodes.get(e)};Kt(a,r),t.forEach((e=>{const t=u(n,e,"projector");t&&Kt(r,t)}))})),Object.entries(t).forEach((([e,o])=>{Array.isArray(o)&&o.forEach((o=>{const s=u(n,o,Gt[t.type][e]);if("policy"!==a.visual&&"process"!==a.visual||"command"!==s.visual||a.ctx===s.ctx&&!a.useRefs||(Kt(s,a),Yt(a,s)),n.color&&a.ctx!==s.ctx){const e=Wt.context(a,s,r);if(e){const t=`${e.source.name}->${e.target.name}-${e.color||""}`;!r.edges.has(t)&&r.edges.set(t,e)}}const c=i(a,s,r);c&&(n.edges.set(`${c.source.name}->${c.target.name}`,c),n.nodes.set(c.source.name,c.source),n.nodes.set(c.target.name,c.target))}))}))}}))})),r};var en,tn,nn,rn,un,an,on,sn,cn,dn,fn,hn,ln,pn,vn,Dn,mn,gn,yn,En,_n,Cn,An,Fn,bn,wn,xn,Bn,kn,jn,Nn,On,Sn,In,Tn,Zn,Pn,Mn,zn,Ln,$n,Rn,Un,Vn,Gn,qn,Hn,Wn,Kn,Yn,Jn,Xn,Qn,er,tr,nr,rr,ur,ir,ar,or,sr,cr,dr,fr,hr,lr,pr,vr,Dr,mr,gr,yr,Er,_r,Cr,Ar,Fr,br,wr,xr,Br,kr,jr,Nr,Or,Sr,Ir,Tr,Zr,Pr,Mr,zr,Lr,$r,Rr,Ur,Vr,Gr,qr,Hr,Wr,Kr,Yr,Jr,Xr,Qr,eu,tu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function nu(){if(rn)return nn;return rn=1,nn=function(e,t){return e===t||e!=e&&t!=t}}function ru(){if(an)return un;an=1;var e=nu();return un=function(t,n){for(var r=t.length;r--;)if(e(t[r][0],n))return r;return-1},un}function uu(){if(Dn)return vn;Dn=1;var e=tn?en:(tn=1,en=function(){this.__data__=[],this.size=0}),t=function(){if(sn)return on;sn=1;var e=ru(),t=Array.prototype.splice;return on=function(n){var r=this.__data__,u=e(r,n);return!(u<0||(u==r.length-1?r.pop():t.call(r,u,1),--this.size,0))},on}(),n=function(){if(dn)return cn;dn=1;var e=ru();return cn=function(t){var n=this.__data__,r=e(n,t);return r<0?void 0:n[r][1]},cn}(),r=function(){if(hn)return fn;hn=1;var e=ru();return fn=function(t){return e(this.__data__,t)>-1},fn}(),u=function(){if(pn)return ln;pn=1;var e=ru();return ln=function(t,n){var r=this.__data__,u=e(r,t);return u<0?(++this.size,r.push([t,n])):r[u][1]=n,this},ln}();function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=u,vn=i}function iu(){if(wn)return bn;wn=1;var e="object"==typeof tu&&tu&&tu.Object===Object&&tu;return bn=e}function au(){if(Bn)return xn;Bn=1;var e=iu(),t="object"==typeof self&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return xn=n}function ou(){if(jn)return kn;jn=1;var e=au().Symbol;return kn=e}function su(){if(Zn)return Tn;Zn=1;var e=ou(),t=function(){if(On)return Nn;On=1;var e=ou(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,u=e?e.toStringTag:void 0;return Nn=function(e){var t=n.call(e,u),i=e[u];try{e[u]=void 0;var a=!0}catch(e){}var o=r.call(e);return a&&(t?e[u]=i:delete e[u]),o}}(),n=function(){if(In)return Sn;In=1;var e=Object.prototype.toString;return Sn=function(t){return e.call(t)}}(),r=e?e.toStringTag:void 0;return Tn=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?t(e):n(e)}}function cu(){if(Mn)return Pn;return Mn=1,Pn=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function du(){if(Ln)return zn;Ln=1;var e=su(),t=cu();return zn=function(n){if(!t(n))return!1;var r=e(n);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}}function fu(){if(Vn)return Un;Vn=1;var e,t=function(){if(Rn)return $n;Rn=1;var e=au()["__core-js_shared__"];return $n=e}(),n=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return Un=function(e){return!!n&&n in e}}function hu(){if(qn)return Gn;qn=1;var e=Function.prototype.toString;return Gn=function(t){if(null!=t){try{return e.call(t)}catch(e){}try{return t+""}catch(e){}}return""}}function lu(){if(Xn)return Jn;Xn=1;var e=function(){if(Wn)return Hn;Wn=1;var e=du(),t=fu(),n=cu(),r=hu(),u=/^\[object .+?Constructor\]$/,i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,c=RegExp("^"+o.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return Hn=function(i){return!(!n(i)||t(i))&&(e(i)?c:u).test(r(i))}}(),t=(Yn||(Yn=1,Kn=function(e,t){return null==e?void 0:e[t]}),Kn);return Jn=function(n,r){var u=t(n,r);return e(u)?u:void 0},Jn}function pu(){if(er)return Qn;er=1;var e=lu()(au(),"Map");return Qn=e}function vu(){if(nr)return tr;nr=1;var e=lu()(Object,"create");return tr=e}function Du(){if(pr)return lr;pr=1;var e=function(){if(ur)return rr;ur=1;var e=vu();return rr=function(){this.__data__=e?e(null):{},this.size=0}}(),t=(ar||(ar=1,ir=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}),ir),n=function(){if(sr)return or;sr=1;var e=vu(),t=Object.prototype.hasOwnProperty;return or=function(n){var r=this.__data__;if(e){var u=r[n];return"__lodash_hash_undefined__"===u?void 0:u}return t.call(r,n)?r[n]:void 0},or}(),r=function(){if(dr)return cr;dr=1;var e=vu(),t=Object.prototype.hasOwnProperty;return cr=function(n){var r=this.__data__;return e?void 0!==r[n]:t.call(r,n)},cr}(),u=function(){if(hr)return fr;hr=1;var e=vu();return fr=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=e&&void 0===n?"__lodash_hash_undefined__":n,this},fr}();function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=u,lr=i}function mu(){if(Er)return yr;Er=1;var e=gr?mr:(gr=1,mr=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return yr=function(t,n){var r=t.__data__;return e(n)?r["string"==typeof n?"string":"hash"]:r.map},yr}function gu(){if(jr)return kr;jr=1;var e=function(){if(Dr)return vr;Dr=1;var e=Du(),t=uu(),n=pu();return vr=function(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}}(),t=function(){if(Cr)return _r;Cr=1;var e=mu();return _r=function(t){var n=e(this,t).delete(t);return this.size-=n?1:0,n},_r}(),n=function(){if(Fr)return Ar;Fr=1;var e=mu();return Ar=function(t){return e(this,t).get(t)},Ar}(),r=function(){if(wr)return br;wr=1;var e=mu();return br=function(t){return e(this,t).has(t)},br}(),u=function(){if(Br)return xr;Br=1;var e=mu();return xr=function(t,n){var r=e(this,t),u=r.size;return r.set(t,n),this.size+=r.size==u?0:1,this},xr}();function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=u,kr=i}function yu(){if(Ir)return Sr;Ir=1;var e=uu(),t=function(){if(gn)return mn;gn=1;var e=uu();return mn=function(){this.__data__=new e,this.size=0}}(),n=(En||(En=1,yn=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}),yn),r=(Cn||(Cn=1,_n=function(e){return this.__data__.get(e)}),_n),u=(Fn||(Fn=1,An=function(e){return this.__data__.has(e)}),An),i=function(){if(Or)return Nr;Or=1;var e=uu(),t=pu(),n=gu();return Nr=function(r,u){var i=this.__data__;if(i instanceof e){var a=i.__data__;if(!t||a.length<199)return a.push([r,u]),this.size=++i.size,this;i=this.__data__=new n(a)}return i.set(r,u),this.size=i.size,this},Nr}();function a(t){var n=this.__data__=new e(t);this.size=n.size}return a.prototype.clear=t,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=u,a.prototype.set=i,Sr=a}function Eu(){if(Zr)return Tr;return Zr=1,Tr=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}}function _u(){if(Mr)return Pr;Mr=1;var e=lu(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();return Pr=t}function Cu(){if(Lr)return zr;Lr=1;var e=_u();return zr=function(t,n,r){"__proto__"==n&&e?e(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r},zr}function Au(){if(Rr)return $r;Rr=1;var e=Cu(),t=nu(),n=Object.prototype.hasOwnProperty;return $r=function(r,u,i){var a=r[u];n.call(r,u)&&t(a,i)&&(void 0!==i||u in r)||e(r,u,i)},$r}function Fu(){if(Vr)return Ur;Vr=1;var e=Au(),t=Cu();return Ur=function(n,r,u,i){var a=!u;u||(u={});for(var o=-1,s=r.length;++o<s;){var c=r[o],d=i?i(u[c],n[c],c,u,n):void 0;void 0===d&&(d=n[c]),a?t(u,c,d):e(u,c,d)}return u},Ur}function bu(){if(Wr)return Hr;return Wr=1,Hr=function(e){return null!=e&&"object"==typeof e}}function wu(){if(Xr)return Jr;Xr=1;var e=function(){if(Yr)return Kr;Yr=1;var e=su(),t=bu();return Kr=function(n){return t(n)&&"[object Arguments]"==e(n)}}(),t=bu(),n=Object.prototype,r=n.hasOwnProperty,u=n.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(e){return t(e)&&r.call(e,"callee")&&!u.call(e,"callee")};return Jr=i}function xu(){if(eu)return Qr;eu=1;var e=Array.isArray;return Qr=e}var Bu,ku,ju,Nu,Ou,Su,Iu,Tu,Zu,Pu,Mu,zu={exports:{}};function Lu(){return ju||(ju=1,function(e,t){var n=au(),r=ku?Bu:(ku=1,Bu=function(){return!1}),u=t&&!t.nodeType&&t,i=u&&e&&!e.nodeType&&e,a=i&&i.exports===u?n.Buffer:void 0,o=(a?a.isBuffer:void 0)||r;e.exports=o}(zu,zu.exports)),zu.exports}function $u(){if(Ou)return Nu;Ou=1;var e=/^(?:0|[1-9]\d*)$/;return Nu=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}}function Ru(){if(Iu)return Su;Iu=1;return Su=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}}function Uu(){if(Mu)return Pu;return Mu=1,Pu=function(e){return function(t){return e(t)}}}zu.exports;var Vu,Gu,qu,Hu,Wu,Ku,Yu,Ju,Xu,Qu,ei,ti,ni,ri,ui,ii,ai,oi,si,ci,di,fi,hi,li,pi,vi,Di,mi={exports:{}};function gi(){return Vu||(Vu=1,function(e,t){var n=iu(),r=t&&!t.nodeType&&t,u=r&&e&&!e.nodeType&&e,i=u&&u.exports===r&&n.process,a=function(){try{var e=u&&u.require&&u.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}(mi,mi.exports)),mi.exports}function yi(){if(qu)return Gu;qu=1;var e=function(){if(Zu)return Tu;Zu=1;var e=su(),t=Ru(),n=bu(),r={};return r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,Tu=function(u){return n(u)&&t(u.length)&&!!r[e(u)]}}(),t=Uu(),n=gi(),r=n&&n.isTypedArray,u=r?t(r):e;return Gu=u}function Ei(){if(Wu)return Hu;Wu=1;var e=qr?Gr:(qr=1,Gr=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}),t=wu(),n=xu(),r=Lu(),u=$u(),i=yi(),a=Object.prototype.hasOwnProperty;return Hu=function(o,s){var c=n(o),d=!c&&t(o),f=!c&&!d&&r(o),h=!c&&!d&&!f&&i(o),l=c||d||f||h,p=l?e(o.length,String):[],v=p.length;for(var D in o)!s&&!a.call(o,D)||l&&("length"==D||f&&("offset"==D||"parent"==D)||h&&("buffer"==D||"byteLength"==D||"byteOffset"==D)||u(D,v))||p.push(D);return p},Hu}function _i(){if(Yu)return Ku;Yu=1;var e=Object.prototype;return Ku=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}}function Ci(){if(Xu)return Ju;return Xu=1,Ju=function(e,t){return function(n){return e(t(n))}}}function Ai(){if(ni)return ti;ni=1;var e=_i(),t=function(){if(ei)return Qu;ei=1;var e=Ci()(Object.keys,Object);return Qu=e}(),n=Object.prototype.hasOwnProperty;return ti=function(r){if(!e(r))return t(r);var u=[];for(var i in Object(r))n.call(r,i)&&"constructor"!=i&&u.push(i);return u},ti}function Fi(){if(ui)return ri;ui=1;var e=du(),t=Ru();return ri=function(n){return null!=n&&t(n.length)&&!e(n)}}function bi(){if(ai)return ii;ai=1;var e=Ei(),t=Ai(),n=Fi();return ii=function(r){return n(r)?e(r):t(r)}}function wi(){if(hi)return fi;hi=1;var e=cu(),t=_i(),n=(di||(di=1,ci=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}),ci),r=Object.prototype.hasOwnProperty;return fi=function(u){if(!e(u))return n(u);var i=t(u),a=[];for(var o in u)("constructor"!=o||!i&&r.call(u,o))&&a.push(o);return a},fi}function xi(){if(pi)return li;pi=1;var e=Ei(),t=wi(),n=Fi();return li=function(r){return n(r)?e(r,!0):t(r)}}mi.exports;var Bi,ki,ji,Ni,Oi,Si,Ii,Ti,Zi,Pi,Mi,zi,Li,$i,Ri,Ui,Vi,Gi,qi,Hi,Wi,Ki,Yi,Ji,Xi,Qi,ea,ta,na,ra,ua,ia,aa,oa,sa,ca,da,fa,ha,la,pa,va,Da,ma,ga,ya,Ea,_a,Ca,Aa,Fa,ba,wa,xa,Ba,ka,ja,Na,Oa,Sa,Ia,Ta,Za,Pa,Ma,za,La,$a,Ra,Ua,Va,Ga,qa,Ha,Wa,Ka,Ya,Ja,Xa,Qa,eo,to,no,ro,uo,io,ao,oo,so,co,fo,ho,lo,po,vo,Do,mo,go,yo,Eo,_o,Co,Ao,Fo,bo,wo,xo,Bo,ko,jo,No,Oo,So,Io,To,Zo,Po,Mo,zo,Lo,$o,Ro,Uo,Vo,Go,qo,Ho,Wo,Ko,Yo,Jo,Xo,Qo,es,ts,ns,rs,us,is,as,os,ss,cs,ds,fs,hs,ls,ps,vs,Ds,ms,gs,ys,Es,_s,Cs,As,Fs,bs,ws,xs,Bs,ks,js,Ns,Os,Ss,Is,Ts,Zs,Ps,Ms,zs,Ls,$s,Rs,Us,Vs,Gs,qs,Hs,Ws,Ks,Ys,Js,Xs,Qs,ec,tc,nc,rc,uc,ic,ac,oc,sc,cc,dc,fc,hc,lc,pc,vc,Dc,mc,gc,yc,Ec,_c,Cc,Ac,Fc,bc,wc,xc,Bc,kc,jc,Nc,Oc,Sc,Ic,Tc,Zc,Pc,Mc,zc,Lc,$c,Rc,Uc,Vc,Gc,qc,Hc,Wc,Kc,Yc,Jc,Xc,Qc,ed,td,nd,rd,ud,id,ad,od,sd,cd,dd,fd,hd,ld,pd,vd,Dd,md,gd,yd,Ed,_d,Cd,Ad,Fd,bd,wd,xd,Bd,kd,jd,Nd,Od,Sd,Id,Td,Zd,Pd,Md,zd={exports:{}};function Ld(){return Bi||(Bi=1,function(e,t){var n=au(),r=t&&!t.nodeType&&t,u=r&&e&&!e.nodeType&&e,i=u&&u.exports===r?n.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}}(zd,zd.exports)),zd.exports}function $d(){if(ji)return ki;return ji=1,ki=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},ki}function Rd(){if(Oi)return Ni;return Oi=1,Ni=function(e,t){for(var n=-1,r=null==e?0:e.length,u=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[u++]=a)}return i}}function Ud(){if(Ii)return Si;return Ii=1,Si=function(){return[]}}function Vd(){if(Zi)return Ti;Zi=1;var e=Rd(),t=Ud(),n=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols;return Ti=r?function(t){return null==t?[]:(t=Object(t),e(r(t),(function(e){return n.call(t,e)})))}:t}function Gd(){if(Li)return zi;return Li=1,zi=function(e,t){for(var n=-1,r=t.length,u=e.length;++n<r;)e[u+n]=t[n];return e}}function qd(){if(Ri)return $i;Ri=1;var e=Ci()(Object.getPrototypeOf,Object);return $i=e}function Hd(){if(Vi)return Ui;Vi=1;var e=Gd(),t=qd(),n=Vd(),r=Ud(),u=Object.getOwnPropertySymbols;return Ui=u?function(r){for(var u=[];r;)e(u,n(r)),r=t(r);return u}:r}function Wd(){if(Wi)return Hi;Wi=1;var e=Gd(),t=xu();return Hi=function(n,r,u){var i=r(n);return t(n)?i:e(i,u(n))}}function Kd(){if(Yi)return Ki;Yi=1;var e=Wd(),t=Vd(),n=bi();return Ki=function(r){return e(r,n,t)}}function Yd(){if(ua)return ra;ua=1;var e=lu()(au(),"Set");return ra=e}function Jd(){if(sa)return oa;sa=1;var e=function(){if(ea)return Qi;ea=1;var e=lu()(au(),"DataView");return Qi=e}(),t=pu(),n=function(){if(na)return ta;na=1;var e=lu()(au(),"Promise");return ta=e}(),r=Yd(),u=function(){if(aa)return ia;aa=1;var e=lu()(au(),"WeakMap");return ia=e}(),i=su(),a=hu(),o="[object Map]",s="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",h=a(e),l=a(t),p=a(n),v=a(r),D=a(u),m=i;return(e&&m(new e(new ArrayBuffer(1)))!=f||t&&m(new t)!=o||n&&m(n.resolve())!=s||r&&m(new r)!=c||u&&m(new u)!=d)&&(m=function(e){var t=i(e),n="[object Object]"==t?e.constructor:void 0,r=n?a(n):"";if(r)switch(r){case h:return f;case l:return o;case p:return s;case v:return c;case D:return d}return t}),oa=m}function Xd(){if(ha)return fa;ha=1;var e=au().Uint8Array;return fa=e}function Qd(){if(pa)return la;pa=1;var e=Xd();return la=function(t){var n=new t.constructor(t.byteLength);return new e(n).set(new e(t)),n}}function ef(){if(Ca)return _a;Ca=1;var e=Qd();return _a=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},_a}function tf(){if(Fa)return Aa;Fa=1;var e=Qd(),t=function(){if(Da)return va;Da=1;var e=Qd();return va=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},va}(),n=function(){if(ga)return ma;ga=1;var e=/\w*$/;return ma=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}}(),r=function(){if(Ea)return ya;Ea=1;var e=ou(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;return ya=function(e){return n?Object(n.call(e)):{}}}(),u=ef();return Aa=function(i,a,o){var s=i.constructor;switch(a){case"[object ArrayBuffer]":return e(i);case"[object Boolean]":case"[object Date]":return new s(+i);case"[object DataView]":return t(i,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(i,o);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(i);case"[object RegExp]":return n(i);case"[object Symbol]":return r(i)}}}function nf(){if(wa)return ba;wa=1;var e=cu(),t=Object.create,n=function(){function n(){}return function(r){if(!e(r))return{};if(t)return t(r);n.prototype=r;var u=new n;return n.prototype=void 0,u}}();return ba=n}function rf(){if(Ba)return xa;Ba=1;var e=nf(),t=qd(),n=_i();return xa=function(r){return"function"!=typeof r.constructor||n(r)?{}:e(t(r))}}function uf(){if(Oa)return Na;Oa=1;var e=function(){if(ja)return ka;ja=1;var e=Jd(),t=bu();return ka=function(n){return t(n)&&"[object Map]"==e(n)}}(),t=Uu(),n=gi(),r=n&&n.isMap,u=r?t(r):e;return Na=u}function af(){if(Za)return Ta;Za=1;var e=function(){if(Ia)return Sa;Ia=1;var e=Jd(),t=bu();return Sa=function(n){return t(n)&&"[object Set]"==e(n)}}(),t=Uu(),n=gi(),r=n&&n.isSet,u=r?t(r):e;return Ta=u}function of(){if(Ma)return Pa;Ma=1;var e=yu(),t=Eu(),n=Au(),r=function(){if(si)return oi;si=1;var e=Fu(),t=bi();return oi=function(n,r){return n&&e(r,t(r),n)},oi}(),u=function(){if(Di)return vi;Di=1;var e=Fu(),t=xi();return vi=function(n,r){return n&&e(r,t(r),n)},vi}(),i=Ld(),a=$d(),o=function(){if(Mi)return Pi;Mi=1;var e=Fu(),t=Vd();return Pi=function(n,r){return e(n,t(n),r)},Pi}(),s=function(){if(qi)return Gi;qi=1;var e=Fu(),t=Hd();return Gi=function(n,r){return e(n,t(n),r)},Gi}(),c=Kd(),d=function(){if(Xi)return Ji;Xi=1;var e=Wd(),t=Hd(),n=xi();return Ji=function(r){return e(r,n,t)}}(),f=Jd(),h=function(){if(da)return ca;da=1;var e=Object.prototype.hasOwnProperty;return ca=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}}(),l=tf(),p=rf(),v=xu(),D=Lu(),m=uf(),g=cu(),y=af(),E=bi(),_=xi(),C="[object Arguments]",A="[object Function]",F="[object Object]",b={};return b[C]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object DataView]"]=b["[object Boolean]"]=b["[object Date]"]=b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Map]"]=b["[object Number]"]=b[F]=b["[object RegExp]"]=b["[object Set]"]=b["[object String]"]=b["[object Symbol]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b["[object Error]"]=b[A]=b["[object WeakMap]"]=!1,Pa=function w(x,B,k,j,N,O){var S,I=1&B,T=2&B,Z=4&B;if(k&&(S=N?k(x,j,N,O):k(x)),void 0!==S)return S;if(!g(x))return x;var P=v(x);if(P){if(S=h(x),!I)return a(x,S)}else{var M=f(x),z=M==A||"[object GeneratorFunction]"==M;if(D(x))return i(x,I);if(M==F||M==C||z&&!N){if(S=T||z?{}:p(x),!I)return T?s(x,u(S,x)):o(x,r(S,x))}else{if(!b[M])return N?x:{};S=l(x,M,I)}}O||(O=new e);var L=O.get(x);if(L)return L;O.set(x,S),y(x)?x.forEach((function(e){S.add(w(e,B,k,e,x,O))})):m(x)&&x.forEach((function(e,t){S.set(t,w(e,B,k,t,x,O))}));var $=P?void 0:(Z?T?d:c:T?_:E)(x);return t($||x,(function(e,t){$&&(e=x[t=e]),n(S,t,w(e,B,k,t,x,O))})),S},Pa}function sf(){if(La)return za;La=1;var e=of();return za=function(t){return e(t,4)}}function cf(){if(Ra)return $a;return Ra=1,$a=function(e){return function(){return e}}}function df(){if(qa)return Ga;qa=1;var e=(Va||(Va=1,Ua=function(e){return function(t,n,r){for(var u=-1,i=Object(t),a=r(t),o=a.length;o--;){var s=a[e?o:++u];if(!1===n(i[s],s,i))break}return t}}),Ua),t=e();return Ga=t}function ff(){if(Wa)return Ha;Wa=1;var e=df(),t=bi();return Ha=function(n,r){return n&&e(n,r,t)}}function hf(){if(Xa)return Ja;Xa=1;var e=ff(),t=function(){if(Ya)return Ka;Ya=1;var e=Fi();return Ka=function(t,n){return function(r,u){if(null==r)return r;if(!e(r))return t(r,u);for(var i=r.length,a=n?i:-1,o=Object(r);(n?a--:++a<i)&&!1!==u(o[a],a,o););return r}}}()(e);return Ja=t}function lf(){if(eo)return Qa;return eo=1,Qa=function(e){return e}}function pf(){if(no)return to;no=1;var e=lf();return to=function(t){return"function"==typeof t?t:e}}function vf(){if(uo)return ro;uo=1;var e=Eu(),t=hf(),n=pf(),r=xu();return ro=function(u,i){return(r(u)?e:t)(u,n(i))}}function Df(){return ao?io:(ao=1,io=vf())}function mf(){if(vo)return po;vo=1;var e=gu(),t=fo?co:(fo=1,co=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}),n=lo?ho:(lo=1,ho=function(e){return this.__data__.has(e)});function r(t){var n=-1,r=null==t?0:t.length;for(this.__data__=new e;++n<r;)this.add(t[n])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,po=r}function gf(){if(yo)return go;return yo=1,go=function(e,t){return e.has(t)},go}function yf(){if(_o)return Eo;_o=1;var e=mf(),t=mo?Do:(mo=1,Do=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}),n=gf();return Eo=function(r,u,i,a,o,s){var c=1&i,d=r.length,f=u.length;if(d!=f&&!(c&&f>d))return!1;var h=s.get(r),l=s.get(u);if(h&&l)return h==u&&l==r;var p=-1,v=!0,D=2&i?new e:void 0;for(s.set(r,u),s.set(u,r);++p<d;){var m=r[p],g=u[p];if(a)var y=c?a(g,m,p,u,r,s):a(m,g,p,r,u,s);if(void 0!==y){if(y)continue;v=!1;break}if(D){if(!t(u,(function(e,t){if(!n(D,t)&&(m===e||o(m,e,i,a,s)))return D.push(t)}))){v=!1;break}}else if(m!==g&&!o(m,g,i,a,s)){v=!1;break}}return s.delete(r),s.delete(u),v},Eo}function Ef(){if(bo)return Fo;return bo=1,Fo=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}}function _f(){if(xo)return wo;xo=1;var e=ou(),t=Xd(),n=nu(),r=yf(),u=(Ao||(Ao=1,Co=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}),Co),i=Ef(),a=e?e.prototype:void 0,o=a?a.valueOf:void 0;return wo=function(e,a,s,c,d,f,h){switch(s){case"[object DataView]":if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=a.byteLength||!f(new t(e),new t(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return n(+e,+a);case"[object Error]":return e.name==a.name&&e.message==a.message;case"[object RegExp]":case"[object String]":return e==a+"";case"[object Map]":var l=u;case"[object Set]":var p=1&c;if(l||(l=i),e.size!=a.size&&!p)return!1;var v=h.get(e);if(v)return v==a;c|=2,h.set(e,a);var D=r(l(e),l(a),c,d,f,h);return h.delete(e),D;case"[object Symbol]":if(o)return o.call(e)==o.call(a)}return!1},wo}function Cf(){if(No)return jo;No=1;var e=yu(),t=yf(),n=_f(),r=function(){if(ko)return Bo;ko=1;var e=Kd(),t=Object.prototype.hasOwnProperty;return Bo=function(n,r,u,i,a,o){var s=1&u,c=e(n),d=c.length;if(d!=e(r).length&&!s)return!1;for(var f=d;f--;){var h=c[f];if(!(s?h in r:t.call(r,h)))return!1}var l=o.get(n),p=o.get(r);if(l&&p)return l==r&&p==n;var v=!0;o.set(n,r),o.set(r,n);for(var D=s;++f<d;){var m=n[h=c[f]],g=r[h];if(i)var y=s?i(g,m,h,r,n,o):i(m,g,h,n,r,o);if(!(void 0===y?m===g||a(m,g,u,i,o):y)){v=!1;break}D||(D="constructor"==h)}if(v&&!D){var E=n.constructor,_=r.constructor;E==_||!("constructor"in n)||!("constructor"in r)||"function"==typeof E&&E instanceof E&&"function"==typeof _&&_ instanceof _||(v=!1)}return o.delete(n),o.delete(r),v},Bo}(),u=Jd(),i=xu(),a=Lu(),o=yi(),s="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype.hasOwnProperty;return jo=function(h,l,p,v,D,m){var g=i(h),y=i(l),E=g?c:u(h),_=y?c:u(l),C=(E=E==s?d:E)==d,A=(_=_==s?d:_)==d,F=E==_;if(F&&a(h)){if(!a(l))return!1;g=!0,C=!1}if(F&&!C)return m||(m=new e),g||o(h)?t(h,l,p,v,D,m):n(h,l,E,p,v,D,m);if(!(1&p)){var b=C&&f.call(h,"__wrapped__"),w=A&&f.call(l,"__wrapped__");if(b||w){var x=b?h.value():h,B=w?l.value():l;return m||(m=new e),D(x,B,p,v,m)}}return!!F&&(m||(m=new e),r(h,l,p,v,D,m))},jo}function Af(){if(So)return Oo;So=1;var e=Cf(),t=bu();return Oo=function n(r,u,i,a,o){return r===u||(null==r||null==u||!t(r)&&!t(u)?r!=r&&u!=u:e(r,u,i,a,n,o))},Oo}function Ff(){if(Po)return Zo;Po=1;var e=cu();return Zo=function(t){return t==t&&!e(t)}}function bf(){if($o)return Lo;return $o=1,Lo=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},Lo}function wf(){if(Uo)return Ro;Uo=1;var e=function(){if(To)return Io;To=1;var e=yu(),t=Af();return Io=function(n,r,u,i){var a=u.length,o=a,s=!i;if(null==n)return!o;for(n=Object(n);a--;){var c=u[a];if(s&&c[2]?c[1]!==n[c[0]]:!(c[0]in n))return!1}for(;++a<o;){var d=(c=u[a])[0],f=n[d],h=c[1];if(s&&c[2]){if(void 0===f&&!(d in n))return!1}else{var l=new e;if(i)var p=i(f,h,d,n,r,l);if(!(void 0===p?t(h,f,3,i,l):p))return!1}}return!0},Io}(),t=function(){if(zo)return Mo;zo=1;var e=Ff(),t=bi();return Mo=function(n){for(var r=t(n),u=r.length;u--;){var i=r[u],a=n[i];r[u]=[i,a,e(a)]}return r},Mo}(),n=bf();return Ro=function(r){var u=t(r);return 1==u.length&&u[0][2]?n(u[0][0],u[0][1]):function(t){return t===r||e(t,r,u)}},Ro}function xf(){if(Go)return Vo;Go=1;var e=su(),t=bu();return Vo=function(n){return"symbol"==typeof n||t(n)&&"[object Symbol]"==e(n)}}function Bf(){if(Ho)return qo;Ho=1;var e=xu(),t=xf(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;return qo=function(u,i){if(e(u))return!1;var a=typeof u;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=u&&!t(u))||(r.test(u)||!n.test(u)||null!=i&&u in Object(i))}}function kf(){if(Jo)return Yo;Jo=1;var e=function(){if(Ko)return Wo;Ko=1;var e=gu();function t(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var u=function(){var e=arguments,t=r?r.apply(this,e):e[0],i=u.cache;if(i.has(t))return i.get(t);var a=n.apply(this,e);return u.cache=i.set(t,a)||i,a};return u.cache=new(t.Cache||e),u}return t.Cache=e,Wo=t}();return Yo=function(t){var n=e(t,(function(e){return 500===r.size&&r.clear(),e})),r=n.cache;return n},Yo}function jf(){if(ts)return es;return ts=1,es=function(e,t){for(var n=-1,r=null==e?0:e.length,u=Array(r);++n<r;)u[n]=t(e[n],n,e);return u}}function Nf(){if(is)return us;is=1;var e=function(){if(rs)return ns;rs=1;var e=ou(),t=jf(),n=xu(),r=xf(),u=e?e.prototype:void 0,i=u?u.toString:void 0;return ns=function e(u){if("string"==typeof u)return u;if(n(u))return t(u,e)+"";if(r(u))return i?i.call(u):"";var a=u+"";return"0"==a&&1/u==-1/0?"-0":a},ns}();return us=function(t){return null==t?"":e(t)}}function Of(){if(os)return as;os=1;var e=xu(),t=Bf(),n=function(){if(Qo)return Xo;Qo=1;var e=kf(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e((function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(t,(function(e,t,u,i){r.push(u?i.replace(n,"$1"):t||e)})),r}));return Xo=r}(),r=Nf();return as=function(u,i){return e(u)?u:t(u,i)?[u]:n(r(u))}}function Sf(){if(cs)return ss;cs=1;var e=xf();return ss=function(t){if("string"==typeof t||e(t))return t;var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}}function If(){if(fs)return ds;fs=1;var e=Of(),t=Sf();return ds=function(n,r){for(var u=0,i=(r=e(r,n)).length;null!=n&&u<i;)n=n[t(r[u++])];return u&&u==i?n:void 0}}function Tf(){if(ms)return Ds;ms=1;var e=Of(),t=wu(),n=xu(),r=$u(),u=Ru(),i=Sf();return Ds=function(a,o,s){for(var c=-1,d=(o=e(o,a)).length,f=!1;++c<d;){var h=i(o[c]);if(!(f=null!=a&&s(a,h)))break;a=a[h]}return f||++c!=d?f:!!(d=null==a?0:a.length)&&u(d)&&r(h,d)&&(n(a)||t(a))},Ds}function Zf(){if(ys)return gs;ys=1;var e=(vs||(vs=1,ps=function(e,t){return null!=e&&t in Object(e)}),ps),t=Tf();return gs=function(n,r){return null!=n&&t(n,r,e)}}function Pf(){if(_s)return Es;_s=1;var e=Af(),t=function(){if(ls)return hs;ls=1;var e=If();return hs=function(t,n,r){var u=null==t?void 0:e(t,n);return void 0===u?r:u}}(),n=Zf(),r=Bf(),u=Ff(),i=bf(),a=Sf();return Es=function(o,s){return r(o)&&u(s)?i(a(o),s):function(r){var u=t(r,o);return void 0===u&&u===s?n(r,o):e(s,u,3)}}}function Mf(){if(As)return Cs;return As=1,Cs=function(e){return function(t){return null==t?void 0:t[e]}},Cs}function zf(){if(xs)return ws;xs=1;var e=Mf(),t=function(){if(bs)return Fs;bs=1;var e=If();return Fs=function(t){return function(n){return e(n,t)}}}(),n=Bf(),r=Sf();return ws=function(u){return n(u)?e(r(u)):t(u)}}function Lf(){if(ks)return Bs;ks=1;var e=wf(),t=Pf(),n=lf(),r=xu(),u=zf();return Bs=function(i){return"function"==typeof i?i:null==i?n:"object"==typeof i?r(i)?t(i[0],i[1]):e(i):u(i)}}function $f(){if(Ns)return js;Ns=1;var e=Rd(),t=function(){if(so)return oo;so=1;var e=hf();return oo=function(t,n){var r=[];return e(t,(function(e,t,u){n(e,t,u)&&r.push(e)})),r}}(),n=Lf(),r=xu();return js=function(u,i){return(r(u)?e:t)(u,n(i,3))}}function Rf(){if(Ts)return Is;Ts=1;var e=function(){if(Ss)return Os;Ss=1;var e=Object.prototype.hasOwnProperty;return Os=function(t,n){return null!=t&&e.call(t,n)},Os}(),t=Tf();return Is=function(n,r){return null!=n&&t(n,r,e)}}function Uf(){if(Ps)return Zs;Ps=1;var e=Ai(),t=Jd(),n=wu(),r=xu(),u=Fi(),i=Lu(),a=_i(),o=yi(),s=Object.prototype.hasOwnProperty;return Zs=function(c){if(null==c)return!0;if(u(c)&&(r(c)||"string"==typeof c||"function"==typeof c.splice||i(c)||o(c)||n(c)))return!c.length;var d=t(c);if("[object Map]"==d||"[object Set]"==d)return!c.size;if(a(c))return!e(c).length;for(var f in c)if(s.call(c,f))return!1;return!0},Zs}function Vf(){if(zs)return Ms;return zs=1,Ms=function(e){return void 0===e}}function Gf(){if($s)return Ls;$s=1;var e=hf(),t=Fi();return Ls=function(n,r){var u=-1,i=t(n)?Array(n.length):[];return e(n,(function(e,t,n){i[++u]=r(e,t,n)})),i},Ls}function qf(){if(Us)return Rs;Us=1;var e=jf(),t=Lf(),n=Gf(),r=xu();return Rs=function(u,i){return(r(u)?e:n)(u,t(i,3))}}function Hf(){if(Ks)return Ws;Ks=1;var e=Gs?Vs:(Gs=1,Vs=function(e,t,n,r){var u=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++u]);++u<i;)n=t(n,e[u],u,e);return n}),t=hf(),n=Lf(),r=Hs?qs:(Hs=1,qs=function(e,t,n,r,u){return u(e,(function(e,u,i){n=r?(r=!1,e):t(n,e,u,i)})),n}),u=xu();return Ws=function(i,a,o){var s=u(i)?e:r,c=arguments.length<3;return s(i,n(a,4),o,c,t)},Ws}function Wf(){if(ic)return uc;ic=1;var e=function(){if(Qs)return Xs;Qs=1;var e=Mf()("length");return Xs=e}(),t=function(){if(tc)return ec;tc=1;var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");return ec=function(t){return e.test(t)}}(),n=function(){if(rc)return nc;rc=1;var e="\\ud800-\\udfff",t="["+e+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",u="[^"+e+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",o="(?:"+n+"|"+r+")?",s="[\\ufe0e\\ufe0f]?",c=s+o+"(?:\\u200d(?:"+[u,i,a].join("|")+")"+s+o+")*",d="(?:"+[u+n+"?",n,i,a,t].join("|")+")",f=RegExp(r+"(?="+r+")|"+d+c,"g");return nc=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}}();return uc=function(r){return t(r)?n(r):e(r)}}function Kf(){if(oc)return ac;oc=1;var e=Ai(),t=Jd(),n=Fi(),r=function(){if(Js)return Ys;Js=1;var e=su(),t=xu(),n=bu();return Ys=function(r){return"string"==typeof r||!t(r)&&n(r)&&"[object String]"==e(r)}}(),u=Wf();return ac=function(i){if(null==i)return 0;if(n(i))return r(i)?u(i):i.length;var a=t(i);return"[object Map]"==a||"[object Set]"==a?i.size:e(i).length}}function Yf(){if(cc)return sc;cc=1;var e=Eu(),t=nf(),n=ff(),r=Lf(),u=qd(),i=xu(),a=Lu(),o=du(),s=cu(),c=yi();return sc=function(d,f,h){var l=i(d),p=l||a(d)||c(d);if(f=r(f,4),null==h){var v=d&&d.constructor;h=p?l?new v:[]:s(d)&&o(v)?t(u(d)):{}}return(p?e:n)(d,(function(e,t,n){return f(h,e,t,n)})),h}}function Jf(){if(lc)return hc;lc=1;var e=Gd(),t=function(){if(fc)return dc;fc=1;var e=ou(),t=wu(),n=xu(),r=e?e.isConcatSpreadable:void 0;return dc=function(e){return n(e)||t(e)||!!(r&&e&&e[r])}}();return hc=function n(r,u,i,a,o){var s=-1,c=r.length;for(i||(i=t),o||(o=[]);++s<c;){var d=r[s];u>0&&i(d)?u>1?n(d,u-1,i,a,o):e(o,d):a||(o[o.length]=d)}return o},hc}function Xf(){if(mc)return Dc;mc=1;var e=vc?pc:(vc=1,pc=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}),t=Math.max;return Dc=function(n,r,u){return r=t(void 0===r?n.length-1:r,0),function(){for(var i=arguments,a=-1,o=t(i.length-r,0),s=Array(o);++a<o;)s[a]=i[r+a];a=-1;for(var c=Array(r+1);++a<r;)c[a]=i[a];return c[r]=u(s),e(n,this,c)}},Dc}function Qf(){if(Ac)return Cc;Ac=1;var e=function(){if(yc)return gc;yc=1;var e=cf(),t=_u(),n=lf();return gc=t?function(n,r){return t(n,"toString",{configurable:!0,enumerable:!1,value:e(r),writable:!0})}:n}(),t=function(){if(_c)return Ec;_c=1;var e=Date.now;return Ec=function(t){var n=0,r=0;return function(){var u=e(),i=16-(u-r);if(r=u,i>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}},Ec}(),n=t(e);return Cc=n}function eh(){if(bc)return Fc;bc=1;var e=lf(),t=Xf(),n=Qf();return Fc=function(r,u){return n(t(r,u,e),r+"")}}function th(){if(xc)return wc;return xc=1,wc=function(e,t,n,r){for(var u=e.length,i=n+(r?1:-1);r?i--:++i<u;)if(t(e[i],i,e))return i;return-1}}function nh(){if(Sc)return Oc;Sc=1;var e=th(),t=kc?Bc:(kc=1,Bc=function(e){return e!=e}),n=Nc?jc:(Nc=1,jc=function(e,t,n){for(var r=n-1,u=e.length;++r<u;)if(e[r]===t)return r;return-1});return Oc=function(r,u,i){return u==u?n(r,u,i):e(r,t,i)}}function rh(){if($c)return Lc;$c=1;var e=Yd(),t=zc?Mc:(zc=1,Mc=function(){}),n=Ef(),r=e&&1/n(new e([,-0]))[1]==1/0?function(t){return new e(t)}:t;return Lc=r}function uh(){if(Uc)return Rc;Uc=1;var e=mf(),t=function(){if(Tc)return Ic;Tc=1;var e=nh();return Ic=function(t,n){return!(null==t||!t.length)&&e(t,n,0)>-1}}(),n=Pc?Zc:(Pc=1,Zc=function(e,t,n){for(var r=-1,u=null==e?0:e.length;++r<u;)if(n(t,e[r]))return!0;return!1}),r=gf(),u=rh(),i=Ef();return Rc=function(a,o,s){var c=-1,d=t,f=a.length,h=!0,l=[],p=l;if(s)h=!1,d=n;else if(f>=200){var v=o?null:u(a);if(v)return i(v);h=!1,d=r,p=new e}else p=o?[]:l;e:for(;++c<f;){var D=a[c],m=o?o(D):D;if(D=s||0!==D?D:0,h&&m==m){for(var g=p.length;g--;)if(p[g]===m)continue e;o&&p.push(m),l.push(D)}else d(p,m,s)||(p!==l&&p.push(m),l.push(D))}return l}}function ih(){if(Gc)return Vc;Gc=1;var e=Fi(),t=bu();return Vc=function(n){return t(n)&&e(n)}}function ah(){if(Hc)return qc;Hc=1;var e=Jf(),t=eh(),n=uh(),r=ih(),u=t((function(t){return n(e(t,1,r,!0))}));return qc=u}function oh(){if(Jc)return Yc;Jc=1;var e=function(){if(Kc)return Wc;Kc=1;var e=jf();return Wc=function(t,n){return e(n,(function(e){return t[e]}))},Wc}(),t=bi();return Yc=function(n){return null==n?[]:e(n,t(n))}}function sh(){if(Qc)return Xc;var e;Qc=1;try{e={clone:sf(),constant:cf(),each:Df(),filter:$f(),has:Rf(),isArray:xu(),isEmpty:Uf(),isFunction:du(),isUndefined:Vf(),keys:bi(),map:qf(),reduce:Hf(),size:Kf(),transform:Yf(),union:ah(),values:oh()}}catch(e){}return e||(e=window._),Xc=e}function ch(){if(td)return ed;td=1;var e=sh();ed=u;var t="\0",n="\0",r="";function u(t){this._isDirected=!e.has(t,"directed")||t.directed,this._isMultigraph=!!e.has(t,"multigraph")&&t.multigraph,this._isCompound=!!e.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(e,t){e[t]?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function o(n,u,i,a){var o=""+u,s=""+i;if(!n&&o>s){var c=o;o=s,s=c}return o+r+s+r+(e.isUndefined(a)?t:a)}function s(e,t){return o(e,t.v,t.w,t.name)}return u.prototype._nodeCount=0,u.prototype._edgeCount=0,u.prototype.isDirected=function(){return this._isDirected},u.prototype.isMultigraph=function(){return this._isMultigraph},u.prototype.isCompound=function(){return this._isCompound},u.prototype.setGraph=function(e){return this._label=e,this},u.prototype.graph=function(){return this._label},u.prototype.setDefaultNodeLabel=function(t){return e.isFunction(t)||(t=e.constant(t)),this._defaultNodeLabelFn=t,this},u.prototype.nodeCount=function(){return this._nodeCount},u.prototype.nodes=function(){return e.keys(this._nodes)},u.prototype.sources=function(){var t=this;return e.filter(this.nodes(),(function(n){return e.isEmpty(t._in[n])}))},u.prototype.sinks=function(){var t=this;return e.filter(this.nodes(),(function(n){return e.isEmpty(t._out[n])}))},u.prototype.setNodes=function(t,n){var r=arguments,u=this;return e.each(t,(function(e){r.length>1?u.setNode(e,n):u.setNode(e)})),this},u.prototype.setNode=function(t,r){return e.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=r),this):(this._nodes[t]=arguments.length>1?r:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=n,this._children[t]={},this._children[n][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},u.prototype.node=function(e){return this._nodes[e]},u.prototype.hasNode=function(t){return e.has(this._nodes,t)},u.prototype.removeNode=function(t){var n=this;if(e.has(this._nodes,t)){var r=function(e){n.removeEdge(n._edgeObjs[e])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],e.each(this.children(t),(function(e){n.setParent(e)})),delete this._children[t]),e.each(e.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],e.each(e.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},u.prototype.setParent=function(t,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(r))r=n;else{for(var u=r+="";!e.isUndefined(u);u=this.parent(u))if(u===t)throw new Error("Setting "+r+" as parent of "+t+" would create a cycle");this.setNode(r)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=r,this._children[r][t]=!0,this},u.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},u.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==n)return t}},u.prototype.children=function(t){if(e.isUndefined(t)&&(t=n),this._isCompound){var r=this._children[t];if(r)return e.keys(r)}else{if(t===n)return this.nodes();if(this.hasNode(t))return[]}},u.prototype.predecessors=function(t){var n=this._preds[t];if(n)return e.keys(n)},u.prototype.successors=function(t){var n=this._sucs[t];if(n)return e.keys(n)},u.prototype.neighbors=function(t){var n=this.predecessors(t);if(n)return e.union(n,this.successors(t))},u.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},u.prototype.filterNodes=function(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;e.each(this._nodes,(function(e,r){t(r)&&n.setNode(r,e)})),e.each(this._edgeObjs,(function(e){n.hasNode(e.v)&&n.hasNode(e.w)&&n.setEdge(e,r.edge(e))}));var u={};function i(e){var t=r.parent(e);return void 0===t||n.hasNode(t)?(u[e]=t,t):t in u?u[t]:i(t)}return this._isCompound&&e.each(n.nodes(),(function(e){n.setParent(e,i(e))})),n},u.prototype.setDefaultEdgeLabel=function(t){return e.isFunction(t)||(t=e.constant(t)),this._defaultEdgeLabelFn=t,this},u.prototype.edgeCount=function(){return this._edgeCount},u.prototype.edges=function(){return e.values(this._edgeObjs)},u.prototype.setPath=function(t,n){var r=this,u=arguments;return e.reduce(t,(function(e,t){return u.length>1?r.setEdge(e,t,n):r.setEdge(e,t),t})),this},u.prototype.setEdge=function(){var t,n,r,u,a=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(t=s.v,n=s.w,r=s.name,2===arguments.length&&(u=arguments[1],a=!0)):(t=s,n=arguments[1],r=arguments[3],arguments.length>2&&(u=arguments[2],a=!0)),t=""+t,n=""+n,e.isUndefined(r)||(r=""+r);var c=o(this._isDirected,t,n,r);if(e.has(this._edgeLabels,c))return a&&(this._edgeLabels[c]=u),this;if(!e.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[c]=a?u:this._defaultEdgeLabelFn(t,n,r);var d=function(e,t,n,r){var u=""+t,i=""+n;if(!e&&u>i){var a=u;u=i,i=a}var o={v:u,w:i};r&&(o.name=r);return o}(this._isDirected,t,n,r);return t=d.v,n=d.w,Object.freeze(d),this._edgeObjs[c]=d,i(this._preds[n],t),i(this._sucs[t],n),this._in[n][c]=d,this._out[t][c]=d,this._edgeCount++,this},u.prototype.edge=function(e,t,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,e,t,n);return this._edgeLabels[r]},u.prototype.hasEdge=function(t,n,r){var u=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,t,n,r);return e.has(this._edgeLabels,u)},u.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,e,t,n),u=this._edgeObjs[r];return u&&(e=u.v,t=u.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[t],e),a(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},u.prototype.inEdges=function(t,n){var r=this._in[t];if(r){var u=e.values(r);return n?e.filter(u,(function(e){return e.v===n})):u}},u.prototype.outEdges=function(t,n){var r=this._out[t];if(r){var u=e.values(r);return n?e.filter(u,(function(e){return e.w===n})):u}},u.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))},ed}function dh(){return id?ud:(id=1,ud={Graph:ch(),version:rd?nd:(rd=1,nd="2.1.8")})}function fh(){if(od)return ad;od=1;var e=sh(),t=ch();function n(t){return e.map(t.nodes(),(function(n){var r=t.node(n),u=t.parent(n),i={v:n};return e.isUndefined(r)||(i.value=r),e.isUndefined(u)||(i.parent=u),i}))}function r(t){return e.map(t.edges(),(function(n){var r=t.edge(n),u={v:n.v,w:n.w};return e.isUndefined(n.name)||(u.name=n.name),e.isUndefined(r)||(u.value=r),u}))}return ad={write:function(t){var u={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:n(t),edges:r(t)};e.isUndefined(t.graph())||(u.value=e.clone(t.graph()));return u},read:function(n){var r=new t(n.options).setGraph(n.value);return e.each(n.nodes,(function(e){r.setNode(e.v,e.value),e.parent&&r.setParent(e.v,e.parent)})),e.each(n.edges,(function(e){r.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),r}}}function hh(){if(cd)return sd;cd=1;var e=sh();return sd=function(t){var n,r={},u=[];function i(u){e.has(r,u)||(r[u]=!0,n.push(u),e.each(t.successors(u),i),e.each(t.predecessors(u),i))}return e.each(t.nodes(),(function(e){n=[],i(e),n.length&&u.push(n)})),u},sd}function lh(){if(fd)return dd;fd=1;var e=sh();function t(){this._arr=[],this._keyIndices={}}return dd=t,t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},t.prototype.has=function(t){return e.has(this._keyIndices,t)},t.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},t.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(t,n){var r=this._keyIndices;if(t=String(t),!e.has(r,t)){var u=this._arr,i=u.length;return r[t]=i,u.push({key:t,priority:n}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},t.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},t.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,u=e;n<t.length&&(u=t[n].priority<t[u].priority?n:u,r<t.length&&(u=t[r].priority<t[u].priority?r:u),u!==e&&(this._swap(e,u),this._heapify(u)))},t.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},t.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,u=n[e],i=n[t];n[e]=i,n[t]=u,r[i.key]=e,r[u.key]=t},dd}function ph(){if(ld)return hd;ld=1;var e=sh(),t=lh();hd=function(e,r,u,i){return function(e,n,r,u){var i,a,o={},s=new t,c=function(e){var t=e.v!==i?e.v:e.w,n=o[t],u=r(e),c=a.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+u);c<n.distance&&(n.distance=c,n.predecessor=i,s.decrease(t,c))};e.nodes().forEach((function(e){var t=e===n?0:Number.POSITIVE_INFINITY;o[e]={distance:t},s.add(e,t)}));for(;s.size()>0&&(i=s.removeMin(),(a=o[i]).distance!==Number.POSITIVE_INFINITY);)u(i).forEach(c);return o}(e,String(r),u||n,i||function(t){return e.outEdges(t)})};var n=e.constant(1);return hd}function vh(){if(vd)return pd;vd=1;var e=ph(),t=sh();return pd=function(n,r,u){return t.transform(n.nodes(),(function(t,i){t[i]=e(n,i,r,u)}),{})}}function Dh(){if(md)return Dd;md=1;var e=sh();return Dd=function(t){var n=0,r=[],u={},i=[];function a(o){var s=u[o]={onStack:!0,lowlink:n,index:n++};if(r.push(o),t.successors(o).forEach((function(t){e.has(u,t)?u[t].onStack&&(s.lowlink=Math.min(s.lowlink,u[t].index)):(a(t),s.lowlink=Math.min(s.lowlink,u[t].lowlink))})),s.lowlink===s.index){var c,d=[];do{c=r.pop(),u[c].onStack=!1,d.push(c)}while(o!==c);i.push(d)}}return t.nodes().forEach((function(t){e.has(u,t)||a(t)})),i},Dd}function mh(){if(yd)return gd;yd=1;var e=sh(),t=Dh();return gd=function(n){return e.filter(t(n),(function(e){return e.length>1||1===e.length&&n.hasEdge(e[0],e[0])}))}}function gh(){if(_d)return Ed;_d=1;var e=sh();Ed=function(e,n,r){return function(e,t,n){var r={},u=e.nodes();return u.forEach((function(e){r[e]={},r[e][e]={distance:0},u.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var u=n.v===e?n.w:n.v,i=t(n);r[e][u]={distance:i,predecessor:e}}))})),u.forEach((function(e){var t=r[e];u.forEach((function(n){var i=r[n];u.forEach((function(n){var r=i[e],u=t[n],a=i[n],o=r.distance+u.distance;o<a.distance&&(a.distance=o,a.predecessor=u.predecessor)}))}))})),r}(e,n||t,r||function(t){return e.outEdges(t)})};var t=e.constant(1);return Ed}function yh(){if(Ad)return Cd;Ad=1;var e=sh();function t(t){var r={},u={},i=[];if(e.each(t.sinks(),(function a(o){if(e.has(u,o))throw new n;e.has(r,o)||(u[o]=!0,r[o]=!0,e.each(t.predecessors(o),a),delete u[o],i.push(o))})),e.size(r)!==t.nodeCount())throw new n;return i}function n(){}return Cd=t,t.CycleException=n,n.prototype=new Error,Cd}function Eh(){if(bd)return Fd;bd=1;var e=yh();return Fd=function(t){try{e(t)}catch(t){if(t instanceof e.CycleException)return!1;throw t}return!0}}function _h(){if(xd)return wd;xd=1;var e=sh();function t(n,r,u,i,a,o){e.has(i,r)||(i[r]=!0,u||o.push(r),e.each(a(r),(function(e){t(n,e,u,i,a,o)})),u&&o.push(r))}return wd=function(n,r,u){e.isArray(r)||(r=[r]);var i=(n.isDirected()?n.successors:n.neighbors).bind(n),a=[],o={};return e.each(r,(function(e){if(!n.hasNode(e))throw new Error("Graph does not have node: "+e);t(n,e,"post"===u,o,i,a)})),a},wd}function Ch(){if(kd)return Bd;kd=1;var e=_h();return Bd=function(t,n){return e(t,n,"post")}}function Ah(){if(Nd)return jd;Nd=1;var e=_h();return jd=function(t,n){return e(t,n,"pre")}}function Fh(){if(Sd)return Od;Sd=1;var e=sh(),t=ch(),n=lh();return Od=function(r,u){var i,a=new t,o={},s=new n;function c(e){var t=e.v===i?e.w:e.v,n=s.priority(t);if(void 0!==n){var r=u(e);r<n&&(o[t]=i,s.decrease(t,r))}}if(0===r.nodeCount())return a;e.each(r.nodes(),(function(e){s.add(e,Number.POSITIVE_INFINITY),a.setNode(e)})),s.decrease(r.nodes()[0],0);var d=!1;for(;s.size()>0;){if(i=s.removeMin(),e.has(o,i))a.setEdge(i,o[i]);else{if(d)throw new Error("Input graph is not connected: "+r);d=!0}r.nodeEdges(i).forEach(c)}return a}}zd.exports;try{Md=function(){if(Pd)return Zd;Pd=1;var e=dh();return Zd={Graph:e.Graph,json:fh(),alg:Td?Id:(Td=1,Id={components:hh(),dijkstra:ph(),dijkstraAll:vh(),findCycles:mh(),floydWarshall:gh(),isAcyclic:Eh(),postorder:Ch(),preorder:Ah(),prim:Fh(),tarjan:Dh(),topsort:yh()}),version:e.version}}()}catch(e){}Md||(Md=window.graphlib);var bh,wh,xh,Bh,kh,jh,Nh,Oh,Sh,Ih,Th,Zh,Ph,Mh,zh,Lh,$h,Rh,Uh,Vh,Gh,qh,Hh,Wh,Kh,Yh,Jh,Xh,Qh,el,tl,nl,rl,ul,il,al,ol,sl,cl,dl,fl,hl,ll,pl,vl,Dl,ml,gl,yl,El,_l,Cl,Al,Fl,bl,wl,xl,Bl,kl,jl,Nl,Ol,Sl,Il,Tl,Zl,Pl,Ml,zl,Ll,$l,Rl,Ul,Vl,Gl,ql,Hl,Wl,Kl,Yl,Jl,Xl,Ql,ep,tp,np,rp,up,ip,ap,op,sp,cp,dp=Md;function fp(){if(Bh)return xh;Bh=1;var e=nu(),t=Fi(),n=$u(),r=cu();return xh=function(u,i,a){if(!r(a))return!1;var o=typeof i;return!!("number"==o?t(a)&&n(i,a.length):"string"==o&&i in a)&&e(a[i],u)}}function hp(){if(Zh)return Th;Zh=1;var e=function(){if(Ih)return Sh;Ih=1;var e=/\s/;return Sh=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}}(),t=/^\s+/;return Th=function(n){return n?n.slice(0,e(n)+1).replace(t,""):n}}function lp(){if(Lh)return zh;Lh=1;var e=function(){if(Mh)return Ph;Mh=1;var e=hp(),t=cu(),n=xf(),r=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt;return Ph=function(o){if("number"==typeof o)return o;if(n(o))return NaN;if(t(o)){var s="function"==typeof o.valueOf?o.valueOf():o;o=t(s)?s+"":s}if("string"!=typeof o)return 0===o?o:+o;o=e(o);var c=u.test(o);return c||i.test(o)?a(o.slice(2),c?2:8):r.test(o)?NaN:+o}}(),t=1/0;return zh=function(n){return n?(n=e(n))===t||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}}function pp(){if(Vh)return Uh;Vh=1;var e=th(),t=Lf(),n=function(){if(Rh)return $h;Rh=1;var e=lp();return $h=function(t){var n=e(t),r=n%1;return n==n?r?n-r:n:0}}(),r=Math.max;return Uh=function(u,i,a){var o=null==u?0:u.length;if(!o)return-1;var s=null==a?0:n(a);return s<0&&(s=r(o+s,0)),e(u,t(i,3),s)}}function vp(){if(Wh)return Hh;Wh=1;var e=Jf();return Hh=function(t){return(null==t?0:t.length)?e(t,1):[]}}function Dp(){if(nl)return tl;nl=1;var e=xf();return tl=function(t,n,r){for(var u=-1,i=t.length;++u<i;){var a=t[u],o=n(a);if(null!=o&&(void 0===s?o==o&&!e(o):r(o,s)))var s=o,c=a}return c}}function mp(){if(sl)return ol;sl=1;var e=Cu(),t=nu();return ol=function(n,r,u){(void 0!==u&&!t(n[r],u)||void 0===u&&!(r in n))&&e(n,r,u)},ol}function gp(){if(hl)return fl;return hl=1,fl=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},fl}function yp(){if(Dl)return vl;Dl=1;var e=mp(),t=Ld(),n=ef(),r=$d(),u=rf(),i=wu(),a=xu(),o=ih(),s=Lu(),c=du(),d=cu(),f=function(){if(dl)return cl;dl=1;var e=su(),t=qd(),n=bu(),r=Function.prototype,u=Object.prototype,i=r.toString,a=u.hasOwnProperty,o=i.call(Object);return cl=function(r){if(!n(r)||"[object Object]"!=e(r))return!1;var u=t(r);if(null===u)return!0;var s=a.call(u,"constructor")&&u.constructor;return"function"==typeof s&&s instanceof s&&i.call(s)==o}}(),h=yi(),l=gp(),p=function(){if(pl)return ll;pl=1;var e=Fu(),t=xi();return ll=function(n){return e(n,t(n))}}();return vl=function(v,D,m,g,y,E,_){var C=l(v,m),A=l(D,m),F=_.get(A);if(F)e(v,m,F);else{var b=E?E(C,A,m+"",v,D,_):void 0,w=void 0===b;if(w){var x=a(A),B=!x&&s(A),k=!x&&!B&&h(A);b=A,x||B||k?a(C)?b=C:o(C)?b=r(C):B?(w=!1,b=t(A,!0)):k?(w=!1,b=n(A,!0)):b=[]:f(A)||i(A)?(b=C,i(C)?b=p(C):d(C)&&!c(C)||(b=u(A))):w=!1}w&&(_.set(A,b),y(b,A,g,E,_),_.delete(A)),e(v,m,b)}},vl}function Ep(){if(Fl)return Al;return Fl=1,Al=function(e,t){return e<t}}function _p(){if(Il)return Sl;Il=1;var e=If(),t=function(){if(Ol)return Nl;Ol=1;var e=Au(),t=Of(),n=$u(),r=cu(),u=Sf();return Nl=function(i,a,o,s){if(!r(i))return i;for(var c=-1,d=(a=t(a,i)).length,f=d-1,h=i;null!=h&&++c<d;){var l=u(a[c]),p=o;if("__proto__"===l||"constructor"===l||"prototype"===l)return i;if(c!=f){var v=h[l];void 0===(p=s?s(v,l,h):void 0)&&(p=r(v)?v:n(a[c+1])?[]:{})}e(h,l,p),h=h[l]}return i},Nl}(),n=Of();return Sl=function(r,u,i){for(var a=-1,o=u.length,s={};++a<o;){var c=u[a],d=e(r,c);i(d,c)&&t(s,n(c,r),d)}return s}}function Cp(){if(Vl)return Ul;Vl=1;var e=function(){if(Rl)return $l;Rl=1;var e=Math.ceil,t=Math.max;return $l=function(n,r,u,i){for(var a=-1,o=t(e((r-n)/(u||1)),0),s=Array(o);o--;)s[i?o:++a]=n,n+=u;return s}}(),t=fp(),n=lp();return Ul=function(r){return function(u,i,a){return a&&"number"!=typeof a&&t(u,i,a)&&(i=a=void 0),u=n(u),void 0===i?(i=u,u=0):i=n(i),a=void 0===a?u<i?1:-1:n(a),e(u,i,a,r)}}}function Ap(){if(Xl)return Jl;Xl=1;var e=function(){if(Yl)return Kl;Yl=1;var e=xf();return Kl=function(t,n){if(t!==n){var r=void 0!==t,u=null===t,i=t==t,a=e(t),o=void 0!==n,s=null===n,c=n==n,d=e(n);if(!s&&!d&&!a&&t>n||a&&o&&c&&!s&&!d||u&&o&&c||!r&&c||!i)return 1;if(!u&&!a&&!d&&t<n||d&&r&&i&&!u&&!a||s&&r&&i||!o&&i||!c)return-1}return 0}}();return Jl=function(t,n,r){for(var u=-1,i=t.criteria,a=n.criteria,o=i.length,s=r.length;++u<o;){var c=e(i[u],a[u]);if(c)return u>=s?c:c*("desc"==r[u]?-1:1)}return t.index-n.index}}function Fp(){if(ep)return Ql;ep=1;var e=jf(),t=If(),n=Lf(),r=Gf(),u=Wl?Hl:(Wl=1,Hl=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}),i=Uu(),a=Ap(),o=lf(),s=xu();return Ql=function(c,d,f){d=d.length?e(d,(function(e){return s(e)?function(n){return t(n,1===e.length?e[0]:e)}:e})):[o];var h=-1;d=e(d,i(n));var l=r(c,(function(t,n,r){return{criteria:e(d,(function(e){return e(t)})),index:++h,value:t}}));return u(l,(function(e,t){return a(e,t,f)}))}}try{cp={cloneDeep:function(){if(wh)return bh;wh=1;var e=of();return bh=function(t){return e(t,5)}}(),constant:cf(),defaults:function(){if(jh)return kh;jh=1;var e=eh(),t=nu(),n=fp(),r=xi(),u=Object.prototype,i=u.hasOwnProperty,a=e((function(e,a){e=Object(e);var o=-1,s=a.length,c=s>2?a[2]:void 0;for(c&&n(a[0],a[1],c)&&(s=1);++o<s;)for(var d=a[o],f=r(d),h=-1,l=f.length;++h<l;){var p=f[h],v=e[p];(void 0===v||t(v,u[p])&&!i.call(e,p))&&(e[p]=d[p])}return e}));return kh=a}(),each:Df(),filter:$f(),find:function(){if(qh)return Gh;qh=1;var e=function(){if(Oh)return Nh;Oh=1;var e=Lf(),t=Fi(),n=bi();return Nh=function(r){return function(u,i,a){var o=Object(u);if(!t(u)){var s=e(i,3);u=n(u),i=function(e){return s(o[e],e,o)}}var c=r(u,i,a);return c>-1?o[s?u[c]:c]:void 0}},Nh}(),t=e(pp());return Gh=t}(),flatten:vp(),forEach:vf(),forIn:function(){if(Yh)return Kh;Yh=1;var e=df(),t=pf(),n=xi();return Kh=function(r,u){return null==r?r:e(r,t(u),n)}}(),has:Rf(),isUndefined:Vf(),last:Xh?Jh:(Xh=1,Jh=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}),map:qf(),mapValues:function(){if(el)return Qh;el=1;var e=Cu(),t=ff(),n=Lf();return Qh=function(r,u){var i={};return u=n(u,3),t(r,(function(t,n,r){e(i,n,u(t,n,r))})),i},Qh}(),max:function(){if(al)return il;al=1;var e=Dp(),t=ul?rl:(ul=1,rl=function(e,t){return e>t}),n=lf();return il=function(r){return r&&r.length?e(r,n,t):void 0}}(),merge:function(){if(Cl)return _l;Cl=1;var e=function(){if(gl)return ml;gl=1;var e=yu(),t=mp(),n=df(),r=yp(),u=cu(),i=xi(),a=gp();return ml=function o(s,c,d,f,h){s!==c&&n(c,(function(n,i){if(h||(h=new e),u(n))r(s,c,i,d,o,f,h);else{var l=f?f(a(s,i),n,i+"",s,c,h):void 0;void 0===l&&(l=n),t(s,i,l)}}),i)},ml}(),t=function(){if(El)return yl;El=1;var e=eh(),t=fp();return yl=function(n){return e((function(e,r){var u=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=n.length>3&&"function"==typeof a?(i--,a):void 0,o&&t(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++u<i;){var s=r[u];s&&n(e,s,u,a)}return e}))},yl}(),n=t((function(t,n,r){e(t,n,r)}));return _l=n}(),min:function(){if(wl)return bl;wl=1;var e=Dp(),t=Ep(),n=lf();return bl=function(r){return r&&r.length?e(r,n,t):void 0}}(),minBy:function(){if(Bl)return xl;Bl=1;var e=Dp(),t=Lf(),n=Ep();return xl=function(r,u){return r&&r.length?e(r,t(u,2),n):void 0}}(),now:function(){if(jl)return kl;jl=1;var e=au();return kl=function(){return e.Date.now()}}(),pick:function(){if(Ll)return zl;Ll=1;var e=function(){if(Zl)return Tl;Zl=1;var e=_p(),t=Zf();return Tl=function(n,r){return e(n,r,(function(e,r){return t(n,r)}))}}(),t=function(){if(Ml)return Pl;Ml=1;var e=vp(),t=Xf(),n=Qf();return Pl=function(r){return n(t(r,void 0,e),r+"")}}()((function(t,n){return null==t?{}:e(t,n)}));return zl=t}(),range:function(){if(ql)return Gl;ql=1;var e=Cp()();return Gl=e}(),reduce:Hf(),sortBy:function(){if(np)return tp;np=1;var e=Jf(),t=Fp(),n=eh(),r=fp(),u=n((function(n,u){if(null==n)return[];var i=u.length;return i>1&&r(n,u[0],u[1])?u=[]:i>2&&r(u[0],u[1],u[2])&&(u=[u[0]]),t(n,e(u,1),[])}));return tp=u}(),uniqueId:function(){if(up)return rp;up=1;var e=Nf(),t=0;return rp=function(n){var r=++t;return e(n)+r}}(),values:oh(),zipObject:function(){if(sp)return op;sp=1;var e=Au(),t=ap?ip:(ap=1,ip=function(e,t,n){for(var r=-1,u=e.length,i=t.length,a={};++r<u;){var o=r<i?t[r]:void 0;n(a,e[r],o)}return a});return op=function(n,r){return t(n||[],r||[],e)}}()}}catch(e){}cp||(cp=window._);var bp=cp,wp=xp;function xp(){var e={};e._next=e._prev=e,this._sentinel=e}function Bp(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function kp(e,t){if("_next"!==e&&"_prev"!==e)return t}xp.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Bp(t),t},xp.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Bp(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},xp.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,kp)),n=n._prev;return"["+e.join(", ")+"]"};var jp=bp,Np=dp.Graph,Op=wp,Sp=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new Np,r=0,u=0;jp.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),jp.forEach(e.edges(),(function(e){var i=n.edge(e.v,e.w)||0,a=t(e),o=i+a;n.setEdge(e.v,e.w,o),u=Math.max(u,n.node(e.v).out+=a),r=Math.max(r,n.node(e.w).in+=a)}));var i=jp.range(u+r+3).map((function(){return new Op})),a=r+1;return jp.forEach(n.nodes(),(function(e){Zp(i,a,n.node(e))})),{graph:n,buckets:i,zeroIdx:a}}(e,t||Ip),r=function(e,t,n){var r,u=[],i=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;r=a.dequeue();)Tp(e,t,n,r);for(;r=i.dequeue();)Tp(e,t,n,r);if(e.nodeCount())for(var o=t.length-2;o>0;--o)if(r=t[o].dequeue()){u=u.concat(Tp(e,t,n,r,!0));break}}return u}(n.graph,n.buckets,n.zeroIdx);return jp.flatten(jp.map(r,(function(t){return e.outEdges(t.v,t.w)})),!0)},Ip=jp.constant(1);function Tp(e,t,n,r,u){var i=u?[]:void 0;return jp.forEach(e.inEdges(r.v),(function(r){var a=e.edge(r),o=e.node(r.v);u&&i.push({v:r.v,w:r.w}),o.out-=a,Zp(t,n,o)})),jp.forEach(e.outEdges(r.v),(function(r){var u=e.edge(r),i=r.w,a=e.node(i);a.in-=u,Zp(t,n,a)})),e.removeNode(r.v),i}function Zp(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Pp=bp,Mp=Sp,zp={run:function(e){var t="greedy"===e.graph().acyclicer?Mp(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},r={};function u(i){Pp.has(r,i)||(r[i]=!0,n[i]=!0,Pp.forEach(e.outEdges(i),(function(e){Pp.has(n,e.w)?t.push(e):u(e.w)})),delete n[i])}return Pp.forEach(e.nodes(),u),t}(e);Pp.forEach(t,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,Pp.uniqueId("rev"))}))},undo:function(e){Pp.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}};var Lp=bp,$p=dp.Graph,Rp={addDummyNode:Up,simplify:function(e){var t=(new $p).setGraph(e.graph());return Lp.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),Lp.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},u=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+u.weight,minlen:Math.max(r.minlen,u.minlen)})})),t},asNonCompoundGraph:function(e){var t=new $p({multigraph:e.isMultigraph()}).setGraph(e.graph());return Lp.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),Lp.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=Lp.map(e.nodes(),(function(t){var n={};return Lp.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return Lp.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=Lp.map(e.nodes(),(function(t){var n={};return Lp.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return Lp.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,u=e.x,i=e.y,a=t.x-u,o=t.y-i,s=e.width/2,c=e.height/2;if(!a&&!o)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(o)*s>Math.abs(a)*c?(o<0&&(c=-c),n=c*a/o,r=c):(a<0&&(s=-s),n=s,r=s*o/a);return{x:u+n,y:i+r}},buildLayerMatrix:function(e){var t=Lp.map(Lp.range(Vp(e)+1),(function(){return[]}));return Lp.forEach(e.nodes(),(function(n){var r=e.node(n),u=r.rank;Lp.isUndefined(u)||(t[u][r.order]=n)})),t},normalizeRanks:function(e){var t=Lp.min(Lp.map(e.nodes(),(function(t){return e.node(t).rank})));Lp.forEach(e.nodes(),(function(n){var r=e.node(n);Lp.has(r,"rank")&&(r.rank-=t)}))},removeEmptyRanks:function(e){var t=Lp.min(Lp.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];Lp.forEach(e.nodes(),(function(r){var u=e.node(r).rank-t;n[u]||(n[u]=[]),n[u].push(r)}));var r=0,u=e.graph().nodeRankFactor;Lp.forEach(n,(function(t,n){Lp.isUndefined(t)&&n%u!=0?--r:r&&Lp.forEach(t,(function(t){e.node(t).rank+=r}))}))},addBorderNode:function(e,t,n,r){var u={width:0,height:0};arguments.length>=4&&(u.rank=n,u.order=r);return Up(e,"border",u,t)},maxRank:Vp,partition:function(e,t){var n={lhs:[],rhs:[]};return Lp.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){var n=Lp.now();try{return t()}finally{console.log(e+" time: "+(Lp.now()-n)+"ms")}},notime:function(e,t){return t()}};function Up(e,t,n,r){var u;do{u=Lp.uniqueId(r)}while(e.hasNode(u));return n.dummy=t,e.setNode(u,n),u}function Vp(e){return Lp.max(Lp.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!Lp.isUndefined(n))return n})))}var Gp=bp,qp=Rp,Hp={run:function(e){e.graph().dummyChains=[],Gp.forEach(e.edges(),(function(t){!function(e,t){var n,r,u,i=t.v,a=e.node(i).rank,o=t.w,s=e.node(o).rank,c=t.name,d=e.edge(t),f=d.labelRank;if(s===a+1)return;for(e.removeEdge(t),u=0,++a;a<s;++u,++a)d.points=[],r={width:0,height:0,edgeLabel:d,edgeObj:t,rank:a},n=qp.addDummyNode(e,"edge",r,"_d"),a===f&&(r.width=d.width,r.height=d.height,r.dummy="edge-label",r.labelpos=d.labelpos),e.setEdge(i,n,{weight:d.weight},c),0===u&&e.graph().dummyChains.push(n),i=n;e.setEdge(i,o,{weight:d.weight},c)}(e,t)}))},undo:function(e){Gp.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),u=r.edgeLabel;for(e.setEdge(r.edgeObj,u);r.dummy;)n=e.successors(t)[0],e.removeNode(t),u.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(u.x=r.x,u.y=r.y,u.width=r.width,u.height=r.height),t=n,r=e.node(t)}))}};var Wp=bp,Kp={longestPath:function(e){var t={};Wp.forEach(e.sources(),(function n(r){var u=e.node(r);if(Wp.has(t,r))return u.rank;t[r]=!0;var i=Wp.min(Wp.map(e.outEdges(r),(function(t){return n(t.w)-e.edge(t).minlen})));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),u.rank=i}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}};var Yp=bp,Jp=dp.Graph,Xp=Kp.slack,Qp=function(e){var t,n,r=new Jp({directed:!1}),u=e.nodes()[0],i=e.nodeCount();r.setNode(u,{});for(;ev(r,e)<i;)t=tv(r,e),n=r.hasNode(t.v)?Xp(e,t):-Xp(e,t),nv(r,e,n);return r};function ev(e,t){return Yp.forEach(e.nodes(),(function n(r){Yp.forEach(t.nodeEdges(r),(function(u){var i=u.v,a=r===i?u.w:i;e.hasNode(a)||Xp(t,u)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))}))})),e.nodeCount()}function tv(e,t){return Yp.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Xp(t,n)}))}function nv(e,t,n){Yp.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}var rv=bp,uv=Qp,iv=Kp.slack,av=Kp.longestPath,ov=dp.alg.preorder,sv=dp.alg.postorder,cv=Rp.simplify,dv=fv;function fv(e){e=cv(e),av(e);var t,n=uv(e);for(pv(n),hv(n,e);t=Dv(n);)gv(n,e,t,mv(n,e,t))}function hv(e,t){var n=sv(e,e.nodes());n=n.slice(0,n.length-1),rv.forEach(n,(function(n){!function(e,t,n){var r=e.node(n),u=r.parent;e.edge(n,u).cutvalue=lv(e,t,n)}(e,t,n)}))}function lv(e,t,n){var r=e.node(n).parent,u=!0,i=t.edge(n,r),a=0;return i||(u=!1,i=t.edge(r,n)),a=i.weight,rv.forEach(t.nodeEdges(n),(function(i){var o,s,c=i.v===n,d=c?i.w:i.v;if(d!==r){var f=c===u,h=t.edge(i).weight;if(a+=f?h:-h,o=n,s=d,e.hasEdge(o,s)){var l=e.edge(n,d).cutvalue;a+=f?-l:l}}})),a}function pv(e,t){arguments.length<2&&(t=e.nodes()[0]),vv(e,{},1,t)}function vv(e,t,n,r,u){var i=n,a=e.node(r);return t[r]=!0,rv.forEach(e.neighbors(r),(function(u){rv.has(t,u)||(n=vv(e,t,n,u,r))})),a.low=i,a.lim=n++,u?a.parent=u:delete a.parent,n}function Dv(e){return rv.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function mv(e,t,n){var r=n.v,u=n.w;t.hasEdge(r,u)||(r=n.w,u=n.v);var i=e.node(r),a=e.node(u),o=i,s=!1;i.lim>a.lim&&(o=a,s=!0);var c=rv.filter(t.edges(),(function(t){return s===yv(e,e.node(t.v),o)&&s!==yv(e,e.node(t.w),o)}));return rv.minBy(c,(function(e){return iv(t,e)}))}function gv(e,t,n,r){var u=n.v,i=n.w;e.removeEdge(u,i),e.setEdge(r.v,r.w,{}),pv(e),hv(e,t),function(e,t){var n=rv.find(e.nodes(),(function(e){return!t.node(e).parent})),r=ov(e,n);r=r.slice(1),rv.forEach(r,(function(n){var r=e.node(n).parent,u=t.edge(n,r),i=!1;u||(u=t.edge(r,n),i=!0),t.node(n).rank=t.node(r).rank+(i?u.minlen:-u.minlen)}))}(e,t)}function yv(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}fv.initLowLimValues=pv,fv.initCutValues=hv,fv.calcCutValue=lv,fv.leaveEdge=Dv,fv.enterEdge=mv,fv.exchangeEdges=gv;var Ev=Kp.longestPath,_v=Qp,Cv=dv,Av=function(e){switch(e.graph().ranker){case"network-simplex":default:bv(e);break;case"tight-tree":!function(e){Ev(e),_v(e)}(e);break;case"longest-path":Fv(e)}};var Fv=Ev;function bv(e){Cv(e)}var wv=bp,xv=function(e){var t=function(e){var t={},n=0;function r(u){var i=n;wv.forEach(e.children(u),r),t[u]={low:i,lim:n++}}return wv.forEach(e.children(),r),t}(e);wv.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),u=r.edgeObj,i=function(e,t,n,r){var u,i,a=[],o=[],s=Math.min(t[n].low,t[r].low),c=Math.max(t[n].lim,t[r].lim);u=n;do{u=e.parent(u),a.push(u)}while(u&&(t[u].low>s||c>t[u].lim));i=u,u=r;for(;(u=e.parent(u))!==i;)o.push(u);return{path:a.concat(o.reverse()),lca:i}}(e,t,u.v,u.w),a=i.path,o=i.lca,s=0,c=a[s],d=!0;n!==u.w;){if(r=e.node(n),d){for(;(c=a[s])!==o&&e.node(c).maxRank<r.rank;)s++;c===o&&(d=!1)}if(!d){for(;s<a.length-1&&e.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}e.setParent(n,c),n=e.successors(n)[0]}}))};var Bv=bp,kv=Rp,jv={run:function(e){var t=kv.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};function n(r,u){var i=e.children(r);i&&i.length&&Bv.forEach(i,(function(e){n(e,u+1)})),t[r]=u}return Bv.forEach(e.children(),(function(e){n(e,1)})),t}(e),r=Bv.max(Bv.values(n))-1,u=2*r+1;e.graph().nestingRoot=t,Bv.forEach(e.edges(),(function(t){e.edge(t).minlen*=u}));var i=function(e){return Bv.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}(e)+1;Bv.forEach(e.children(),(function(a){Nv(e,t,u,i,r,n,a)})),e.graph().nodeRankFactor=u},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Bv.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}};function Nv(e,t,n,r,u,i,a){var o=e.children(a);if(o.length){var s=kv.addBorderNode(e,"_bt"),c=kv.addBorderNode(e,"_bb"),d=e.node(a);e.setParent(s,a),d.borderTop=s,e.setParent(c,a),d.borderBottom=c,Bv.forEach(o,(function(o){Nv(e,t,n,r,u,i,o);var d=e.node(o),f=d.borderTop?d.borderTop:o,h=d.borderBottom?d.borderBottom:o,l=d.borderTop?r:2*r,p=f!==h?1:u-i[a]+1;e.setEdge(s,f,{weight:l,minlen:p,nestingEdge:!0}),e.setEdge(h,c,{weight:l,minlen:p,nestingEdge:!0})})),e.parent(a)||e.setEdge(t,s,{weight:0,minlen:u+i[a]})}else a!==t&&e.setEdge(t,a,{weight:0,minlen:n})}var Ov=bp,Sv=Rp,Iv=function(e){Ov.forEach(e.children(),(function t(n){var r=e.children(n),u=e.node(n);if(r.length&&Ov.forEach(r,t),Ov.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var i=u.minRank,a=u.maxRank+1;i<a;++i)Tv(e,"borderLeft","_bl",n,u,i),Tv(e,"borderRight","_br",n,u,i)}}))};function Tv(e,t,n,r,u,i){var a={width:0,height:0,rank:i,borderType:t},o=u[t][i-1],s=Sv.addDummyNode(e,"border",a,n);u[t][i]=s,e.setParent(s,r),o&&e.setEdge(o,s,{weight:1})}var Zv=bp,Pv={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||Mv(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){Zv.forEach(e.nodes(),(function(t){Lv(e.node(t))})),Zv.forEach(e.edges(),(function(t){var n=e.edge(t);Zv.forEach(n.points,Lv),Zv.has(n,"y")&&Lv(n)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){Zv.forEach(e.nodes(),(function(t){$v(e.node(t))})),Zv.forEach(e.edges(),(function(t){var n=e.edge(t);Zv.forEach(n.points,$v),Zv.has(n,"x")&&$v(n)}))}(e),Mv(e))}};function Mv(e){Zv.forEach(e.nodes(),(function(t){zv(e.node(t))})),Zv.forEach(e.edges(),(function(t){zv(e.edge(t))}))}function zv(e){var t=e.width;e.width=e.height,e.height=t}function Lv(e){e.y=-e.y}function $v(e){var t=e.x;e.x=e.y,e.y=t}var Rv=bp,Uv=function(e){var t={},n=Rv.filter(e.nodes(),(function(t){return!e.children(t).length})),r=Rv.max(Rv.map(n,(function(t){return e.node(t).rank}))),u=Rv.map(Rv.range(r+1),(function(){return[]}));function i(n){if(!Rv.has(t,n)){t[n]=!0;var r=e.node(n);u[r.rank].push(n),Rv.forEach(e.successors(n),i)}}var a=Rv.sortBy(n,(function(t){return e.node(t).rank}));return Rv.forEach(a,i),u};var Vv=bp,Gv=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=qv(e,t[r-1],t[r]);return n};function qv(e,t,n){for(var r=Vv.zipObject(n,Vv.map(n,(function(e,t){return t}))),u=Vv.flatten(Vv.map(t,(function(t){return Vv.sortBy(Vv.map(e.outEdges(t),(function(t){return{pos:r[t.w],weight:e.edge(t).weight}})),"pos")})),!0),i=1;i<n.length;)i<<=1;var a=2*i-1;i-=1;var o=Vv.map(new Array(a),(function(){return 0})),s=0;return Vv.forEach(u.forEach((function(e){var t=e.pos+i;o[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=o[t+1]),o[t=t-1>>1]+=e.weight;s+=e.weight*n}))),s}var Hv=bp;var Wv=bp,Kv=function(e,t){var n={};return Wv.forEach(e,(function(e,t){var r=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};Wv.isUndefined(e.barycenter)||(r.barycenter=e.barycenter,r.weight=e.weight)})),Wv.forEach(t.edges(),(function(e){var t=n[e.v],r=n[e.w];Wv.isUndefined(t)||Wv.isUndefined(r)||(r.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){t.merged||(Wv.isUndefined(t.barycenter)||Wv.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function r(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var u=e.pop();t.push(u),Wv.forEach(u.in.reverse(),n(u)),Wv.forEach(u.out,r(u))}return Wv.map(Wv.filter(t,(function(e){return!e.merged})),(function(e){return Wv.pick(e,["vs","i","barycenter","weight"])}))}(Wv.filter(n,(function(e){return!e.indegree})))};var Yv=bp,Jv=Rp;function Xv(e,t,n){for(var r;t.length&&(r=Yv.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}var Qv=bp,eD=function(e,t){return Hv.map(t,(function(t){var n=e.inEdges(t);if(n.length){var r=Hv.reduce(n,(function(t,n){var r=e.edge(n),u=e.node(n.v);return{sum:t.sum+r.weight*u.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}return{v:t}}))},tD=Kv,nD=function(e,t){var n=Jv.partition(e,(function(e){return Yv.has(e,"barycenter")})),r=n.lhs,u=Yv.sortBy(n.rhs,(function(e){return-e.i})),i=[],a=0,o=0,s=0;r.sort((c=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:c?t.i-e.i:e.i-t.i})),s=Xv(i,u,s),Yv.forEach(r,(function(e){s+=e.vs.length,i.push(e.vs),a+=e.barycenter*e.weight,o+=e.weight,s=Xv(i,u,s)}));var c;var d={vs:Yv.flatten(i,!0)};o&&(d.barycenter=a/o,d.weight=o);return d},rD=function e(t,n,r,u){var i=t.children(n),a=t.node(n),o=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,c={};o&&(i=Qv.filter(i,(function(e){return e!==o&&e!==s})));var d=eD(t,i);Qv.forEach(d,(function(n){if(t.children(n.v).length){var i=e(t,n.v,r,u);c[n.v]=i,Qv.has(i,"barycenter")&&(a=n,o=i,Qv.isUndefined(a.barycenter)?(a.barycenter=o.barycenter,a.weight=o.weight):(a.barycenter=(a.barycenter*a.weight+o.barycenter*o.weight)/(a.weight+o.weight),a.weight+=o.weight))}var a,o}));var f=tD(d,r);!function(e,t){Qv.forEach(e,(function(e){e.vs=Qv.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(f,c);var h=nD(f,u);if(o&&(h.vs=Qv.flatten([o,h.vs,s],!0),t.predecessors(o).length)){var l=t.node(t.predecessors(o)[0]),p=t.node(t.predecessors(s)[0]);Qv.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+l.order+p.order)/(h.weight+2),h.weight+=2}return h};var uD=bp,iD=dp.Graph,aD=function(e,t,n){var r=function(e){var t;for(;e.hasNode(t=uD.uniqueId("_root")););return t}(e),u=new iD({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(t){return e.node(t)}));return uD.forEach(e.nodes(),(function(i){var a=e.node(i),o=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(u.setNode(i),u.setParent(i,o||r),uD.forEach(e[n](i),(function(t){var n=t.v===i?t.w:t.v,r=u.edge(n,i),a=uD.isUndefined(r)?0:r.weight;u.setEdge(n,i,{weight:e.edge(t).weight+a})})),uD.has(a,"minRank")&&u.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))})),u};var oD=bp;var sD=bp,cD=Uv,dD=Gv,fD=rD,hD=aD,lD=function(e,t,n){var r,u={};oD.forEach(n,(function(n){for(var i,a,o=e.parent(n);o;){if((i=e.parent(o))?(a=u[i],u[i]=o):(a=r,r=o),a&&a!==o)return void t.setEdge(a,o);o=i}}))},pD=dp.Graph,vD=Rp,DD=function(e){var t=vD.maxRank(e),n=mD(e,sD.range(1,t+1),"inEdges"),r=mD(e,sD.range(t-1,-1,-1),"outEdges"),u=cD(e);yD(e,u);for(var i,a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;++o,++s){gD(o%2?n:r,o%4>=2),u=vD.buildLayerMatrix(e);var c=dD(e,u);c<a&&(s=0,i=sD.cloneDeep(u),a=c)}yD(e,i)};function mD(e,t,n){return sD.map(t,(function(t){return hD(e,t,n)}))}function gD(e,t){var n=new pD;sD.forEach(e,(function(e){var r=e.graph().root,u=fD(e,r,n,t);sD.forEach(u.vs,(function(t,n){e.node(t).order=n})),lD(e,n,u.vs)}))}function yD(e,t){sD.forEach(t,(function(t){sD.forEach(t,(function(t,n){e.node(t).order=n}))}))}var ED=bp,_D=dp.Graph,CD=Rp,AD=function(e){var t,n=CD.buildLayerMatrix(e),r=ED.merge(FD(e,n),bD(e,n)),u={};ED.forEach(["u","d"],(function(i){t="u"===i?n:ED.values(n).reverse(),ED.forEach(["l","r"],(function(n){"r"===n&&(t=ED.map(t,(function(e){return ED.values(e).reverse()})));var a=("u"===i?e.predecessors:e.successors).bind(e),o=BD(e,t,r,a),s=kD(e,t,o.root,o.align,"r"===n);"r"===n&&(s=ED.mapValues(s,(function(e){return-e}))),u[i+n]=s}))}));var i=jD(e,u);return ND(u,i),OD(u,e.graph().align)};function FD(e,t){var n={};return ED.reduce(t,(function(t,r){var u=0,i=0,a=t.length,o=ED.last(r);return ED.forEach(r,(function(t,s){var c=function(e,t){if(e.node(t).dummy)return ED.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),d=c?e.node(c).order:a;(c||t===o)&&(ED.forEach(r.slice(i,s+1),(function(t){ED.forEach(e.predecessors(t),(function(r){var i=e.node(r),a=i.order;!(a<u||d<a)||i.dummy&&e.node(t).dummy||wD(n,r,t)}))})),i=s+1,u=d)})),r})),n}function bD(e,t){var n={};function r(t,r,u,i,a){var o;ED.forEach(ED.range(r,u),(function(r){o=t[r],e.node(o).dummy&&ED.forEach(e.predecessors(o),(function(t){var r=e.node(t);r.dummy&&(r.order<i||r.order>a)&&wD(n,t,o)}))}))}return ED.reduce(t,(function(t,n){var u,i=-1,a=0;return ED.forEach(n,(function(o,s){if("border"===e.node(o).dummy){var c=e.predecessors(o);c.length&&(u=e.node(c[0]).order,r(n,a,s,i,u),a=s,i=u)}r(n,a,n.length,u,t.length)})),n})),n}function wD(e,t,n){if(t>n){var r=t;t=n,n=r}var u=e[t];u||(e[t]=u={}),u[n]=!0}function xD(e,t,n){if(t>n){var r=t;t=n,n=r}return ED.has(e[t],n)}function BD(e,t,n,r){var u={},i={},a={};return ED.forEach(t,(function(e){ED.forEach(e,(function(e,t){u[e]=e,i[e]=e,a[e]=t}))})),ED.forEach(t,(function(e){var t=-1;ED.forEach(e,(function(e){var o=r(e);if(o.length){o=ED.sortBy(o,(function(e){return a[e]}));for(var s=(o.length-1)/2,c=Math.floor(s),d=Math.ceil(s);c<=d;++c){var f=o[c];i[e]===e&&t<a[f]&&!xD(n,e,f)&&(i[f]=e,i[e]=u[e]=u[f],t=a[f])}}}))})),{root:u,align:i}}function kD(e,t,n,r,u){var i={},a=function(e,t,n,r){var u=new _D,i=e.graph(),a=function(e,t,n){return function(r,u,i){var a,o=r.node(u),s=r.node(i),c=0;if(c+=o.width/2,ED.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":a=-o.width/2;break;case"r":a=o.width/2}if(a&&(c+=n?a:-a),a=0,c+=(o.dummy?t:e)/2,c+=(s.dummy?t:e)/2,c+=s.width/2,ED.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=s.width/2;break;case"r":a=-s.width/2}return a&&(c+=n?a:-a),a=0,c}}(i.nodesep,i.edgesep,r);return ED.forEach(t,(function(t){var r;ED.forEach(t,(function(t){var i=n[t];if(u.setNode(i),r){var o=n[r],s=u.edge(o,i);u.setEdge(o,i,Math.max(a(e,t,r),s||0))}r=t}))})),u}(e,t,n,u),o=u?"borderLeft":"borderRight";function s(e,t){for(var n=a.nodes(),r=n.pop(),u={};r;)u[r]?e(r):(u[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return s((function(e){i[e]=a.inEdges(e).reduce((function(e,t){return Math.max(e,i[t.v]+a.edge(t))}),0)}),a.predecessors.bind(a)),s((function(t){var n=a.outEdges(t).reduce((function(e,t){return Math.min(e,i[t.w]-a.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==o&&(i[t]=Math.max(i[t],n))}),a.successors.bind(a)),ED.forEach(r,(function(e){i[e]=i[n[e]]})),i}function jD(e,t){return ED.minBy(ED.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return ED.forIn(t,(function(t,u){var i=function(e,t){return e.node(t).width}(e,u)/2;n=Math.max(t+i,n),r=Math.min(t-i,r)})),n-r}))}function ND(e,t){var n=ED.values(t),r=ED.min(n),u=ED.max(n);ED.forEach(["u","d"],(function(n){ED.forEach(["l","r"],(function(i){var a,o=n+i,s=e[o];if(s!==t){var c=ED.values(s);(a="l"===i?r-ED.min(c):u-ED.max(c))&&(e[o]=ED.mapValues(s,(function(e){return e+a})))}}))}))}function OD(e,t){return ED.mapValues(e.ul,(function(n,r){if(t)return e[t.toLowerCase()][r];var u=ED.sortBy(ED.map(e,r));return(u[1]+u[2])/2}))}var SD=bp,ID=Rp,TD=AD;var ZD=bp,PD=zp,MD=Hp,zD=Av,LD=Rp.normalizeRanks,$D=xv,RD=Rp.removeEmptyRanks,UD=jv,VD=Iv,GD=Pv,qD=DD,HD=function(e){(function(e){var t=ID.buildLayerMatrix(e),n=e.graph().ranksep,r=0;SD.forEach(t,(function(t){var u=SD.max(SD.map(t,(function(t){return e.node(t).height})));SD.forEach(t,(function(t){e.node(t).y=r+u/2})),r+=u+n}))})(e=ID.asNonCompoundGraph(e)),SD.forEach(TD(e),(function(t,n){e.node(n).x=t}))},WD=Rp,KD=dp.Graph,YD=function(e,t){var n=t&&t.debugTiming?WD.time:WD.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return function(e){var t=new KD({multigraph:!0,compound:!0}),n=am(e.graph());return t.setGraph(ZD.merge({},XD,im(n,JD),ZD.pick(n,QD))),ZD.forEach(e.nodes(),(function(n){var r=am(e.node(n));t.setNode(n,ZD.defaults(im(r,em),tm)),t.setParent(n,e.parent(n))})),ZD.forEach(e.edges(),(function(n){var r=am(e.edge(n));t.setEdge(n,ZD.merge({},rm,im(r,nm),ZD.pick(r,um)))})),t}(e)}));n("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,ZD.forEach(e.edges(),(function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){ZD.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){PD.run(e)})),t("    nestingGraph.run",(function(){UD.run(e)})),t("    rank",(function(){zD(WD.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){ZD.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),u={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};WD.addDummyNode(e,"edge-proxy",u,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){RD(e)})),t("    nestingGraph.cleanup",(function(){UD.cleanup(e)})),t("    normalizeRanks",(function(){LD(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;ZD.forEach(e.nodes(),(function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ZD.max(t,r.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){ZD.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){MD.run(e)})),t("    parentDummyChains",(function(){$D(e)})),t("    addBorderSegments",(function(){VD(e)})),t("    order",(function(){qD(e)})),t("    insertSelfEdges",(function(){!function(e){var t=WD.buildLayerMatrix(e);ZD.forEach(t,(function(t){var n=0;ZD.forEach(t,(function(t,r){var u=e.node(t);u.order=r+n,ZD.forEach(u.selfEdges,(function(t){WD.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:u.rank,order:r+ ++n,e:t.e,label:t.label},"_se")})),delete u.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){GD.adjust(e)})),t("    position",(function(){HD(e)})),t("    positionSelfEdges",(function(){!function(e){ZD.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),u=r.x+r.width/2,i=r.y,a=n.x-u,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:u+2*a/3,y:i-o},{x:u+5*a/6,y:i-o},{x:u+a,y:i},{x:u+5*a/6,y:i+o},{x:u+2*a/3,y:i+o}],n.label.x=n.x,n.label.y=n.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){ZD.forEach(e.nodes(),(function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),u=e.node(n.borderBottom),i=e.node(ZD.last(n.borderLeft)),a=e.node(ZD.last(n.borderRight));n.width=Math.abs(a.x-i.x),n.height=Math.abs(u.y-r.y),n.x=i.x+n.width/2,n.y=r.y+n.height/2}})),ZD.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){MD.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){ZD.forEach(e.edges(),(function(t){var n=e.edge(t);if(ZD.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){GD.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,u=0,i=e.graph(),a=i.marginx||0,o=i.marginy||0;function s(e){var i=e.x,a=e.y,o=e.width,s=e.height;t=Math.min(t,i-o/2),n=Math.max(n,i+o/2),r=Math.min(r,a-s/2),u=Math.max(u,a+s/2)}ZD.forEach(e.nodes(),(function(t){s(e.node(t))})),ZD.forEach(e.edges(),(function(t){var n=e.edge(t);ZD.has(n,"x")&&s(n)})),t-=a,r-=o,ZD.forEach(e.nodes(),(function(n){var u=e.node(n);u.x-=t,u.y-=r})),ZD.forEach(e.edges(),(function(n){var u=e.edge(n);ZD.forEach(u.points,(function(e){e.x-=t,e.y-=r})),ZD.has(u,"x")&&(u.x-=t),ZD.has(u,"y")&&(u.y-=r)})),i.width=n-t+a,i.height=u-r+o}(e)})),t("    assignNodeIntersects",(function(){!function(e){ZD.forEach(e.edges(),(function(t){var n,r,u=e.edge(t),i=e.node(t.v),a=e.node(t.w);u.points?(n=u.points[0],r=u.points[u.points.length-1]):(u.points=[],n=a,r=i),u.points.unshift(WD.intersectRect(i,n)),u.points.push(WD.intersectRect(a,r))}))}(e)})),t("    reversePoints",(function(){!function(e){ZD.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){PD.undo(e)}))}(t,n)})),n("  updateInputGraph",(function(){!function(e,t){ZD.forEach(e.nodes(),(function(n){var r=e.node(n),u=t.node(n);r&&(r.x=u.x,r.y=u.y,t.children(n).length&&(r.width=u.width,r.height=u.height))})),ZD.forEach(e.edges(),(function(n){var r=e.edge(n),u=t.edge(n);r.points=u.points,ZD.has(u,"x")&&(r.x=u.x,r.y=u.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var JD=["nodesep","edgesep","ranksep","marginx","marginy"],XD={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},QD=["acyclicer","ranker","rankdir","align"],em=["width","height"],tm={width:0,height:0},nm=["minlen","weight","width","height","labeloffset"],rm={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},um=["labelpos"];function im(e,t){return ZD.mapValues(ZD.pick(e,t),Number)}function am(e){var t={};return ZD.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}var om=bp,sm=Rp,cm=dp.Graph;var dm={graphlib:dp,layout:YD,debug:{debugOrdering:function(e){var t=sm.buildLayerMatrix(e),n=new cm({compound:!0,multigraph:!0}).setGraph({});return om.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),om.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),om.forEach(t,(function(e,t){var r="layer"+t;n.setNode(r,{rank:"same"}),om.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}},util:{time:Rp.time,notime:Rp.notime},version:"0.8.5"};const fm=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),hm=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),lm=(e,t)=>({x:t*e.x,y:t*e.y}),pm=e=>lm(e,1/(e=>Math.sqrt(e.x*e.x+e.y*e.y))(e)),vm=e=>e.trim().split(/(?=[A-Z])/),Dm=(e,t)=>{let n;return function(...r){clearTimeout(n),n=setTimeout((()=>{e.apply(this,r)}),t)}};class mm{constructor(){this.listeners=new Map}on(e,t){!this.listeners.has(e)&&this.listeners.set(e,new Set),this.listeners.get(e).add(t)}emit(e,...t){this.listeners.has(e)&&this.listeners.get(e).forEach((e=>e(...t)))}}const gm=(e,t)=>{e.x=0,e.y=0,e.width=t.scale,e.height=t.scale},ym=(e,t)=>{e.x=0,e.y=0,e.width=2*t.scale,e.height=t.scale},Em=e=>{e.x=0,e.y=0,e.width=0,e.height=0},_m=(e,t)=>{const n=2*t.padding,r=(e,t)=>{if(e.nodes.size){const u=new dm.graphlib.Graph({multigraph:!0});u.setGraph({nodesep:t.margin,edgesep:t.margin,ranksep:t.margin,acyclicer:e.name&&"greedy",rankdir:"LR",ranker:"network-simplex"}),e.nodes.forEach((e=>e.color&&function(e){switch(e){case"context":return r;case"actor":return Em;case"command":case"event":return gm;default:return ym}}(e.visual)(e,t))),e.nodes.forEach((({name:e,width:t,height:n})=>t&&n&&u.setNode(e,{width:t,height:n}))),e.edges.forEach((({source:e,target:t},n)=>u.setEdge(e.name,t.name,{},n))),dm.layout(u),e.nodes.forEach((e=>{const t=u.node(e.name);t&&(e.x=t.x,e.y=t.y)})),!e.name&&u.edges().forEach((t=>{const n=u.edge(t),r=e.edges.get(t.name);r.path=[r.source,...n.points,r.target].map((e=>({x:Math.floor(e.x),y:Math.floor(e.y)})))}));const{width:i=0,height:a=0}=u.graph();e.width=i+n,e.height=a+n}else e.width=vm(e.name).join(" ").length*t.fontSize+n,e.height=t.fontSize+n};return r(e,t)};function Cm(e){return"number"==typeof e?e.toFixed(0):(e??"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}class Am{constructor(e,t,n,r){this.type=e,this.attrs=t,this.parent=n,this.text=r,this.children=[]}get group(){return this.parent}attr(e,t){return this.attrs[e]=t,this}append(e){return e.parent=this,this.children.push(e),e}serialize(){const e=function(e){return Object.entries(e).filter((([e,t])=>t)).map((([e,t])=>`${e}="${Cm(t)}"`)).join(" ")}({...this.attrs}),t=this.children.map((e=>e.serialize())).join("")||Cm(this.text);return`<${this.type} ${e}>${t}</${this.type}>`}}class Fm{_new(e,t,n){this.current.append(new Am(e,t,this.current,n))}constructor(e){this.root=this.current=new Am("g",{...e,"data-name":"root"})}group(e,t,n){const r=new Am("g",{},this.current);return this.current.append(r),this.current=r,t&&(this.attr("id",e),this.attr("data-name",t)),n&&(n.class&&this.attr("class",n.class),(n.dx||n.dy)&&this.attr("transform",`translate(${n.dx}, ${n.dy})`)),this}ungroup(){this.current.group&&(this.current=this.current.group)}attr(e,t){return this.current.attr(e,t),this}rect(e,t,n,r,u){this._new("rect",{x:e,y:t,height:r,width:n,...u})}path(e,t,n){const r=e.map(((e,t)=>e.x&&e.y?(t?"L":"M")+e.x.toFixed(0)+" "+e.y.toFixed(0):e.dx?"h"+e.dx.toFixed(0):e.dy?"v"+e.dy.toFixed(0):"")).join(" ").concat(t?" Z":"");this._new("path",{...n,d:r})}text(e,t,n,r){this._new("text",{x:t,y:n,...r},e)}serialize(){return this.root.serialize()}}const bm="#aaaaaa",wm="#555555",xm=(e,t,n)=>{let r=((e,t)=>{const n=e.map((e=>e.length)).sort(((e,t)=>t-e)).at(0);return Math.floor(Math.min(Math.max(Math.ceil(t/n),8),24))})(e,t);for(;r>5;){const u=Math.ceil(t/r)-1,i=Math.floor(n/r)-1,a=[];let o=e[0],s=1;for(;s<e.length;){const t=e[s++];o.length+t.length>=u?(a.push(o),o=t):o=o.concat(o.length?" ":"",t)}if(a.push(o),s===e.length&&a.length<=i)return{lines:a,fontSize:r};r--}return{lines:[e.join(" ")],fontSize:r}},Bm=(e,t,n,r,u={fit:!0})=>{const i=u.w||t||0,a=u.h||n||0,{lines:o,fontSize:s}=u.fit?xm(e,i,a):{lines:e,fontSize:u.fontSize||12};r.attr("font-size",s+"pt");const c=u.x||Math.floor(i/2),d=u.y||Math.floor(a/2),f=Math.floor(o.length/2),h=o.length%2?.3:.9;o.forEach(((e,t)=>{r.text(e,c,d,{fill:wm,dy:`${(1.2*(t-f)+h).toFixed(2)}em`})}))},km=(e,t)=>{const n={fill:"none",stroke:e.arrow?e.color:e.target.color};if(e.arrow&&(n["stroke-width"]=3),t.path((e=>{if(e.path){const t=e.path.slice(1,-1),n=pm(fm(t[t.length-2],t.at(-1))),r=t.length-1,u=t.map((e=>({x:e.x,y:e.y})));return u[r]=hm(u[r],lm(n,1.5*(e.arrow?5:0))),u}const t=e.source.x+e.source.width/2,n=e.target.x-e.target.width/2,r=e.source.y,u=e.target.y;if(r===u)return[{x:t,y:r},{dx:n-t}];const i=Math.floor((n-t)/2);return[{x:t,y:r},{dx:i},{dy:Math.floor(u-r)},{dx:i}]})(e),!1,{...n}),e.arrow){const r=e.path[e.path.length-2],u=e.path.slice(1,-1),i=pm(fm(u[u.length-2],u.at(-1))),a=e=>hm(r,lm(i,1.5*e)),o=e=>{return lm({x:(t=i).y,y:-t.x},1.5*e);var t};t.path([hm(a(10),o(4)),a(5),hm(a(10),o(-4)),r],!0,{...n,fill:e.color})}},jm=(e,t,n,r,u,i)=>{i.group("","").attr("fill",e.color),i.rect(t,n,r,u),Bm(vm(e.name),r,u,i,{fit:!0,x:t+r/2,y:n+u/2,w:r,h:u}),i.ungroup()},Nm=(e,t,n,r,u,i)=>{jm(e,t,n,r,u,i);const a=Math.ceil(r/2),o=Math.ceil(u/2);e.refs&&[...e.refs].forEach(((e,r)=>jm(e,t-a+4,n+r*(o+2)-4,a,o,i)))},Om=(e,t,n)=>{if(e.refs&&"actor"!==e.visual){const r=Math.floor(e.x-e.width/2-.2*n.scale),u=Math.floor(e.y+.4*e.height),i=Math.floor(n.scale),a=Math.floor(n.scale/2);e.refs?.size>1?"command"===e.visual?((e,t,n,r,u,i)=>{const a=[...e.refs],o=Math.floor(u/a.length);a.forEach(((e,u)=>Nm(e,t,n+u*(o+2),r,o,i)))})(e,r,u,i,a,t):((e,t,n,r,u,i)=>{const a=e.map((e=>`- ${vm(e.name).join(" ")}`));i.group("","").attr("fill",e[0].color).attr("text-align","left").attr("text-anchor","start"),i.rect(t,n,r,u),Bm(a,r,u,i,{fit:!0,x:t+4,y:n+u/2,w:r,h:u}),i.ungroup()})([...e.refs],r,u,i,a,t):Nm([...e.refs][0],r,u,i,a,t)}},Sm=(e,t,n)=>{if("nodes"in e){if(e.name){const r=vm(e.name);t.text(r.join(" "),0,0,{fill:bm,stroke:bm,dy:-n.fontSize}),t.rect(0,0,e.width,e.height,{rx:25,ry:25})}t.group(`n${e.index}`,"",{dx:n.padding,dy:n.padding}),e.name&&t.attr("text-align","center").attr("text-anchor","middle").attr("stroke",wm),e.edges.forEach((n=>n.color&&km({...n,source:e.nodes.get(n.source.name)},t))),e.nodes.forEach((e=>e.color&&Tm(e,t,n))),e.nodes.forEach((e=>e.refs&&Om(e,t,n))),t.ungroup()}},Im=(e,t)=>{t.attr("fill",e.color),t.rect(0,0,e.width,e.height),e.rels&&t.attr("class",e.visual.concat(" ",[...e.rels].map((e=>`n${e}`)).join(" "))),Bm(vm(e.name),e.width,e.height,t);const n=e.ctx.schemas.get(e.name);n&&t.text(`{${n.size}}`,e.width-6,6,{"font-size":"6pt",fill:wm})},Tm=(e,t,n)=>{const r=Math.floor(e.x-e.width/2),u=Math.floor(e.y-e.height/2),i="context"===e.visual?Sm:"actor"!==e.visual?Im:void 0;i&&(t.group(`n${e.index}`,e.name,{class:e.visual,dx:r,dy:u}),i(e,t,n),t.ungroup())},Zm=/^[A-Z][A-Za-z0-9]+$/,Pm=/^([A-Z][A-Za-z0-9]+)(\.[A-Z][A-Za-z0-9]*){0,1}$/,Mm=Lt.array(Lt.string().regex(Pm,{message:"Invalid reference name. Use [Context.]Identifier in Pascal case!"})).optional().describe("A list of references to internal or external artifacts or messages"),zm=Lt.record(Lt.string().regex(/^[a-z][A-Za-z0-9]+$/,{message:"Invalid field name. Use camel case!"}),Lt.enum(Rt).or(Lt.string().regex(Zm,{message:"Invalid schema name. Use Pascal case!"}))).describe("A map of field names and types (scalar or other schemas)"),Lm=Lt.object({description:Lt.string().optional(),base:Lt.string().regex(Zm,{message:"Invalid schema name. Use Pascal case!"}).optional(),requires:zm.optional(),optional:zm.optional()}).strict().describe("A message or state schema"),$m=Lt.object({type:Lt.literal("event"),description:Lt.string().optional(),schema:Lm.optional()}).strict().describe("An event"),Rm=Lt.object({type:Lt.literal("command"),description:Lt.string().optional(),schema:Lm.optional(),actors:Lt.record(Lt.string().regex(Zm,{message:"Invalid actor name. Use Pascal case!"}),Lt.array(Lt.string().regex(Pm,{message:"Invalid projector name. Use [Context.]Projector in Pascal case!"}))).optional()}).strict().describe("A command, with actors that can read projections"),Um=Lt.object({type:Lt.literal("system"),description:Lt.string().optional(),handles:Mm,emits:Mm}).strict().describe("System artifact, can handle commands and emit events"),Vm=Lt.object({type:Lt.literal("aggregate"),description:Lt.string().optional(),handles:Mm,emits:Mm,schema:Lm.optional()}).strict().describe("Aggregate artifact, can handle commands and emit events, with a state"),Gm=Lt.object({type:Lt.literal("policy"),description:Lt.string().optional(),handles:Mm,invokes:Mm,useRefs:Lt.boolean().optional().describe("Render near commands, with no edges")}).strict().describe("Policy artifact, can handle (react to) events, and invoke commands"),qm=Lt.object({type:Lt.literal("process"),description:Lt.string().optional(),handles:Mm,invokes:Mm,schema:Lm.optional(),useRefs:Lt.boolean().optional().describe("Render near commands, with no edges")}).strict().describe("Process manager artifact, can handle (react to) events, and invoke commands, with a state"),Hm=Lt.object({type:Lt.literal("projector"),description:Lt.string().optional(),handles:Mm,schema:Lm.optional()}).strict().describe("Projector artifact, can handle (project) events into a state (projection)"),Wm=Lt.object({type:Lt.literal("schema"),description:Lt.string().optional(),base:Lt.string().regex(Zm,{message:"Invalid schema name. Use Pascal case!"}).optional(),requires:zm.optional(),optional:zm.optional()}).strict().describe("Object schemas can be used as base types or value objects"),Km=Lt.union([Rm,$m,Um,Vm,Gm,qm,Hm,Wm]),Ym=Lt.record(Lt.string().regex(Zm,{message:"Invalid context name. Use Pascal case!"}),Lt.record(Lt.string().regex(Zm,{message:"Invalid artifact name. Use Pascal case!"}),Km)).describe("The model is a map of bounded contexts with internal artifacts");class Jm extends Error{constructor(e,t){super(e),this.message=e,this.source=t}}const Xm={monospace:"Monospace",inconsolata:"Inconsolata",caveat:"Caveat",handlee:"Handlee"},Qm="inconsolata",eg=(e,t,n=Qm)=>{const r={scale:t,stroke:"#dedede",fill:"white",font:Xm[n.toLowerCase()]||Xm[Qm],fontSize:12,padding:30,margin:40};try{const t=Ym.parse(Z.parse(e)),n=Qt(t);_m(n,r);const u=((e,t)=>{const n=new Fm({fill:t.fill,"font-family":t.font,"font-size":t.fontSize+"pt","text-align":"left",stroke:t.stroke,"stroke-width":1});return Sm(e,n,t),n.serialize()})(n,r),i=[...n.nodes.values()].flatMap((e=>[...e.nodes.values()]));return{svg:u,width:n.width,height:n.height,nodes:i.map((({index:e,name:t,visual:n,ctx:r,x:u,y:i,width:a,height:o,description:s})=>{const c=r.schemas.get(t);return{index:e,name:t,visual:n,ctx:r.name,x:u,y:i,width:a,height:o,fields:c?[...c.values()]:[],description:s??c?.description}}))}}catch(e){if("lineNumber"in e&&"columnNumber"in e)return{error:new Jm(e.message,{from:{line:e.lineNumber-1,col:0},to:{line:e.lineNumber-1,col:e.columnNumber}})};if(e instanceof L)return{error:Error(e.issues.map((e=>`${e.path.join(".")}: ${e.message}`)).join("\n"))};if(e instanceof Error){const t=e.stack.split("\n").slice(0,2).join(" ");return{error:Error(t)}}return{error:Error(e)}}};e.Canvas=class extends mm{constructor(e,t,n){super(),this.document=e,this.container=t,this.SCALE=80,this.WIDTH=100*this.SCALE,this.HEIGHT=100*this.SCALE,this.dragging=!1,this.dx=0,this.dy=0,this.zoom=1,this.x=0,this.y=0,this.w=0,this.h=0,this.details=this.document.getElementById("details"),n&&(this.SCALE=n.SCALE,this.WIDTH=n.WIDTH,this.HEIGHT=n.HEIGHT,this.coordsSpan=n.coordsSpan,this.zoomBtn=n.zoomBtn,this.zoomInBtn=n.zoomInBtn,this.zoomOutBtn=n.zoomOutBtn),this.svg=this.document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.svg.setAttribute("viewBox",`0 0 ${this.WIDTH} ${this.HEIGHT}`),this.svg.setAttribute("width",`${this.WIDTH}`),this.svg.setAttribute("height",`${this.HEIGHT}`),this.container.appendChild(this.svg),this.container.addEventListener("wheel",(e=>{e.preventDefault(),e.metaKey||e.ctrlKey?(this.fitZoom(this.zoom+-.01*e.deltaY),this.transform()):this.transform(e.deltaX,e.deltaY)}));const r=({clientX:e,clientY:t})=>{this.dragging=!0,this.dx=e,this.dy=t,this.container.style.cursor="grabbing"},u=()=>{this.dragging=!1,this.container.style.cursor="default"},i=({clientX:e,clientY:t})=>{this.dragging&&(this.transform(this.dx-e,this.dy-t),this.dx=e,this.dy=t)};this.container.addEventListener("mousedown",r),this.container.addEventListener("mouseup",u),this.container.addEventListener("mousemove",i),this.container.addEventListener("touchstart",(e=>r(e.touches[0]))),this.container.addEventListener("touchend",u),this.container.addEventListener("touchmove",(e=>i(e.touches[0]))),this.zoomBtn&&(this.zoomBtn.onclick=()=>this.fitToContainer.apply(this)),this.zoomInBtn&&(this.zoomInBtn.onclick=()=>this.zoomTo.apply(this,[.1])),this.zoomOutBtn&&(this.zoomOutBtn.onclick=()=>this.zoomTo.apply(this,[-.1]))}fitToContainer(){const e=Math.min(this.container.clientWidth,window.innerWidth),t=Math.min(this.container.clientHeight,window.innerHeight);this.w&&this.h&&e&&t&&(this.fitZoom(Math.min(e/this.w,t/this.h)),this.x=Math.floor((e-this.w*this.zoom)/2),this.y=Math.floor((t-this.h*this.zoom)/2),this.transform())}zoomTo(e){this.fitZoom(this.zoom+e),this.transform()}fitZoom(e){this.zoom=Math.round(100*Math.min(Math.max(.1,e),3))/100}transform(e=0,t=0){const n=this.svg.children[0];n&&(this.x=Math.floor(Math.min(Math.max(this.x-e,0-this.w*this.zoom),this.WIDTH)),this.y=Math.floor(Math.min(Math.max(this.y-t,0-this.h*this.zoom),this.HEIGHT)),this.coordsSpan&&(this.coordsSpan.innerText=`x:${this.x} y:${this.y} w:${this.w} h:${this.h}`),this.zoomBtn&&(this.zoomBtn.innerText=`${Math.floor(100*this.zoom)}%`),n.setAttribute("transform",`translate(${this.x}, ${this.y}) scale(${this.zoom})`),this.emit("transformed",{x:this.x,y:this.y,zoom:this.zoom}))}addNodes(e){const t=Object.fromEntries(e.filter((e=>["aggregate","system","policy","process","projector"].includes(e.visual))).map((({index:e,visual:t})=>[`n${e}`,t]))),n=Dm((e=>{if(e){const t=document.querySelectorAll(`g:not(.${e}):not(.context)`);for(let n of t)n.id!==e&&n.classList.add("faded")}}),500),r=e=>{const r=e.target;t[r.id]&&n(r.id);const u=this.document.getElementById("node-"+r.id);this.details&&u&&(this.details.innerHTML=u.innerHTML,this.details.style.visibility="visible")},u=()=>{n("");const e=document.querySelectorAll(".faded");for(let t of e)t.classList.remove("faded");this.details&&(this.details.style.visibility="hidden")};this.nodes&&this.container.removeChild(this.nodes),this.nodes=this.document.createElement("div"),this.container.appendChild(this.nodes),this.nodes.style.visibility="hidden",e.map((e=>{const t=this.document.getElementById("n"+e.index);if(t&&(t.classList.contains("context")||(t.addEventListener("mouseenter",r),t.addEventListener("mouseleave",u)),e.fields.length||e.description)){const n=this.document.createElement("div");n.id=`node-${t.id}`,n.innerHTML=`<div class="name">${e.name}</div>\n        <div class="description">${e.description||""}</div>\n        <table class="table table-sm">\n          ${e.fields.map((e=>{const t=e.name.length>20?e.name.substring(0,20)+"...":e.name,n=e.required?"th":"td";return`<tr><${n}>${t}</${n}><td>${e.type}</td></tr>`})).join("")}\n            ${e.fields.length>20?"<tr><td colspan='2'>...</td></tr>":""}\n        </table>\n        `,this.nodes?.appendChild(n)}}))}render(e){const{error:t,svg:n,width:r,height:u,nodes:i}=eg(e.code,this.SCALE,e.font);if(t)return t;this.svg.innerHTML=n,i&&this.addNodes(i),this.w=Math.floor(r),this.h=Math.floor(u),e.zoom&&(this.x=e.x||0,this.y=e.y||0,this.zoom=e.zoom),this.transform()}},e.EventEmitter=mm,e.debounce=Dm,e.esml=eg}));

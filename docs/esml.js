!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).esml={})}(this,(function(e){"use strict";var t={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},r={isSpaceSeparator:e=>"string"==typeof e&&t.Space_Separator.test(e),isIdStartChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||t.ID_Start.test(e)),isIdContinueChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||t.ID_Continue.test(e)),isDigit:e=>"string"==typeof e&&/[0-9]/.test(e),isHexDigit:e=>"string"==typeof e&&/[0-9A-Fa-f]/.test(e)};let n,u,i,a,o,s,c,d,f;function h(e,t,r){const n=e[t];if(null!=n&&"object"==typeof n)if(Array.isArray(n))for(let e=0;e<n.length;e++){const t=String(e),u=h(n,t,r);void 0===u?delete n[t]:Object.defineProperty(n,t,{value:u,writable:!0,enumerable:!0,configurable:!0})}else for(const e in n){const t=h(n,e,r);void 0===t?delete n[e]:Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,t,n)}let l,p,v,D,m;function g(){for(l="default",p="",v=!1,D=1;;){m=y();const e=_[l]();if(e)return e}}function y(){if(n[a])return String.fromCodePoint(n.codePointAt(a))}function E(){const e=y();return"\n"===e?(o++,s=0):e?s+=e.length:s++,e&&(a+=e.length),e}const _={default(){switch(m){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void E();case"/":return E(),void(l="comment");case void 0:return E(),C("eof")}if(!r.isSpaceSeparator(m))return _[u]();E()},comment(){switch(m){case"*":return E(),void(l="multiLineComment");case"/":return E(),void(l="singleLineComment")}throw B(E())},multiLineComment(){switch(m){case"*":return E(),void(l="multiLineCommentAsterisk");case void 0:throw B(E())}E()},multiLineCommentAsterisk(){switch(m){case"*":return void E();case"/":return E(),void(l="default");case void 0:throw B(E())}E(),l="multiLineComment"},singleLineComment(){switch(m){case"\n":case"\r":case"\u2028":case"\u2029":return E(),void(l="default");case void 0:return E(),C("eof")}E()},value(){switch(m){case"{":case"[":return C("punctuator",E());case"n":return E(),A("ull"),C("null",null);case"t":return E(),A("rue"),C("boolean",!0);case"f":return E(),A("alse"),C("boolean",!1);case"-":case"+":return"-"===E()&&(D=-1),void(l="sign");case".":return p=E(),void(l="decimalPointLeading");case"0":return p=E(),void(l="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return p=E(),void(l="decimalInteger");case"I":return E(),A("nfinity"),C("numeric",1/0);case"N":return E(),A("aN"),C("numeric",NaN);case'"':case"'":return v='"'===E(),p="",void(l="string")}throw B(E())},identifierNameStartEscape(){if("u"!==m)throw B(E());E();const e=F();switch(e){case"$":case"_":break;default:if(!r.isIdStartChar(e))throw j()}p+=e,l="identifierName"},identifierName(){switch(m){case"$":case"_":case"‌":case"‍":return void(p+=E());case"\\":return E(),void(l="identifierNameEscape")}if(!r.isIdContinueChar(m))return C("identifier",p);p+=E()},identifierNameEscape(){if("u"!==m)throw B(E());E();const e=F();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!r.isIdContinueChar(e))throw j()}p+=e,l="identifierName"},sign(){switch(m){case".":return p=E(),void(l="decimalPointLeading");case"0":return p=E(),void(l="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return p=E(),void(l="decimalInteger");case"I":return E(),A("nfinity"),C("numeric",D*(1/0));case"N":return E(),A("aN"),C("numeric",NaN)}throw B(E())},zero(){switch(m){case".":return p+=E(),void(l="decimalPoint");case"e":case"E":return p+=E(),void(l="decimalExponent");case"x":case"X":return p+=E(),void(l="hexadecimal")}return C("numeric",0*D)},decimalInteger(){switch(m){case".":return p+=E(),void(l="decimalPoint");case"e":case"E":return p+=E(),void(l="decimalExponent")}if(!r.isDigit(m))return C("numeric",D*Number(p));p+=E()},decimalPointLeading(){if(r.isDigit(m))return p+=E(),void(l="decimalFraction");throw B(E())},decimalPoint(){switch(m){case"e":case"E":return p+=E(),void(l="decimalExponent")}return r.isDigit(m)?(p+=E(),void(l="decimalFraction")):C("numeric",D*Number(p))},decimalFraction(){switch(m){case"e":case"E":return p+=E(),void(l="decimalExponent")}if(!r.isDigit(m))return C("numeric",D*Number(p));p+=E()},decimalExponent(){switch(m){case"+":case"-":return p+=E(),void(l="decimalExponentSign")}if(r.isDigit(m))return p+=E(),void(l="decimalExponentInteger");throw B(E())},decimalExponentSign(){if(r.isDigit(m))return p+=E(),void(l="decimalExponentInteger");throw B(E())},decimalExponentInteger(){if(!r.isDigit(m))return C("numeric",D*Number(p));p+=E()},hexadecimal(){if(r.isHexDigit(m))return p+=E(),void(l="hexadecimalInteger");throw B(E())},hexadecimalInteger(){if(!r.isHexDigit(m))return C("numeric",D*Number(p));p+=E()},string(){switch(m){case"\\":return E(),void(p+=function(){switch(y()){case"b":return E(),"\b";case"f":return E(),"\f";case"n":return E(),"\n";case"r":return E(),"\r";case"t":return E(),"\t";case"v":return E(),"\v";case"0":if(E(),r.isDigit(y()))throw B(E());return"\0";case"x":return E(),function(){let e="",t=y();if(!r.isHexDigit(t))throw B(E());if(e+=E(),t=y(),!r.isHexDigit(t))throw B(E());return e+=E(),String.fromCodePoint(parseInt(e,16))}();case"u":return E(),F();case"\n":case"\u2028":case"\u2029":return E(),"";case"\r":return E(),"\n"===y()&&E(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw B(E())}return E()}());case'"':return v?(E(),C("string",p)):void(p+=E());case"'":return v?void(p+=E()):(E(),C("string",p));case"\n":case"\r":throw B(E());case"\u2028":case"\u2029":!function(e){console.warn(`JSON5: '${N(e)}' in strings is not valid ECMAScript; consider escaping`)}(m);break;case void 0:throw B(E())}p+=E()},start(){switch(m){case"{":case"[":return C("punctuator",E())}l="value"},beforePropertyName(){switch(m){case"$":case"_":return p=E(),void(l="identifierName");case"\\":return E(),void(l="identifierNameStartEscape");case"}":return C("punctuator",E());case'"':case"'":return v='"'===E(),void(l="string")}if(r.isIdStartChar(m))return p+=E(),void(l="identifierName");throw B(E())},afterPropertyName(){if(":"===m)return C("punctuator",E());throw B(E())},beforePropertyValue(){l="value"},afterPropertyValue(){switch(m){case",":case"}":return C("punctuator",E())}throw B(E())},beforeArrayValue(){if("]"===m)return C("punctuator",E());l="value"},afterArrayValue(){switch(m){case",":case"]":return C("punctuator",E())}throw B(E())},end(){throw B(E())}};function C(e,t){return{type:e,value:t,line:o,column:s}}function A(e){for(const t of e){if(y()!==t)throw B(E());E()}}function F(){let e="",t=4;for(;t-- >0;){const t=y();if(!r.isHexDigit(t))throw B(E());e+=E()}return String.fromCodePoint(parseInt(e,16))}const b={start(){if("eof"===c.type)throw k();w()},beforePropertyName(){switch(c.type){case"identifier":case"string":return d=c.value,void(u="afterPropertyName");case"punctuator":return void x();case"eof":throw k()}},afterPropertyName(){if("eof"===c.type)throw k();u="beforePropertyValue"},beforePropertyValue(){if("eof"===c.type)throw k();w()},beforeArrayValue(){if("eof"===c.type)throw k();"punctuator"!==c.type||"]"!==c.value?w():x()},afterPropertyValue(){if("eof"===c.type)throw k();switch(c.value){case",":return void(u="beforePropertyName");case"}":x()}},afterArrayValue(){if("eof"===c.type)throw k();switch(c.value){case",":return void(u="beforeArrayValue");case"]":x()}},end(){}};function w(){let e;switch(c.type){case"punctuator":switch(c.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=c.value}if(void 0===f)f=e;else{const t=i[i.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,d,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(null!==e&&"object"==typeof e)i.push(e),u=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{const e=i[i.length-1];u=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}}function x(){i.pop();const e=i[i.length-1];u=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function B(e){return O(void 0===e?`JSON5: invalid end of input at ${o}:${s}`:`JSON5: invalid character '${N(e)}' at ${o}:${s}`)}function k(){return O(`JSON5: invalid end of input at ${o}:${s}`)}function j(){return s-=5,O(`JSON5: invalid identifier character at ${o}:${s}`)}function N(e){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){const t=e.charCodeAt(0).toString(16);return"\\x"+("00"+t).substring(t.length)}return e}function O(e){const t=new SyntaxError(e);return t.lineNumber=o,t.columnNumber=s,t}const S={parse:function(e,t){n=String(e),u="start",i=[],a=0,o=1,s=0,c=void 0,d=void 0,f=void 0;do{c=g(),b[u]()}while("eof"!==c.type);return"function"==typeof t?h({"":f},"",t):f},stringify:function(e,t,n){const u=[];let i,a,o,s="",c="";if(null==t||"object"!=typeof t||Array.isArray(t)||(n=t.space,o=t.quote,t=t.replacer),"function"==typeof t)a=t;else if(Array.isArray(t)){i=[];for(const e of t){let t;"string"==typeof e?t=e:("number"==typeof e||e instanceof String||e instanceof Number)&&(t=String(e)),void 0!==t&&i.indexOf(t)<0&&i.push(t)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),"number"==typeof n?n>0&&(n=Math.min(10,Math.floor(n)),c="          ".substr(0,n)):"string"==typeof n&&(c=n.substr(0,10)),d("",{"":e});function d(e,t){let r=t[e];switch(null!=r&&("function"==typeof r.toJSON5?r=r.toJSON5(e):"function"==typeof r.toJSON&&(r=r.toJSON(e))),a&&(r=a.call(t,e,r)),r instanceof Number?r=Number(r):r instanceof String?r=String(r):r instanceof Boolean&&(r=r.valueOf()),r){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof r?f(r):"number"==typeof r?String(r):"object"==typeof r?Array.isArray(r)?function(e){if(u.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");u.push(e);let t=s;s+=c;let r,n=[];for(let t=0;t<e.length;t++){const r=d(String(t),e);n.push(void 0!==r?r:"null")}if(0===n.length)r="[]";else if(""===c){r="["+n.join(",")+"]"}else{let e=",\n"+s,u=n.join(e);r="[\n"+s+u+",\n"+t+"]"}return u.pop(),s=t,r}(r):function(e){if(u.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");u.push(e);let t=s;s+=c;let r,n=i||Object.keys(e),a=[];for(const t of n){const r=d(t,e);if(void 0!==r){let e=h(t)+":";""!==c&&(e+=" "),e+=r,a.push(e)}}if(0===a.length)r="{}";else{let e;if(""===c)e=a.join(","),r="{"+e+"}";else{let n=",\n"+s;e=a.join(n),r="{\n"+s+e+",\n"+t+"}"}}return u.pop(),s=t,r}(r):void 0}function f(e){const t={"'":.1,'"':.2},n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let u="";for(let i=0;i<e.length;i++){const a=e[i];switch(a){case"'":case'"':t[a]++,u+=a;continue;case"\0":if(r.isDigit(e[i+1])){u+="\\x00";continue}}if(n[a])u+=n[a];else if(a<" "){let e=a.charCodeAt(0).toString(16);u+="\\x"+("00"+e).substring(e.length)}else u+=a}const i=o||Object.keys(t).reduce(((e,r)=>t[e]<t[r]?e:r));return u=u.replace(new RegExp(i,"g"),n[i]),i+u+i}function h(e){if(0===e.length)return f(e);const t=String.fromCodePoint(e.codePointAt(0));if(!r.isIdStartChar(t))return f(e);for(let n=t.length;n<e.length;n++)if(!r.isIdContinueChar(String.fromCodePoint(e.codePointAt(n))))return f(e);return e}}};var I,T,Z=S;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(I||(I={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(T||(T={}));const P=I.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),M=e=>{switch(typeof e){case"undefined":return P.undefined;case"string":return P.string;case"number":return isNaN(e)?P.nan:P.number;case"boolean":return P.boolean;case"function":return P.function;case"bigint":return P.bigint;case"symbol":return P.symbol;case"object":return Array.isArray(e)?P.array:null===e?P.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?P.promise:"undefined"!=typeof Map&&e instanceof Map?P.map:"undefined"!=typeof Set&&e instanceof Set?P.set:"undefined"!=typeof Date&&e instanceof Date?P.date:P.object;default:return P.unknown}},z=I.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class L extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const u of e.issues)if("invalid_union"===u.code)u.unionErrors.map(n);else if("invalid_return_type"===u.code)n(u.returnTypeError);else if("invalid_arguments"===u.code)n(u.argumentsError);else if(0===u.path.length)r._errors.push(t(u));else{let e=r,n=0;for(;n<u.path.length;){const r=u.path[n];n===u.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(u))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,I.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}L.create=e=>new L(e);const $=(e,t)=>{let r;switch(e.code){case z.invalid_type:r=e.received===P.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case z.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,I.jsonStringifyReplacer)}`;break;case z.unrecognized_keys:r=`Unrecognized key(s) in object: ${I.joinValues(e.keys,", ")}`;break;case z.invalid_union:r="Invalid input";break;case z.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${I.joinValues(e.options)}`;break;case z.invalid_enum_value:r=`Invalid enum value. Expected ${I.joinValues(e.options)}, received '${e.received}'`;break;case z.invalid_arguments:r="Invalid function arguments";break;case z.invalid_return_type:r="Invalid function return type";break;case z.invalid_date:r="Invalid date";break;case z.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:I.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case z.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case z.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case z.custom:r="Invalid input";break;case z.invalid_intersection_types:r="Intersection results could not be merged";break;case z.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case z.not_finite:r="Number must be finite";break;default:r=t.defaultError,I.assertNever(e)}return{message:r}};let R=$;function U(){return R}const V=e=>{const{data:t,path:r,errorMaps:n,issueData:u}=e,i=[...r,...u.path||[]],a={...u,path:i};let o="";const s=n.filter((e=>!!e)).slice().reverse();for(const e of s)o=e(a,{data:t,defaultError:o}).message;return{...u,path:i,message:u.message||o}};function G(e,t){const r=V({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,U(),$].filter((e=>!!e))});e.common.issues.push(r)}class q{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return H;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return q.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:u}=n;if("aborted"===t.status)return H;if("aborted"===u.status)return H;"dirty"===t.status&&e.dirty(),"dirty"===u.status&&e.dirty(),(void 0!==u.value||n.alwaysSet)&&(r[t.value]=u.value)}return{status:e.value,value:r}}}const H=Object.freeze({status:"aborted"}),W=e=>({status:"dirty",value:e}),K=e=>({status:"valid",value:e}),Y=e=>"aborted"===e.status,J=e=>"dirty"===e.status,X=e=>"valid"===e.status,Q=e=>"undefined"!=typeof Promise&&e instanceof Promise;var ee;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(ee||(ee={}));class te{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const re=(e,t)=>{if(X(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new L(e.common.issues);return this._error=t,this._error}}};function ne(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:u}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:u};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:u}}class ue{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return M(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:M(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new q,ctx:{common:e.parent.common,data:e.data,parsedType:M(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Q(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:M(e)},u=this._parseSync({data:e,path:n.path,parent:n});return re(n,u)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:M(e)},n=this._parse({data:e,path:r.path,parent:r}),u=await(Q(n)?n:Promise.resolve(n));return re(r,u)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const u=e(t),i=()=>n.addIssue({code:z.custom,...r(t)});return"undefined"!=typeof Promise&&u instanceof Promise?u.then((e=>!!e||(i(),!1))):!!u||(i(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new qe({schema:this,typeName:nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return He.create(this,this._def)}nullable(){return We.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xe.create(this,this._def)}promise(){return Ge.create(this,this._def)}or(e){return je.create([this,e],this._def)}and(e){return Ie.create(this,e,this._def)}transform(e){return new qe({...ne(this._def),schema:this,typeName:nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ke({...ne(this._def),innerType:this,defaultValue:t,typeName:nt.ZodDefault})}brand(){return new Qe({typeName:nt.ZodBranded,type:this,...ne(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Ye({...ne(this._def),innerType:this,catchValue:t,typeName:nt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return et.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ie=/^c[^\s-]{8,}$/i,ae=/^[a-z][a-z0-9]*$/,oe=/[0-9A-HJKMNP-TV-Z]{26}/,se=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,ce=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,de=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,fe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,he=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;function le(e,t){return!("v4"!==t&&t||!fe.test(e))||!("v6"!==t&&t||!he.test(e))}class pe extends ue{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement((t=>e.test(t)),{validation:t,code:z.invalid_string,...ee.errToObj(r)}),this.nonempty=e=>this.min(1,ee.errToObj(e)),this.trim=()=>new pe({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new pe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new pe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==P.string){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.string,received:t.parsedType}),H}const t=new q;let r;for(const u of this._def.checks)if("min"===u.kind)e.data.length<u.value&&(r=this._getOrReturnCtx(e,r),G(r,{code:z.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),t.dirty());else if("max"===u.kind)e.data.length>u.value&&(r=this._getOrReturnCtx(e,r),G(r,{code:z.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),t.dirty());else if("length"===u.kind){const n=e.data.length>u.value,i=e.data.length<u.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?G(r,{code:z.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):i&&G(r,{code:z.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),t.dirty())}else if("email"===u.kind)ce.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"email",code:z.invalid_string,message:u.message}),t.dirty());else if("emoji"===u.kind)de.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"emoji",code:z.invalid_string,message:u.message}),t.dirty());else if("uuid"===u.kind)se.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"uuid",code:z.invalid_string,message:u.message}),t.dirty());else if("cuid"===u.kind)ie.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"cuid",code:z.invalid_string,message:u.message}),t.dirty());else if("cuid2"===u.kind)ae.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"cuid2",code:z.invalid_string,message:u.message}),t.dirty());else if("ulid"===u.kind)oe.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"ulid",code:z.invalid_string,message:u.message}),t.dirty());else if("url"===u.kind)try{new URL(e.data)}catch(n){r=this._getOrReturnCtx(e,r),G(r,{validation:"url",code:z.invalid_string,message:u.message}),t.dirty()}else if("regex"===u.kind){u.regex.lastIndex=0;u.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"regex",code:z.invalid_string,message:u.message}),t.dirty())}else if("trim"===u.kind)e.data=e.data.trim();else if("includes"===u.kind)e.data.includes(u.value,u.position)||(r=this._getOrReturnCtx(e,r),G(r,{code:z.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),t.dirty());else if("toLowerCase"===u.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===u.kind)e.data=e.data.toUpperCase();else if("startsWith"===u.kind)e.data.startsWith(u.value)||(r=this._getOrReturnCtx(e,r),G(r,{code:z.invalid_string,validation:{startsWith:u.value},message:u.message}),t.dirty());else if("endsWith"===u.kind)e.data.endsWith(u.value)||(r=this._getOrReturnCtx(e,r),G(r,{code:z.invalid_string,validation:{endsWith:u.value},message:u.message}),t.dirty());else if("datetime"===u.kind){((n=u).precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):0===n.precision?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:z.invalid_string,validation:"datetime",message:u.message}),t.dirty())}else"ip"===u.kind?le(e.data,u.version)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"ip",code:z.invalid_string,message:u.message}),t.dirty()):I.assertNever(u);var n;return{status:t.value,value:e.data}}_addCheck(e){return new pe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ee.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...ee.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ee.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...ee.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ee.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ee.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ee.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ee.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ee.errToObj(t)})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ve(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,u=r>n?r:n;return parseInt(e.toFixed(u).replace(".",""))%parseInt(t.toFixed(u).replace(".",""))/Math.pow(10,u)}pe.create=e=>{var t;return new pe({checks:[],typeName:nt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...ne(e)})};class De extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==P.number){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.number,received:t.parsedType}),H}let t;const r=new q;for(const n of this._def.checks)if("int"===n.kind)I.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),G(t,{code:z.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==ve(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),G(t,{code:z.not_finite,message:n.message}),r.dirty()):I.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ee.toString(t))}setLimit(e,t,r,n){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ee.toString(n)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ee.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&I.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}De.create=e=>new De({checks:[],typeName:nt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...ne(e)});class me extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==P.bigint){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.bigint,received:t.parsedType}),H}let t;const r=new q;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):I.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ee.toString(t))}setLimit(e,t,r,n){return new me({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ee.toString(n)}]})}_addCheck(e){return new me({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}me.create=e=>{var t;return new me({checks:[],typeName:nt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...ne(e)})};class ge extends ue{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==P.boolean){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.boolean,received:t.parsedType}),H}return K(e.data)}}ge.create=e=>new ge({typeName:nt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...ne(e)});class ye extends ue{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==P.date){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.date,received:t.parsedType}),H}if(isNaN(e.data.getTime())){return G(this._getOrReturnCtx(e),{code:z.invalid_date}),H}const t=new q;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),G(r,{code:z.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),G(r,{code:z.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):I.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ye({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ee.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ee.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ye.create=e=>new ye({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:nt.ZodDate,...ne(e)});class Ee extends ue{_parse(e){if(this._getType(e)!==P.symbol){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.symbol,received:t.parsedType}),H}return K(e.data)}}Ee.create=e=>new Ee({typeName:nt.ZodSymbol,...ne(e)});class _e extends ue{_parse(e){if(this._getType(e)!==P.undefined){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.undefined,received:t.parsedType}),H}return K(e.data)}}_e.create=e=>new _e({typeName:nt.ZodUndefined,...ne(e)});class Ce extends ue{_parse(e){if(this._getType(e)!==P.null){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.null,received:t.parsedType}),H}return K(e.data)}}Ce.create=e=>new Ce({typeName:nt.ZodNull,...ne(e)});class Ae extends ue{constructor(){super(...arguments),this._any=!0}_parse(e){return K(e.data)}}Ae.create=e=>new Ae({typeName:nt.ZodAny,...ne(e)});class Fe extends ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return K(e.data)}}Fe.create=e=>new Fe({typeName:nt.ZodUnknown,...ne(e)});class be extends ue{_parse(e){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.never,received:t.parsedType}),H}}be.create=e=>new be({typeName:nt.ZodNever,...ne(e)});class we extends ue{_parse(e){if(this._getType(e)!==P.undefined){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.void,received:t.parsedType}),H}return K(e.data)}}we.create=e=>new we({typeName:nt.ZodVoid,...ne(e)});class xe extends ue{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==P.array)return G(t,{code:z.invalid_type,expected:P.array,received:t.parsedType}),H;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,u=t.data.length<n.exactLength.value;(e||u)&&(G(t,{code:e?z.too_big:z.too_small,minimum:u?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(G(t,{code:z.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(G(t,{code:z.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new te(t,e,t.path,r))))).then((e=>q.mergeArray(r,e)));const u=[...t.data].map(((e,r)=>n.type._parseSync(new te(t,e,t.path,r))));return q.mergeArray(r,u)}get element(){return this._def.type}min(e,t){return new xe({...this._def,minLength:{value:e,message:ee.toString(t)}})}max(e,t){return new xe({...this._def,maxLength:{value:e,message:ee.toString(t)}})}length(e,t){return new xe({...this._def,exactLength:{value:e,message:ee.toString(t)}})}nonempty(e){return this.min(1,e)}}function Be(e){if(e instanceof ke){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=He.create(Be(n))}return new ke({...e._def,shape:()=>t})}return e instanceof xe?new xe({...e._def,type:Be(e.element)}):e instanceof He?He.create(Be(e.unwrap())):e instanceof We?We.create(Be(e.unwrap())):e instanceof Te?Te.create(e.items.map((e=>Be(e)))):e}xe.create=(e,t)=>new xe({type:e,minLength:null,maxLength:null,exactLength:null,typeName:nt.ZodArray,...ne(t)});class ke extends ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=I.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==P.object){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.object,received:t.parsedType}),H}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:u}=this._getCached(),i=[];if(!(this._def.catchall instanceof be&&"strip"===this._def.unknownKeys))for(const e in r.data)u.includes(e)||i.push(e);const a=[];for(const e of u){const t=n[e],u=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new te(r,u,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof be){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&(G(r,{code:z.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const n=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new te(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>q.mergeObjectSync(t,e))):q.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return ee.errToObj,new ke({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,u,i,a;const o=null!==(i=null===(u=(n=this._def).errorMap)||void 0===u?void 0:u.call(n,t,r).message)&&void 0!==i?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=ee.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new ke({...this._def,unknownKeys:"strip"})}passthrough(){return new ke({...this._def,unknownKeys:"passthrough"})}extend(e){return new ke({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ke({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:nt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ke({...this._def,catchall:e})}pick(e){const t={};return I.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new ke({...this._def,shape:()=>t})}omit(e){const t={};return I.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new ke({...this._def,shape:()=>t})}deepPartial(){return Be(this)}partial(e){const t={};return I.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new ke({...this._def,shape:()=>t})}required(e){const t={};return I.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof He;)e=e._def.innerType;t[r]=e}})),new ke({...this._def,shape:()=>t})}keyof(){return Re(I.objectKeys(this.shape))}}ke.create=(e,t)=>new ke({shape:()=>e,unknownKeys:"strip",catchall:be.create(),typeName:nt.ZodObject,...ne(t)}),ke.strictCreate=(e,t)=>new ke({shape:()=>e,unknownKeys:"strict",catchall:be.create(),typeName:nt.ZodObject,...ne(t)}),ke.lazycreate=(e,t)=>new ke({shape:e,unknownKeys:"strip",catchall:be.create(),typeName:nt.ZodObject,...ne(t)});class je extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new L(e.ctx.common.issues)));return G(t,{code:z.invalid_union,unionErrors:r}),H}));{let e;const n=[];for(const u of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=u._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const u=n.map((e=>new L(e)));return G(t,{code:z.invalid_union,unionErrors:u}),H}}get options(){return this._def.options}}je.create=(e,t)=>new je({options:e,typeName:nt.ZodUnion,...ne(t)});const Ne=e=>e instanceof Le?Ne(e.schema):e instanceof qe?Ne(e.innerType()):e instanceof $e?[e.value]:e instanceof Ue?e.options:e instanceof Ve?Object.keys(e.enum):e instanceof Ke?Ne(e._def.innerType):e instanceof _e?[void 0]:e instanceof Ce?[null]:null;class Oe extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.object)return G(t,{code:z.invalid_type,expected:P.object,received:t.parsedType}),H;const r=this.discriminator,n=t.data[r],u=this.optionsMap.get(n);return u?t.common.async?u._parseAsync({data:t.data,path:t.path,parent:t}):u._parseSync({data:t.data,path:t.path,parent:t}):(G(t,{code:z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=Ne(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of t){if(n.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);n.set(u,r)}}return new Oe({typeName:nt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...ne(r)})}}function Se(e,t){const r=M(e),n=M(t);if(e===t)return{valid:!0,data:e};if(r===P.object&&n===P.object){const r=I.objectKeys(t),n=I.objectKeys(e).filter((e=>-1!==r.indexOf(e))),u={...e,...t};for(const r of n){const n=Se(e[r],t[r]);if(!n.valid)return{valid:!1};u[r]=n.data}return{valid:!0,data:u}}if(r===P.array&&n===P.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const u=Se(e[n],t[n]);if(!u.valid)return{valid:!1};r.push(u.data)}return{valid:!0,data:r}}return r===P.date&&n===P.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ie extends ue{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(Y(e)||Y(n))return H;const u=Se(e.value,n.value);return u.valid?((J(e)||J(n))&&t.dirty(),{status:t.value,value:u.data}):(G(r,{code:z.invalid_intersection_types}),H)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ie.create=(e,t,r)=>new Ie({left:e,right:t,typeName:nt.ZodIntersection,...ne(r)});class Te extends ue{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==P.array)return G(r,{code:z.invalid_type,expected:P.array,received:r.parsedType}),H;if(r.data.length<this._def.items.length)return G(r,{code:z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&r.data.length>this._def.items.length&&(G(r,{code:z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new te(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>q.mergeArray(t,e))):q.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new Te({...this._def,rest:e})}}Te.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Te({items:e,typeName:nt.ZodTuple,rest:null,...ne(t)})};class Ze extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==P.object)return G(r,{code:z.invalid_type,expected:P.object,received:r.parsedType}),H;const n=[],u=this._def.keyType,i=this._def.valueType;for(const e in r.data)n.push({key:u._parse(new te(r,e,r.path,e)),value:i._parse(new te(r,r.data[e],r.path,e))});return r.common.async?q.mergeObjectAsync(t,n):q.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new Ze(t instanceof ue?{keyType:e,valueType:t,typeName:nt.ZodRecord,...ne(r)}:{keyType:pe.create(),valueType:e,typeName:nt.ZodRecord,...ne(t)})}}class Pe extends ue{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==P.map)return G(r,{code:z.invalid_type,expected:P.map,received:r.parsedType}),H;const n=this._def.keyType,u=this._def.valueType,i=[...r.data.entries()].map((([e,t],i)=>({key:n._parse(new te(r,e,r.path,[i,"key"])),value:u._parse(new te(r,t,r.path,[i,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of i){const n=await r.key,u=await r.value;if("aborted"===n.status||"aborted"===u.status)return H;"dirty"!==n.status&&"dirty"!==u.status||t.dirty(),e.set(n.value,u.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of i){const n=r.key,u=r.value;if("aborted"===n.status||"aborted"===u.status)return H;"dirty"!==n.status&&"dirty"!==u.status||t.dirty(),e.set(n.value,u.value)}return{status:t.value,value:e}}}}Pe.create=(e,t,r)=>new Pe({valueType:t,keyType:e,typeName:nt.ZodMap,...ne(r)});class Me extends ue{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==P.set)return G(r,{code:z.invalid_type,expected:P.set,received:r.parsedType}),H;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(G(r,{code:z.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(G(r,{code:z.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const u=this._def.valueType;function i(e){const r=new Set;for(const n of e){if("aborted"===n.status)return H;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const a=[...r.data.values()].map(((e,t)=>u._parse(new te(r,e,r.path,t))));return r.common.async?Promise.all(a).then((e=>i(e))):i(a)}min(e,t){return new Me({...this._def,minSize:{value:e,message:ee.toString(t)}})}max(e,t){return new Me({...this._def,maxSize:{value:e,message:ee.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Me.create=(e,t)=>new Me({valueType:e,minSize:null,maxSize:null,typeName:nt.ZodSet,...ne(t)});class ze extends ue{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.function)return G(t,{code:z.invalid_type,expected:P.function,received:t.parsedType}),H;function r(e,r){return V({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,U(),$].filter((e=>!!e)),issueData:{code:z.invalid_arguments,argumentsError:r}})}function n(e,r){return V({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,U(),$].filter((e=>!!e)),issueData:{code:z.invalid_return_type,returnTypeError:r}})}const u={errorMap:t.common.contextualErrorMap},i=t.data;return this._def.returns instanceof Ge?K((async(...e)=>{const t=new L([]),a=await this._def.args.parseAsync(e,u).catch((n=>{throw t.addIssue(r(e,n)),t})),o=await i(...a);return await this._def.returns._def.type.parseAsync(o,u).catch((e=>{throw t.addIssue(n(o,e)),t}))})):K(((...e)=>{const t=this._def.args.safeParse(e,u);if(!t.success)throw new L([r(e,t.error)]);const a=i(...t.data),o=this._def.returns.safeParse(a,u);if(!o.success)throw new L([n(a,o.error)]);return o.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ze({...this._def,args:Te.create(e).rest(Fe.create())})}returns(e){return new ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ze({args:e||Te.create([]).rest(Fe.create()),returns:t||Fe.create(),typeName:nt.ZodFunction,...ne(r)})}}class Le extends ue{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Le.create=(e,t)=>new Le({getter:e,typeName:nt.ZodLazy,...ne(t)});class $e extends ue{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return G(t,{received:t.data,code:z.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Re(e,t){return new Ue({values:e,typeName:nt.ZodEnum,...ne(t)})}$e.create=(e,t)=>new $e({value:e,typeName:nt.ZodLiteral,...ne(t)});class Ue extends ue{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return G(t,{expected:I.joinValues(r),received:t.parsedType,code:z.invalid_type}),H}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return G(t,{received:t.data,code:z.invalid_enum_value,options:r}),H}return K(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Ue.create(e)}exclude(e){return Ue.create(this.options.filter((t=>!e.includes(t))))}}Ue.create=Re;class Ve extends ue{_parse(e){const t=I.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==P.string&&r.parsedType!==P.number){const e=I.objectValues(t);return G(r,{expected:I.joinValues(e),received:r.parsedType,code:z.invalid_type}),H}if(-1===t.indexOf(e.data)){const e=I.objectValues(t);return G(r,{received:r.data,code:z.invalid_enum_value,options:e}),H}return K(e.data)}get enum(){return this._def.values}}Ve.create=(e,t)=>new Ve({values:e,typeName:nt.ZodNativeEnum,...ne(t)});class Ge extends ue{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.promise&&!1===t.common.async)return G(t,{code:z.invalid_type,expected:P.promise,received:t.parsedType}),H;const r=t.parsedType===P.promise?t.data:Promise.resolve(t.data);return K(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Ge.create=(e,t)=>new Ge({type:e,typeName:nt.ZodPromise,...ne(t)});class qe extends ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null;if("preprocess"===n.type){const e=n.transform(r.data);return r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}const u={addIssue:e=>{G(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(u.addIssue=u.addIssue.bind(u),"refinement"===n.type){const e=e=>{const t=n.refinement(e,u);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?H:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?H:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!X(e))return e;const i=n.transform(e.value,u);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>X(e)?Promise.resolve(n.transform(e.value,u)).then((e=>({status:t.value,value:e}))):e))}I.assertNever(n)}}qe.create=(e,t,r)=>new qe({schema:e,typeName:nt.ZodEffects,effect:t,...ne(r)}),qe.createWithPreprocess=(e,t,r)=>new qe({schema:t,effect:{type:"preprocess",transform:e},typeName:nt.ZodEffects,...ne(r)});class He extends ue{_parse(e){return this._getType(e)===P.undefined?K(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}He.create=(e,t)=>new He({innerType:e,typeName:nt.ZodOptional,...ne(t)});class We extends ue{_parse(e){return this._getType(e)===P.null?K(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}We.create=(e,t)=>new We({innerType:e,typeName:nt.ZodNullable,...ne(t)});class Ke extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===P.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ke.create=(e,t)=>new Ke({innerType:e,typeName:nt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...ne(t)});class Ye extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Q(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new L(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new L(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ye.create=(e,t)=>new Ye({innerType:e,typeName:nt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...ne(t)});class Je extends ue{_parse(e){if(this._getType(e)!==P.nan){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:P.nan,received:t.parsedType}),H}return{status:"valid",value:e.data}}}Je.create=e=>new Je({typeName:nt.ZodNaN,...ne(e)});const Xe=Symbol("zod_brand");class Qe extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class et extends ue{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?H:"dirty"===e.status?(t.dirty(),W(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?H:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new et({in:e,out:t,typeName:nt.ZodPipeline})}}const tt=(e,t={},r)=>e?Ae.create().superRefine(((n,u)=>{var i,a;if(!e(n)){const e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,o=null===(a=null!==(i=e.fatal)&&void 0!==i?i:r)||void 0===a||a,s="string"==typeof e?{message:e}:e;u.addIssue({code:"custom",...s,fatal:o})}})):Ae.create(),rt={object:ke.lazycreate};var nt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline"}(nt||(nt={}));const ut=pe.create,it=De.create,at=Je.create,ot=me.create,st=ge.create,ct=ye.create,dt=Ee.create,ft=_e.create,ht=Ce.create,lt=Ae.create,pt=Fe.create,vt=be.create,Dt=we.create,mt=xe.create,gt=ke.create,yt=ke.strictCreate,Et=je.create,_t=Oe.create,Ct=Ie.create,At=Te.create,Ft=Ze.create,bt=Pe.create,wt=Me.create,xt=ze.create,Bt=Le.create,kt=$e.create,jt=Ue.create,Nt=Ve.create,Ot=Ge.create,St=qe.create,It=He.create,Tt=We.create,Zt=qe.createWithPreprocess,Pt=et.create,Mt={string:e=>pe.create({...e,coerce:!0}),number:e=>De.create({...e,coerce:!0}),boolean:e=>ge.create({...e,coerce:!0}),bigint:e=>me.create({...e,coerce:!0}),date:e=>ye.create({...e,coerce:!0})},zt=H;var Lt=Object.freeze({__proto__:null,defaultErrorMap:$,setErrorMap:function(e){R=e},getErrorMap:U,makeIssue:V,EMPTY_PATH:[],addIssueToContext:G,ParseStatus:q,INVALID:H,DIRTY:W,OK:K,isAborted:Y,isDirty:J,isValid:X,isAsync:Q,get util(){return I},get objectUtil(){return T},ZodParsedType:P,getParsedType:M,ZodType:ue,ZodString:pe,ZodNumber:De,ZodBigInt:me,ZodBoolean:ge,ZodDate:ye,ZodSymbol:Ee,ZodUndefined:_e,ZodNull:Ce,ZodAny:Ae,ZodUnknown:Fe,ZodNever:be,ZodVoid:we,ZodArray:xe,ZodObject:ke,ZodUnion:je,ZodDiscriminatedUnion:Oe,ZodIntersection:Ie,ZodTuple:Te,ZodRecord:Ze,ZodMap:Pe,ZodSet:Me,ZodFunction:ze,ZodLazy:Le,ZodLiteral:$e,ZodEnum:Ue,ZodNativeEnum:Ve,ZodPromise:Ge,ZodEffects:qe,ZodTransformer:qe,ZodOptional:He,ZodNullable:We,ZodDefault:Ke,ZodCatch:Ye,ZodNaN:Je,BRAND:Xe,ZodBranded:Qe,ZodPipeline:et,custom:tt,Schema:ue,ZodSchema:ue,late:rt,get ZodFirstPartyTypeKind(){return nt},coerce:Mt,any:lt,array:mt,bigint:ot,boolean:st,date:ct,discriminatedUnion:_t,effect:St,enum:jt,function:xt,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>tt((t=>t instanceof e),t),intersection:Ct,lazy:Bt,literal:kt,map:bt,nan:at,nativeEnum:Nt,never:vt,null:ht,nullable:Tt,number:it,object:gt,oboolean:()=>st().optional(),onumber:()=>it().optional(),optional:It,ostring:()=>ut().optional(),pipeline:Pt,preprocess:Zt,promise:Ot,record:Ft,set:wt,strictObject:yt,string:ut,symbol:dt,transformer:St,tuple:At,undefined:ft,union:Et,unknown:pt,void:Dt,NEVER:zt,ZodIssueCode:z,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:L});const $t={context:"white",actor:"#ffc107",aggregate:"#fffabb",system:"#eca0c3",projector:"#d5f694",policy:"#c595cd",process:"#c595cd",command:"#7adcfb",event:"#ffaa61"},Rt=["string","number","boolean","uuid","date"];class Ut{constructor(e,t,r,n){this.name=e,this.required=t,this.type=r,this.size=n}}let Vt=class extends Map{constructor(e,t){super(),this.id=e,this.description=t}toString(){return this.id}};const Gt={system:{handles:"command",emits:"event"},aggregate:{handles:"command",emits:"event"},policy:{handles:"event",invokes:"command"},process:{handles:"event",invokes:"command"},projector:{handles:"event"}},qt=(e,t)=>"command"===t.visual?{source:t,target:e}:{source:e,target:t},Ht=(e,t)=>"event"===t.visual?{source:e.ctx===t.ctx?t:{...t,id:t.id+"*"},target:e,color:$t.event,arrow:!1}:void 0,Wt={context:(e,t,r)=>"event"===t.visual?{source:r.nodes.get(t.ctx.id),target:r.nodes.get(e.ctx.id),color:$t.event,arrow:!0}:"command"===t.visual?{source:r.nodes.get(e.ctx.id),target:r.nodes.get(t.ctx.id),color:$t.command,arrow:!0}:"projector"===t.visual?{source:r.nodes.get(e.ctx.id),target:r.nodes.get(t.ctx.id),color:$t.projector,arrow:!0}:void 0,aggregate:qt,system:qt,policy:Ht,process:Ht,projector:(e,t)=>({source:e.ctx===t.ctx?t:{...t,id:t.id+"*"},target:e,color:$t.event,arrow:!1}),command:()=>{},event:()=>{},actor:()=>{}},Kt=(e,t="",r=!1)=>({id:t,visual:"context",ctx:e??{},color:r?void 0:$t.context,nodes:new Map,edges:new Map,schemas:new Map,x:0,y:0}),Yt=(e,t)=>{!e.refs&&(e.refs=new Set),e.refs.add(t)},Jt=(e,t,{requires:r,optional:n,description:u})=>{const i=e.schemas.get(t)??new Vt(t,u);e.schemas.set(t,i);const a=(t,r,n)=>{Rt.includes(r)?i.set(t,new Ut(t,n,r)):(e.schemas.has(r)||e.schemas.set(r,new Vt(r)),i.set(t,new Ut(t,n,e.schemas.get(r))))};r&&Object.entries(r).forEach((([e,t])=>a(e,t,!0))),n&&Object.entries(n).forEach((([e,t])=>a(e,t,!1)))},Xt=(e,t,r)=>{const n=e.schemas.get(t),u=e.schemas.get(r);n&&u&&u.forEach(((e,t)=>!n.has(t)&&n.set(t,e)))},Qt=e=>{const t=Kt(),r=(e,r,n)=>{const[u,i]=r.split(".");i&&((e=t.nodes.get(u))||(e=Kt(t,u),t.nodes.set(u,e)),r=i),!e.nodes.has(r)&&e.nodes.set(r,{id:r,visual:n,color:$t[n],ctx:e});return e.nodes.get(r)};return Object.entries(e).forEach((([e,n])=>{const u=Kt(t,e);t.nodes.set(e,u),Object.entries(n).forEach((([e,t])=>((e,t,n)=>{"schema"===n.type?Jt(e,t,n):(r(e,t,n.type).description=n.description,"schema"in n&&Jt(e,t,n.schema),"command"===n.type?n.actors&&Object.keys(n.actors).forEach((t=>r(e,t,"actor"))):"event"!==n.type&&Object.entries(n).forEach((([t,u])=>{if(Array.isArray(u)){const i=Gt[n.type][t];i&&u.forEach((t=>r(e,t,i)))}})))})(u,e,t)))})),Object.entries(e).forEach((([e,n])=>{const u=t.nodes.get(e);Object.entries(n).forEach((([e,n])=>{if("schema"===n.type)n.base&&Xt(u,e,n.base);else{const i=Wt[n.type],a=u.nodes.get(e);"schema"in n&&n.schema?.base&&Xt(u,e,n.schema.base),"command"===n.type&&n.actors&&Object.entries(n.actors).forEach((([e,t])=>{const n={...u.nodes.get(e)};Yt(a,n),t.forEach((e=>{const t=r(u,e,"projector");t&&Yt(n,t)}))})),Object.entries(n).forEach((([e,o])=>{Array.isArray(o)&&o.forEach((o=>{const s=r(u,o,Gt[n.type][e]);if(("policy"===a.visual||"process"===a.visual)&&"command"===s.visual&&Yt(s,a),u.color&&a.ctx!==s.ctx){const e=Wt.context(a,s,t);if(e){const r=`${e.source.id}->${e.target.id}-${e.color||""}`;!t.edges.has(r)&&t.edges.set(r,e)}}const c=i(a,s,t);c&&(u.edges.set(`${c.source.id}->${c.target.id}`,c),u.nodes.set(c.source.id,c.source),u.nodes.set(c.target.id,c.target))}))}))}}))})),t};var er,tr,rr,nr,ur,ir,ar,or,sr,cr,dr,fr,hr,lr,pr,vr,Dr,mr,gr,yr,Er,_r,Cr,Ar,Fr,br,wr,xr,Br,kr,jr,Nr,Or,Sr,Ir,Tr,Zr,Pr,Mr,zr,Lr,$r,Rr,Ur,Vr,Gr,qr,Hr,Wr,Kr,Yr,Jr,Xr,Qr,en,tn,rn,nn,un,an,on,sn,cn,dn,fn,hn,ln,pn,vn,Dn,mn,gn,yn,En,_n,Cn,An,Fn,bn,wn,xn,Bn,kn,jn,Nn,On,Sn,In,Tn,Zn,Pn,Mn,zn,Ln,$n,Rn,Un,Vn,Gn,qn,Hn,Wn,Kn,Yn,Jn,Xn,Qn,eu,tu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ru(){if(nr)return rr;return nr=1,rr=function(e,t){return e===t||e!=e&&t!=t}}function nu(){if(ir)return ur;ir=1;var e=ru();return ur=function(t,r){for(var n=t.length;n--;)if(e(t[n][0],r))return n;return-1},ur}function uu(){if(vr)return pr;vr=1;var e=tr?er:(tr=1,er=function(){this.__data__=[],this.size=0}),t=function(){if(or)return ar;or=1;var e=nu(),t=Array.prototype.splice;return ar=function(r){var n=this.__data__,u=e(n,r);return!(u<0||(u==n.length-1?n.pop():t.call(n,u,1),--this.size,0))},ar}(),r=function(){if(cr)return sr;cr=1;var e=nu();return sr=function(t){var r=this.__data__,n=e(r,t);return n<0?void 0:r[n][1]},sr}(),n=function(){if(fr)return dr;fr=1;var e=nu();return dr=function(t){return e(this.__data__,t)>-1},dr}(),u=function(){if(lr)return hr;lr=1;var e=nu();return hr=function(t,r){var n=this.__data__,u=e(n,t);return u<0?(++this.size,n.push([t,r])):n[u][1]=r,this},hr}();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=u,pr=i}function iu(){if(br)return Fr;br=1;var e="object"==typeof tu&&tu&&tu.Object===Object&&tu;return Fr=e}function au(){if(xr)return wr;xr=1;var e=iu(),t="object"==typeof self&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return wr=r}function ou(){if(kr)return Br;kr=1;var e=au().Symbol;return Br=e}function su(){if(Tr)return Ir;Tr=1;var e=ou(),t=function(){if(Nr)return jr;Nr=1;var e=ou(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,u=e?e.toStringTag:void 0;return jr=function(e){var t=r.call(e,u),i=e[u];try{e[u]=void 0;var a=!0}catch(e){}var o=n.call(e);return a&&(t?e[u]=i:delete e[u]),o}}(),r=function(){if(Sr)return Or;Sr=1;var e=Object.prototype.toString;return Or=function(t){return e.call(t)}}(),n=e?e.toStringTag:void 0;return Ir=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":n&&n in Object(e)?t(e):r(e)}}function cu(){if(Pr)return Zr;return Pr=1,Zr=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function du(){if(zr)return Mr;zr=1;var e=su(),t=cu();return Mr=function(r){if(!t(r))return!1;var n=e(r);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}}function fu(){if(Ur)return Rr;Ur=1;var e,t=function(){if($r)return Lr;$r=1;var e=au()["__core-js_shared__"];return Lr=e}(),r=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return Rr=function(e){return!!r&&r in e}}function hu(){if(Gr)return Vr;Gr=1;var e=Function.prototype.toString;return Vr=function(t){if(null!=t){try{return e.call(t)}catch(e){}try{return t+""}catch(e){}}return""}}function lu(){if(Jr)return Yr;Jr=1;var e=function(){if(Hr)return qr;Hr=1;var e=du(),t=fu(),r=cu(),n=hu(),u=/^\[object .+?Constructor\]$/,i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,c=RegExp("^"+o.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return qr=function(i){return!(!r(i)||t(i))&&(e(i)?c:u).test(n(i))}}(),t=(Kr||(Kr=1,Wr=function(e,t){return null==e?void 0:e[t]}),Wr);return Yr=function(r,n){var u=t(r,n);return e(u)?u:void 0},Yr}function pu(){if(Qr)return Xr;Qr=1;var e=lu()(au(),"Map");return Xr=e}function vu(){if(tn)return en;tn=1;var e=lu()(Object,"create");return en=e}function Du(){if(pn)return ln;pn=1;var e=function(){if(nn)return rn;nn=1;var e=vu();return rn=function(){this.__data__=e?e(null):{},this.size=0}}(),t=(an||(an=1,un=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}),un),r=function(){if(sn)return on;sn=1;var e=vu(),t=Object.prototype.hasOwnProperty;return on=function(r){var n=this.__data__;if(e){var u=n[r];return"__lodash_hash_undefined__"===u?void 0:u}return t.call(n,r)?n[r]:void 0},on}(),n=function(){if(dn)return cn;dn=1;var e=vu(),t=Object.prototype.hasOwnProperty;return cn=function(r){var n=this.__data__;return e?void 0!==n[r]:t.call(n,r)},cn}(),u=function(){if(hn)return fn;hn=1;var e=vu();return fn=function(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=e&&void 0===r?"__lodash_hash_undefined__":r,this},fn}();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=u,ln=i}function mu(){if(En)return yn;En=1;var e=gn?mn:(gn=1,mn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return yn=function(t,r){var n=t.__data__;return e(r)?n["string"==typeof r?"string":"hash"]:n.map},yn}function gu(){if(jn)return kn;jn=1;var e=function(){if(Dn)return vn;Dn=1;var e=Du(),t=uu(),r=pu();return vn=function(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}(),t=function(){if(Cn)return _n;Cn=1;var e=mu();return _n=function(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r},_n}(),r=function(){if(Fn)return An;Fn=1;var e=mu();return An=function(t){return e(this,t).get(t)},An}(),n=function(){if(wn)return bn;wn=1;var e=mu();return bn=function(t){return e(this,t).has(t)},bn}(),u=function(){if(Bn)return xn;Bn=1;var e=mu();return xn=function(t,r){var n=e(this,t),u=n.size;return n.set(t,r),this.size+=n.size==u?0:1,this},xn}();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=u,kn=i}function yu(){if(In)return Sn;In=1;var e=uu(),t=function(){if(mr)return Dr;mr=1;var e=uu();return Dr=function(){this.__data__=new e,this.size=0}}(),r=(yr||(yr=1,gr=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}),gr),n=(_r||(_r=1,Er=function(e){return this.__data__.get(e)}),Er),u=(Ar||(Ar=1,Cr=function(e){return this.__data__.has(e)}),Cr),i=function(){if(On)return Nn;On=1;var e=uu(),t=pu(),r=gu();return Nn=function(n,u){var i=this.__data__;if(i instanceof e){var a=i.__data__;if(!t||a.length<199)return a.push([n,u]),this.size=++i.size,this;i=this.__data__=new r(a)}return i.set(n,u),this.size=i.size,this},Nn}();function a(t){var r=this.__data__=new e(t);this.size=r.size}return a.prototype.clear=t,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=u,a.prototype.set=i,Sn=a}function Eu(){if(Zn)return Tn;return Zn=1,Tn=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}}function _u(){if(Mn)return Pn;Mn=1;var e=lu(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();return Pn=t}function Cu(){if(Ln)return zn;Ln=1;var e=_u();return zn=function(t,r,n){"__proto__"==r&&e?e(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n},zn}function Au(){if(Rn)return $n;Rn=1;var e=Cu(),t=ru(),r=Object.prototype.hasOwnProperty;return $n=function(n,u,i){var a=n[u];r.call(n,u)&&t(a,i)&&(void 0!==i||u in n)||e(n,u,i)},$n}function Fu(){if(Vn)return Un;Vn=1;var e=Au(),t=Cu();return Un=function(r,n,u,i){var a=!u;u||(u={});for(var o=-1,s=n.length;++o<s;){var c=n[o],d=i?i(u[c],r[c],c,u,r):void 0;void 0===d&&(d=r[c]),a?t(u,c,d):e(u,c,d)}return u},Un}function bu(){if(Wn)return Hn;return Wn=1,Hn=function(e){return null!=e&&"object"==typeof e}}function wu(){if(Xn)return Jn;Xn=1;var e=function(){if(Yn)return Kn;Yn=1;var e=su(),t=bu();return Kn=function(r){return t(r)&&"[object Arguments]"==e(r)}}(),t=bu(),r=Object.prototype,n=r.hasOwnProperty,u=r.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(e){return t(e)&&n.call(e,"callee")&&!u.call(e,"callee")};return Jn=i}function xu(){if(eu)return Qn;eu=1;var e=Array.isArray;return Qn=e}var Bu,ku,ju,Nu,Ou,Su,Iu,Tu,Zu,Pu,Mu,zu={exports:{}};function Lu(){return ju||(ju=1,function(e,t){var r=au(),n=ku?Bu:(ku=1,Bu=function(){return!1}),u=t&&!t.nodeType&&t,i=u&&e&&!e.nodeType&&e,a=i&&i.exports===u?r.Buffer:void 0,o=(a?a.isBuffer:void 0)||n;e.exports=o}(zu,zu.exports)),zu.exports}function $u(){if(Ou)return Nu;Ou=1;var e=/^(?:0|[1-9]\d*)$/;return Nu=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}}function Ru(){if(Iu)return Su;Iu=1;return Su=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}}function Uu(){if(Mu)return Pu;return Mu=1,Pu=function(e){return function(t){return e(t)}}}zu.exports;var Vu,Gu,qu,Hu,Wu,Ku,Yu,Ju,Xu,Qu,ei,ti,ri,ni,ui,ii,ai,oi,si,ci,di,fi,hi,li,pi,vi,Di,mi={exports:{}};function gi(){return Vu||(Vu=1,function(e,t){var r=iu(),n=t&&!t.nodeType&&t,u=n&&e&&!e.nodeType&&e,i=u&&u.exports===n&&r.process,a=function(){try{var e=u&&u.require&&u.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}(mi,mi.exports)),mi.exports}function yi(){if(qu)return Gu;qu=1;var e=function(){if(Zu)return Tu;Zu=1;var e=su(),t=Ru(),r=bu(),n={};return n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object DataView]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1,Tu=function(u){return r(u)&&t(u.length)&&!!n[e(u)]}}(),t=Uu(),r=gi(),n=r&&r.isTypedArray,u=n?t(n):e;return Gu=u}function Ei(){if(Wu)return Hu;Wu=1;var e=qn?Gn:(qn=1,Gn=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}),t=wu(),r=xu(),n=Lu(),u=$u(),i=yi(),a=Object.prototype.hasOwnProperty;return Hu=function(o,s){var c=r(o),d=!c&&t(o),f=!c&&!d&&n(o),h=!c&&!d&&!f&&i(o),l=c||d||f||h,p=l?e(o.length,String):[],v=p.length;for(var D in o)!s&&!a.call(o,D)||l&&("length"==D||f&&("offset"==D||"parent"==D)||h&&("buffer"==D||"byteLength"==D||"byteOffset"==D)||u(D,v))||p.push(D);return p},Hu}function _i(){if(Yu)return Ku;Yu=1;var e=Object.prototype;return Ku=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}}function Ci(){if(Xu)return Ju;return Xu=1,Ju=function(e,t){return function(r){return e(t(r))}}}function Ai(){if(ri)return ti;ri=1;var e=_i(),t=function(){if(ei)return Qu;ei=1;var e=Ci()(Object.keys,Object);return Qu=e}(),r=Object.prototype.hasOwnProperty;return ti=function(n){if(!e(n))return t(n);var u=[];for(var i in Object(n))r.call(n,i)&&"constructor"!=i&&u.push(i);return u},ti}function Fi(){if(ui)return ni;ui=1;var e=du(),t=Ru();return ni=function(r){return null!=r&&t(r.length)&&!e(r)}}function bi(){if(ai)return ii;ai=1;var e=Ei(),t=Ai(),r=Fi();return ii=function(n){return r(n)?e(n):t(n)}}function wi(){if(hi)return fi;hi=1;var e=cu(),t=_i(),r=(di||(di=1,ci=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}),ci),n=Object.prototype.hasOwnProperty;return fi=function(u){if(!e(u))return r(u);var i=t(u),a=[];for(var o in u)("constructor"!=o||!i&&n.call(u,o))&&a.push(o);return a},fi}function xi(){if(pi)return li;pi=1;var e=Ei(),t=wi(),r=Fi();return li=function(n){return r(n)?e(n,!0):t(n)}}mi.exports;var Bi,ki,ji,Ni,Oi,Si,Ii,Ti,Zi,Pi,Mi,zi,Li,$i,Ri,Ui,Vi,Gi,qi,Hi,Wi,Ki,Yi,Ji,Xi,Qi,ea,ta,ra,na,ua,ia,aa,oa,sa,ca,da,fa,ha,la,pa,va,Da,ma,ga,ya,Ea,_a,Ca,Aa,Fa,ba,wa,xa,Ba,ka,ja,Na,Oa,Sa,Ia,Ta,Za,Pa,Ma,za,La,$a,Ra,Ua,Va,Ga,qa,Ha,Wa,Ka,Ya,Ja,Xa,Qa,eo,to,ro,no,uo,io,ao,oo,so,co,fo,ho,lo,po,vo,Do,mo,go,yo,Eo,_o,Co,Ao,Fo,bo,wo,xo,Bo,ko,jo,No,Oo,So,Io,To,Zo,Po,Mo,zo,Lo,$o,Ro,Uo,Vo,Go,qo,Ho,Wo,Ko,Yo,Jo,Xo,Qo,es,ts,rs,ns,us,is,as,os,ss,cs,ds,fs,hs,ls,ps,vs,Ds,ms,gs,ys,Es,_s,Cs,As,Fs,bs,ws,xs,Bs,ks,js,Ns,Os,Ss,Is,Ts,Zs,Ps,Ms,zs,Ls,$s,Rs,Us,Vs,Gs,qs,Hs,Ws,Ks,Ys,Js,Xs,Qs,ec,tc,rc,nc,uc,ic,ac,oc,sc,cc,dc,fc,hc,lc,pc,vc,Dc,mc,gc,yc,Ec,_c,Cc,Ac,Fc,bc,wc,xc,Bc,kc,jc,Nc,Oc,Sc,Ic,Tc,Zc,Pc,Mc,zc,Lc,$c,Rc,Uc,Vc,Gc,qc,Hc,Wc,Kc,Yc,Jc,Xc,Qc,ed,td,rd,nd,ud,id,ad,od,sd,cd,dd,fd,hd,ld,pd,vd,Dd,md,gd,yd,Ed,_d,Cd,Ad,Fd,bd,wd,xd,Bd,kd,jd,Nd,Od,Sd,Id,Td,Zd,Pd,Md,zd={exports:{}};function Ld(){return Bi||(Bi=1,function(e,t){var r=au(),n=t&&!t.nodeType&&t,u=n&&e&&!e.nodeType&&e,i=u&&u.exports===n?r.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}(zd,zd.exports)),zd.exports}function $d(){if(ji)return ki;return ji=1,ki=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},ki}function Rd(){if(Oi)return Ni;return Oi=1,Ni=function(e,t){for(var r=-1,n=null==e?0:e.length,u=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[u++]=a)}return i}}function Ud(){if(Ii)return Si;return Ii=1,Si=function(){return[]}}function Vd(){if(Zi)return Ti;Zi=1;var e=Rd(),t=Ud(),r=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;return Ti=n?function(t){return null==t?[]:(t=Object(t),e(n(t),(function(e){return r.call(t,e)})))}:t}function Gd(){if(Li)return zi;return Li=1,zi=function(e,t){for(var r=-1,n=t.length,u=e.length;++r<n;)e[u+r]=t[r];return e}}function qd(){if(Ri)return $i;Ri=1;var e=Ci()(Object.getPrototypeOf,Object);return $i=e}function Hd(){if(Vi)return Ui;Vi=1;var e=Gd(),t=qd(),r=Vd(),n=Ud(),u=Object.getOwnPropertySymbols;return Ui=u?function(n){for(var u=[];n;)e(u,r(n)),n=t(n);return u}:n}function Wd(){if(Wi)return Hi;Wi=1;var e=Gd(),t=xu();return Hi=function(r,n,u){var i=n(r);return t(r)?i:e(i,u(r))}}function Kd(){if(Yi)return Ki;Yi=1;var e=Wd(),t=Vd(),r=bi();return Ki=function(n){return e(n,r,t)}}function Yd(){if(ua)return na;ua=1;var e=lu()(au(),"Set");return na=e}function Jd(){if(sa)return oa;sa=1;var e=function(){if(ea)return Qi;ea=1;var e=lu()(au(),"DataView");return Qi=e}(),t=pu(),r=function(){if(ra)return ta;ra=1;var e=lu()(au(),"Promise");return ta=e}(),n=Yd(),u=function(){if(aa)return ia;aa=1;var e=lu()(au(),"WeakMap");return ia=e}(),i=su(),a=hu(),o="[object Map]",s="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",h=a(e),l=a(t),p=a(r),v=a(n),D=a(u),m=i;return(e&&m(new e(new ArrayBuffer(1)))!=f||t&&m(new t)!=o||r&&m(r.resolve())!=s||n&&m(new n)!=c||u&&m(new u)!=d)&&(m=function(e){var t=i(e),r="[object Object]"==t?e.constructor:void 0,n=r?a(r):"";if(n)switch(n){case h:return f;case l:return o;case p:return s;case v:return c;case D:return d}return t}),oa=m}function Xd(){if(ha)return fa;ha=1;var e=au().Uint8Array;return fa=e}function Qd(){if(pa)return la;pa=1;var e=Xd();return la=function(t){var r=new t.constructor(t.byteLength);return new e(r).set(new e(t)),r}}function ef(){if(Ca)return _a;Ca=1;var e=Qd();return _a=function(t,r){var n=r?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},_a}function tf(){if(Fa)return Aa;Fa=1;var e=Qd(),t=function(){if(Da)return va;Da=1;var e=Qd();return va=function(t,r){var n=r?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},va}(),r=function(){if(ga)return ma;ga=1;var e=/\w*$/;return ma=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}}(),n=function(){if(Ea)return ya;Ea=1;var e=ou(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;return ya=function(e){return r?Object(r.call(e)):{}}}(),u=ef();return Aa=function(i,a,o){var s=i.constructor;switch(a){case"[object ArrayBuffer]":return e(i);case"[object Boolean]":case"[object Date]":return new s(+i);case"[object DataView]":return t(i,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(i,o);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(i);case"[object RegExp]":return r(i);case"[object Symbol]":return n(i)}}}function rf(){if(wa)return ba;wa=1;var e=cu(),t=Object.create,r=function(){function r(){}return function(n){if(!e(n))return{};if(t)return t(n);r.prototype=n;var u=new r;return r.prototype=void 0,u}}();return ba=r}function nf(){if(Ba)return xa;Ba=1;var e=rf(),t=qd(),r=_i();return xa=function(n){return"function"!=typeof n.constructor||r(n)?{}:e(t(n))}}function uf(){if(Oa)return Na;Oa=1;var e=function(){if(ja)return ka;ja=1;var e=Jd(),t=bu();return ka=function(r){return t(r)&&"[object Map]"==e(r)}}(),t=Uu(),r=gi(),n=r&&r.isMap,u=n?t(n):e;return Na=u}function af(){if(Za)return Ta;Za=1;var e=function(){if(Ia)return Sa;Ia=1;var e=Jd(),t=bu();return Sa=function(r){return t(r)&&"[object Set]"==e(r)}}(),t=Uu(),r=gi(),n=r&&r.isSet,u=n?t(n):e;return Ta=u}function of(){if(Ma)return Pa;Ma=1;var e=yu(),t=Eu(),r=Au(),n=function(){if(si)return oi;si=1;var e=Fu(),t=bi();return oi=function(r,n){return r&&e(n,t(n),r)},oi}(),u=function(){if(Di)return vi;Di=1;var e=Fu(),t=xi();return vi=function(r,n){return r&&e(n,t(n),r)},vi}(),i=Ld(),a=$d(),o=function(){if(Mi)return Pi;Mi=1;var e=Fu(),t=Vd();return Pi=function(r,n){return e(r,t(r),n)},Pi}(),s=function(){if(qi)return Gi;qi=1;var e=Fu(),t=Hd();return Gi=function(r,n){return e(r,t(r),n)},Gi}(),c=Kd(),d=function(){if(Xi)return Ji;Xi=1;var e=Wd(),t=Hd(),r=xi();return Ji=function(n){return e(n,r,t)}}(),f=Jd(),h=function(){if(da)return ca;da=1;var e=Object.prototype.hasOwnProperty;return ca=function(t){var r=t.length,n=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}}(),l=tf(),p=nf(),v=xu(),D=Lu(),m=uf(),g=cu(),y=af(),E=bi(),_=xi(),C="[object Arguments]",A="[object Function]",F="[object Object]",b={};return b[C]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object DataView]"]=b["[object Boolean]"]=b["[object Date]"]=b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Map]"]=b["[object Number]"]=b[F]=b["[object RegExp]"]=b["[object Set]"]=b["[object String]"]=b["[object Symbol]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b["[object Error]"]=b[A]=b["[object WeakMap]"]=!1,Pa=function w(x,B,k,j,N,O){var S,I=1&B,T=2&B,Z=4&B;if(k&&(S=N?k(x,j,N,O):k(x)),void 0!==S)return S;if(!g(x))return x;var P=v(x);if(P){if(S=h(x),!I)return a(x,S)}else{var M=f(x),z=M==A||"[object GeneratorFunction]"==M;if(D(x))return i(x,I);if(M==F||M==C||z&&!N){if(S=T||z?{}:p(x),!I)return T?s(x,u(S,x)):o(x,n(S,x))}else{if(!b[M])return N?x:{};S=l(x,M,I)}}O||(O=new e);var L=O.get(x);if(L)return L;O.set(x,S),y(x)?x.forEach((function(e){S.add(w(e,B,k,e,x,O))})):m(x)&&x.forEach((function(e,t){S.set(t,w(e,B,k,t,x,O))}));var $=P?void 0:(Z?T?d:c:T?_:E)(x);return t($||x,(function(e,t){$&&(e=x[t=e]),r(S,t,w(e,B,k,t,x,O))})),S},Pa}function sf(){if(La)return za;La=1;var e=of();return za=function(t){return e(t,4)}}function cf(){if(Ra)return $a;return Ra=1,$a=function(e){return function(){return e}}}function df(){if(qa)return Ga;qa=1;var e=(Va||(Va=1,Ua=function(e){return function(t,r,n){for(var u=-1,i=Object(t),a=n(t),o=a.length;o--;){var s=a[e?o:++u];if(!1===r(i[s],s,i))break}return t}}),Ua),t=e();return Ga=t}function ff(){if(Wa)return Ha;Wa=1;var e=df(),t=bi();return Ha=function(r,n){return r&&e(r,n,t)}}function hf(){if(Xa)return Ja;Xa=1;var e=ff(),t=function(){if(Ya)return Ka;Ya=1;var e=Fi();return Ka=function(t,r){return function(n,u){if(null==n)return n;if(!e(n))return t(n,u);for(var i=n.length,a=r?i:-1,o=Object(n);(r?a--:++a<i)&&!1!==u(o[a],a,o););return n}}}()(e);return Ja=t}function lf(){if(eo)return Qa;return eo=1,Qa=function(e){return e}}function pf(){if(ro)return to;ro=1;var e=lf();return to=function(t){return"function"==typeof t?t:e}}function vf(){if(uo)return no;uo=1;var e=Eu(),t=hf(),r=pf(),n=xu();return no=function(u,i){return(n(u)?e:t)(u,r(i))}}function Df(){return ao?io:(ao=1,io=vf())}function mf(){if(vo)return po;vo=1;var e=gu(),t=fo?co:(fo=1,co=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}),r=lo?ho:(lo=1,ho=function(e){return this.__data__.has(e)});function n(t){var r=-1,n=null==t?0:t.length;for(this.__data__=new e;++r<n;)this.add(t[r])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,po=n}function gf(){if(yo)return go;return yo=1,go=function(e,t){return e.has(t)},go}function yf(){if(_o)return Eo;_o=1;var e=mf(),t=mo?Do:(mo=1,Do=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}),r=gf();return Eo=function(n,u,i,a,o,s){var c=1&i,d=n.length,f=u.length;if(d!=f&&!(c&&f>d))return!1;var h=s.get(n),l=s.get(u);if(h&&l)return h==u&&l==n;var p=-1,v=!0,D=2&i?new e:void 0;for(s.set(n,u),s.set(u,n);++p<d;){var m=n[p],g=u[p];if(a)var y=c?a(g,m,p,u,n,s):a(m,g,p,n,u,s);if(void 0!==y){if(y)continue;v=!1;break}if(D){if(!t(u,(function(e,t){if(!r(D,t)&&(m===e||o(m,e,i,a,s)))return D.push(t)}))){v=!1;break}}else if(m!==g&&!o(m,g,i,a,s)){v=!1;break}}return s.delete(n),s.delete(u),v},Eo}function Ef(){if(bo)return Fo;return bo=1,Fo=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}}function _f(){if(xo)return wo;xo=1;var e=ou(),t=Xd(),r=ru(),n=yf(),u=(Ao||(Ao=1,Co=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}),Co),i=Ef(),a=e?e.prototype:void 0,o=a?a.valueOf:void 0;return wo=function(e,a,s,c,d,f,h){switch(s){case"[object DataView]":if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=a.byteLength||!f(new t(e),new t(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+e,+a);case"[object Error]":return e.name==a.name&&e.message==a.message;case"[object RegExp]":case"[object String]":return e==a+"";case"[object Map]":var l=u;case"[object Set]":var p=1&c;if(l||(l=i),e.size!=a.size&&!p)return!1;var v=h.get(e);if(v)return v==a;c|=2,h.set(e,a);var D=n(l(e),l(a),c,d,f,h);return h.delete(e),D;case"[object Symbol]":if(o)return o.call(e)==o.call(a)}return!1},wo}function Cf(){if(No)return jo;No=1;var e=yu(),t=yf(),r=_f(),n=function(){if(ko)return Bo;ko=1;var e=Kd(),t=Object.prototype.hasOwnProperty;return Bo=function(r,n,u,i,a,o){var s=1&u,c=e(r),d=c.length;if(d!=e(n).length&&!s)return!1;for(var f=d;f--;){var h=c[f];if(!(s?h in n:t.call(n,h)))return!1}var l=o.get(r),p=o.get(n);if(l&&p)return l==n&&p==r;var v=!0;o.set(r,n),o.set(n,r);for(var D=s;++f<d;){var m=r[h=c[f]],g=n[h];if(i)var y=s?i(g,m,h,n,r,o):i(m,g,h,r,n,o);if(!(void 0===y?m===g||a(m,g,u,i,o):y)){v=!1;break}D||(D="constructor"==h)}if(v&&!D){var E=r.constructor,_=n.constructor;E==_||!("constructor"in r)||!("constructor"in n)||"function"==typeof E&&E instanceof E&&"function"==typeof _&&_ instanceof _||(v=!1)}return o.delete(r),o.delete(n),v},Bo}(),u=Jd(),i=xu(),a=Lu(),o=yi(),s="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype.hasOwnProperty;return jo=function(h,l,p,v,D,m){var g=i(h),y=i(l),E=g?c:u(h),_=y?c:u(l),C=(E=E==s?d:E)==d,A=(_=_==s?d:_)==d,F=E==_;if(F&&a(h)){if(!a(l))return!1;g=!0,C=!1}if(F&&!C)return m||(m=new e),g||o(h)?t(h,l,p,v,D,m):r(h,l,E,p,v,D,m);if(!(1&p)){var b=C&&f.call(h,"__wrapped__"),w=A&&f.call(l,"__wrapped__");if(b||w){var x=b?h.value():h,B=w?l.value():l;return m||(m=new e),D(x,B,p,v,m)}}return!!F&&(m||(m=new e),n(h,l,p,v,D,m))},jo}function Af(){if(So)return Oo;So=1;var e=Cf(),t=bu();return Oo=function r(n,u,i,a,o){return n===u||(null==n||null==u||!t(n)&&!t(u)?n!=n&&u!=u:e(n,u,i,a,r,o))},Oo}function Ff(){if(Po)return Zo;Po=1;var e=cu();return Zo=function(t){return t==t&&!e(t)}}function bf(){if($o)return Lo;return $o=1,Lo=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}},Lo}function wf(){if(Uo)return Ro;Uo=1;var e=function(){if(To)return Io;To=1;var e=yu(),t=Af();return Io=function(r,n,u,i){var a=u.length,o=a,s=!i;if(null==r)return!o;for(r=Object(r);a--;){var c=u[a];if(s&&c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++a<o;){var d=(c=u[a])[0],f=r[d],h=c[1];if(s&&c[2]){if(void 0===f&&!(d in r))return!1}else{var l=new e;if(i)var p=i(f,h,d,r,n,l);if(!(void 0===p?t(h,f,3,i,l):p))return!1}}return!0},Io}(),t=function(){if(zo)return Mo;zo=1;var e=Ff(),t=bi();return Mo=function(r){for(var n=t(r),u=n.length;u--;){var i=n[u],a=r[i];n[u]=[i,a,e(a)]}return n},Mo}(),r=bf();return Ro=function(n){var u=t(n);return 1==u.length&&u[0][2]?r(u[0][0],u[0][1]):function(t){return t===n||e(t,n,u)}},Ro}function xf(){if(Go)return Vo;Go=1;var e=su(),t=bu();return Vo=function(r){return"symbol"==typeof r||t(r)&&"[object Symbol]"==e(r)}}function Bf(){if(Ho)return qo;Ho=1;var e=xu(),t=xf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;return qo=function(u,i){if(e(u))return!1;var a=typeof u;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=u&&!t(u))||(n.test(u)||!r.test(u)||null!=i&&u in Object(i))}}function kf(){if(Jo)return Yo;Jo=1;var e=function(){if(Ko)return Wo;Ko=1;var e=gu();function t(r,n){if("function"!=typeof r||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var u=function(){var e=arguments,t=n?n.apply(this,e):e[0],i=u.cache;if(i.has(t))return i.get(t);var a=r.apply(this,e);return u.cache=i.set(t,a)||i,a};return u.cache=new(t.Cache||e),u}return t.Cache=e,Wo=t}();return Yo=function(t){var r=e(t,(function(e){return 500===n.size&&n.clear(),e})),n=r.cache;return r},Yo}function jf(){if(ts)return es;return ts=1,es=function(e,t){for(var r=-1,n=null==e?0:e.length,u=Array(n);++r<n;)u[r]=t(e[r],r,e);return u}}function Nf(){if(is)return us;is=1;var e=function(){if(ns)return rs;ns=1;var e=ou(),t=jf(),r=xu(),n=xf(),u=e?e.prototype:void 0,i=u?u.toString:void 0;return rs=function e(u){if("string"==typeof u)return u;if(r(u))return t(u,e)+"";if(n(u))return i?i.call(u):"";var a=u+"";return"0"==a&&1/u==-1/0?"-0":a},rs}();return us=function(t){return null==t?"":e(t)}}function Of(){if(os)return as;os=1;var e=xu(),t=Bf(),r=function(){if(Qo)return Xo;Qo=1;var e=kf(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(t,(function(e,t,u,i){n.push(u?i.replace(r,"$1"):t||e)})),n}));return Xo=n}(),n=Nf();return as=function(u,i){return e(u)?u:t(u,i)?[u]:r(n(u))}}function Sf(){if(cs)return ss;cs=1;var e=xf();return ss=function(t){if("string"==typeof t||e(t))return t;var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r}}function If(){if(fs)return ds;fs=1;var e=Of(),t=Sf();return ds=function(r,n){for(var u=0,i=(n=e(n,r)).length;null!=r&&u<i;)r=r[t(n[u++])];return u&&u==i?r:void 0}}function Tf(){if(ms)return Ds;ms=1;var e=Of(),t=wu(),r=xu(),n=$u(),u=Ru(),i=Sf();return Ds=function(a,o,s){for(var c=-1,d=(o=e(o,a)).length,f=!1;++c<d;){var h=i(o[c]);if(!(f=null!=a&&s(a,h)))break;a=a[h]}return f||++c!=d?f:!!(d=null==a?0:a.length)&&u(d)&&n(h,d)&&(r(a)||t(a))},Ds}function Zf(){if(ys)return gs;ys=1;var e=(vs||(vs=1,ps=function(e,t){return null!=e&&t in Object(e)}),ps),t=Tf();return gs=function(r,n){return null!=r&&t(r,n,e)}}function Pf(){if(_s)return Es;_s=1;var e=Af(),t=function(){if(ls)return hs;ls=1;var e=If();return hs=function(t,r,n){var u=null==t?void 0:e(t,r);return void 0===u?n:u}}(),r=Zf(),n=Bf(),u=Ff(),i=bf(),a=Sf();return Es=function(o,s){return n(o)&&u(s)?i(a(o),s):function(n){var u=t(n,o);return void 0===u&&u===s?r(n,o):e(s,u,3)}}}function Mf(){if(As)return Cs;return As=1,Cs=function(e){return function(t){return null==t?void 0:t[e]}},Cs}function zf(){if(xs)return ws;xs=1;var e=Mf(),t=function(){if(bs)return Fs;bs=1;var e=If();return Fs=function(t){return function(r){return e(r,t)}}}(),r=Bf(),n=Sf();return ws=function(u){return r(u)?e(n(u)):t(u)}}function Lf(){if(ks)return Bs;ks=1;var e=wf(),t=Pf(),r=lf(),n=xu(),u=zf();return Bs=function(i){return"function"==typeof i?i:null==i?r:"object"==typeof i?n(i)?t(i[0],i[1]):e(i):u(i)}}function $f(){if(Ns)return js;Ns=1;var e=Rd(),t=function(){if(so)return oo;so=1;var e=hf();return oo=function(t,r){var n=[];return e(t,(function(e,t,u){r(e,t,u)&&n.push(e)})),n}}(),r=Lf(),n=xu();return js=function(u,i){return(n(u)?e:t)(u,r(i,3))}}function Rf(){if(Ts)return Is;Ts=1;var e=function(){if(Ss)return Os;Ss=1;var e=Object.prototype.hasOwnProperty;return Os=function(t,r){return null!=t&&e.call(t,r)},Os}(),t=Tf();return Is=function(r,n){return null!=r&&t(r,n,e)}}function Uf(){if(Ps)return Zs;Ps=1;var e=Ai(),t=Jd(),r=wu(),n=xu(),u=Fi(),i=Lu(),a=_i(),o=yi(),s=Object.prototype.hasOwnProperty;return Zs=function(c){if(null==c)return!0;if(u(c)&&(n(c)||"string"==typeof c||"function"==typeof c.splice||i(c)||o(c)||r(c)))return!c.length;var d=t(c);if("[object Map]"==d||"[object Set]"==d)return!c.size;if(a(c))return!e(c).length;for(var f in c)if(s.call(c,f))return!1;return!0},Zs}function Vf(){if(zs)return Ms;return zs=1,Ms=function(e){return void 0===e}}function Gf(){if($s)return Ls;$s=1;var e=hf(),t=Fi();return Ls=function(r,n){var u=-1,i=t(r)?Array(r.length):[];return e(r,(function(e,t,r){i[++u]=n(e,t,r)})),i},Ls}function qf(){if(Us)return Rs;Us=1;var e=jf(),t=Lf(),r=Gf(),n=xu();return Rs=function(u,i){return(n(u)?e:r)(u,t(i,3))}}function Hf(){if(Ks)return Ws;Ks=1;var e=Gs?Vs:(Gs=1,Vs=function(e,t,r,n){var u=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++u]);++u<i;)r=t(r,e[u],u,e);return r}),t=hf(),r=Lf(),n=Hs?qs:(Hs=1,qs=function(e,t,r,n,u){return u(e,(function(e,u,i){r=n?(n=!1,e):t(r,e,u,i)})),r}),u=xu();return Ws=function(i,a,o){var s=u(i)?e:n,c=arguments.length<3;return s(i,r(a,4),o,c,t)},Ws}function Wf(){if(ic)return uc;ic=1;var e=function(){if(Qs)return Xs;Qs=1;var e=Mf()("length");return Xs=e}(),t=function(){if(tc)return ec;tc=1;var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");return ec=function(t){return e.test(t)}}(),r=function(){if(nc)return rc;nc=1;var e="\\ud800-\\udfff",t="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",u="[^"+e+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",o="(?:"+r+"|"+n+")?",s="[\\ufe0e\\ufe0f]?",c=s+o+"(?:\\u200d(?:"+[u,i,a].join("|")+")"+s+o+")*",d="(?:"+[u+r+"?",r,i,a,t].join("|")+")",f=RegExp(n+"(?="+n+")|"+d+c,"g");return rc=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}}();return uc=function(n){return t(n)?r(n):e(n)}}function Kf(){if(oc)return ac;oc=1;var e=Ai(),t=Jd(),r=Fi(),n=function(){if(Js)return Ys;Js=1;var e=su(),t=xu(),r=bu();return Ys=function(n){return"string"==typeof n||!t(n)&&r(n)&&"[object String]"==e(n)}}(),u=Wf();return ac=function(i){if(null==i)return 0;if(r(i))return n(i)?u(i):i.length;var a=t(i);return"[object Map]"==a||"[object Set]"==a?i.size:e(i).length}}function Yf(){if(cc)return sc;cc=1;var e=Eu(),t=rf(),r=ff(),n=Lf(),u=qd(),i=xu(),a=Lu(),o=du(),s=cu(),c=yi();return sc=function(d,f,h){var l=i(d),p=l||a(d)||c(d);if(f=n(f,4),null==h){var v=d&&d.constructor;h=p?l?new v:[]:s(d)&&o(v)?t(u(d)):{}}return(p?e:r)(d,(function(e,t,r){return f(h,e,t,r)})),h}}function Jf(){if(lc)return hc;lc=1;var e=Gd(),t=function(){if(fc)return dc;fc=1;var e=ou(),t=wu(),r=xu(),n=e?e.isConcatSpreadable:void 0;return dc=function(e){return r(e)||t(e)||!!(n&&e&&e[n])}}();return hc=function r(n,u,i,a,o){var s=-1,c=n.length;for(i||(i=t),o||(o=[]);++s<c;){var d=n[s];u>0&&i(d)?u>1?r(d,u-1,i,a,o):e(o,d):a||(o[o.length]=d)}return o},hc}function Xf(){if(mc)return Dc;mc=1;var e=vc?pc:(vc=1,pc=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}),t=Math.max;return Dc=function(r,n,u){return n=t(void 0===n?r.length-1:n,0),function(){for(var i=arguments,a=-1,o=t(i.length-n,0),s=Array(o);++a<o;)s[a]=i[n+a];a=-1;for(var c=Array(n+1);++a<n;)c[a]=i[a];return c[n]=u(s),e(r,this,c)}},Dc}function Qf(){if(Ac)return Cc;Ac=1;var e=function(){if(yc)return gc;yc=1;var e=cf(),t=_u(),r=lf();return gc=t?function(r,n){return t(r,"toString",{configurable:!0,enumerable:!1,value:e(n),writable:!0})}:r}(),t=function(){if(_c)return Ec;_c=1;var e=Date.now;return Ec=function(t){var r=0,n=0;return function(){var u=e(),i=16-(u-n);if(n=u,i>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},Ec}(),r=t(e);return Cc=r}function eh(){if(bc)return Fc;bc=1;var e=lf(),t=Xf(),r=Qf();return Fc=function(n,u){return r(t(n,u,e),n+"")}}function th(){if(xc)return wc;return xc=1,wc=function(e,t,r,n){for(var u=e.length,i=r+(n?1:-1);n?i--:++i<u;)if(t(e[i],i,e))return i;return-1}}function rh(){if(Sc)return Oc;Sc=1;var e=th(),t=kc?Bc:(kc=1,Bc=function(e){return e!=e}),r=Nc?jc:(Nc=1,jc=function(e,t,r){for(var n=r-1,u=e.length;++n<u;)if(e[n]===t)return n;return-1});return Oc=function(n,u,i){return u==u?r(n,u,i):e(n,t,i)}}function nh(){if($c)return Lc;$c=1;var e=Yd(),t=zc?Mc:(zc=1,Mc=function(){}),r=Ef(),n=e&&1/r(new e([,-0]))[1]==1/0?function(t){return new e(t)}:t;return Lc=n}function uh(){if(Uc)return Rc;Uc=1;var e=mf(),t=function(){if(Tc)return Ic;Tc=1;var e=rh();return Ic=function(t,r){return!(null==t||!t.length)&&e(t,r,0)>-1}}(),r=Pc?Zc:(Pc=1,Zc=function(e,t,r){for(var n=-1,u=null==e?0:e.length;++n<u;)if(r(t,e[n]))return!0;return!1}),n=gf(),u=nh(),i=Ef();return Rc=function(a,o,s){var c=-1,d=t,f=a.length,h=!0,l=[],p=l;if(s)h=!1,d=r;else if(f>=200){var v=o?null:u(a);if(v)return i(v);h=!1,d=n,p=new e}else p=o?[]:l;e:for(;++c<f;){var D=a[c],m=o?o(D):D;if(D=s||0!==D?D:0,h&&m==m){for(var g=p.length;g--;)if(p[g]===m)continue e;o&&p.push(m),l.push(D)}else d(p,m,s)||(p!==l&&p.push(m),l.push(D))}return l}}function ih(){if(Gc)return Vc;Gc=1;var e=Fi(),t=bu();return Vc=function(r){return t(r)&&e(r)}}function ah(){if(Hc)return qc;Hc=1;var e=Jf(),t=eh(),r=uh(),n=ih(),u=t((function(t){return r(e(t,1,n,!0))}));return qc=u}function oh(){if(Jc)return Yc;Jc=1;var e=function(){if(Kc)return Wc;Kc=1;var e=jf();return Wc=function(t,r){return e(r,(function(e){return t[e]}))},Wc}(),t=bi();return Yc=function(r){return null==r?[]:e(r,t(r))}}function sh(){if(Qc)return Xc;var e;Qc=1;try{e={clone:sf(),constant:cf(),each:Df(),filter:$f(),has:Rf(),isArray:xu(),isEmpty:Uf(),isFunction:du(),isUndefined:Vf(),keys:bi(),map:qf(),reduce:Hf(),size:Kf(),transform:Yf(),union:ah(),values:oh()}}catch(e){}return e||(e=window._),Xc=e}function ch(){if(td)return ed;td=1;var e=sh();ed=u;var t="\0",r="\0",n="";function u(t){this._isDirected=!e.has(t,"directed")||t.directed,this._isMultigraph=!!e.has(t,"multigraph")&&t.multigraph,this._isCompound=!!e.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(e,t){e[t]?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function o(r,u,i,a){var o=""+u,s=""+i;if(!r&&o>s){var c=o;o=s,s=c}return o+n+s+n+(e.isUndefined(a)?t:a)}function s(e,t){return o(e,t.v,t.w,t.name)}return u.prototype._nodeCount=0,u.prototype._edgeCount=0,u.prototype.isDirected=function(){return this._isDirected},u.prototype.isMultigraph=function(){return this._isMultigraph},u.prototype.isCompound=function(){return this._isCompound},u.prototype.setGraph=function(e){return this._label=e,this},u.prototype.graph=function(){return this._label},u.prototype.setDefaultNodeLabel=function(t){return e.isFunction(t)||(t=e.constant(t)),this._defaultNodeLabelFn=t,this},u.prototype.nodeCount=function(){return this._nodeCount},u.prototype.nodes=function(){return e.keys(this._nodes)},u.prototype.sources=function(){var t=this;return e.filter(this.nodes(),(function(r){return e.isEmpty(t._in[r])}))},u.prototype.sinks=function(){var t=this;return e.filter(this.nodes(),(function(r){return e.isEmpty(t._out[r])}))},u.prototype.setNodes=function(t,r){var n=arguments,u=this;return e.each(t,(function(e){n.length>1?u.setNode(e,r):u.setNode(e)})),this},u.prototype.setNode=function(t,n){return e.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=r,this._children[t]={},this._children[r][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},u.prototype.node=function(e){return this._nodes[e]},u.prototype.hasNode=function(t){return e.has(this._nodes,t)},u.prototype.removeNode=function(t){var r=this;if(e.has(this._nodes,t)){var n=function(e){r.removeEdge(r._edgeObjs[e])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],e.each(this.children(t),(function(e){r.setParent(e)})),delete this._children[t]),e.each(e.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],e.each(e.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},u.prototype.setParent=function(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(n))n=r;else{for(var u=n+="";!e.isUndefined(u);u=this.parent(u))if(u===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this},u.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},u.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==r)return t}},u.prototype.children=function(t){if(e.isUndefined(t)&&(t=r),this._isCompound){var n=this._children[t];if(n)return e.keys(n)}else{if(t===r)return this.nodes();if(this.hasNode(t))return[]}},u.prototype.predecessors=function(t){var r=this._preds[t];if(r)return e.keys(r)},u.prototype.successors=function(t){var r=this._sucs[t];if(r)return e.keys(r)},u.prototype.neighbors=function(t){var r=this.predecessors(t);if(r)return e.union(r,this.successors(t))},u.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},u.prototype.filterNodes=function(t){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var n=this;e.each(this._nodes,(function(e,n){t(n)&&r.setNode(n,e)})),e.each(this._edgeObjs,(function(e){r.hasNode(e.v)&&r.hasNode(e.w)&&r.setEdge(e,n.edge(e))}));var u={};function i(e){var t=n.parent(e);return void 0===t||r.hasNode(t)?(u[e]=t,t):t in u?u[t]:i(t)}return this._isCompound&&e.each(r.nodes(),(function(e){r.setParent(e,i(e))})),r},u.prototype.setDefaultEdgeLabel=function(t){return e.isFunction(t)||(t=e.constant(t)),this._defaultEdgeLabelFn=t,this},u.prototype.edgeCount=function(){return this._edgeCount},u.prototype.edges=function(){return e.values(this._edgeObjs)},u.prototype.setPath=function(t,r){var n=this,u=arguments;return e.reduce(t,(function(e,t){return u.length>1?n.setEdge(e,t,r):n.setEdge(e,t),t})),this},u.prototype.setEdge=function(){var t,r,n,u,a=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(t=s.v,r=s.w,n=s.name,2===arguments.length&&(u=arguments[1],a=!0)):(t=s,r=arguments[1],n=arguments[3],arguments.length>2&&(u=arguments[2],a=!0)),t=""+t,r=""+r,e.isUndefined(n)||(n=""+n);var c=o(this._isDirected,t,r,n);if(e.has(this._edgeLabels,c))return a&&(this._edgeLabels[c]=u),this;if(!e.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(r),this._edgeLabels[c]=a?u:this._defaultEdgeLabelFn(t,r,n);var d=function(e,t,r,n){var u=""+t,i=""+r;if(!e&&u>i){var a=u;u=i,i=a}var o={v:u,w:i};n&&(o.name=n);return o}(this._isDirected,t,r,n);return t=d.v,r=d.w,Object.freeze(d),this._edgeObjs[c]=d,i(this._preds[r],t),i(this._sucs[t],r),this._in[r][c]=d,this._out[t][c]=d,this._edgeCount++,this},u.prototype.edge=function(e,t,r){var n=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,e,t,r);return this._edgeLabels[n]},u.prototype.hasEdge=function(t,r,n){var u=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,t,r,n);return e.has(this._edgeLabels,u)},u.prototype.removeEdge=function(e,t,r){var n=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,e,t,r),u=this._edgeObjs[n];return u&&(e=u.v,t=u.w,delete this._edgeLabels[n],delete this._edgeObjs[n],a(this._preds[t],e),a(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this},u.prototype.inEdges=function(t,r){var n=this._in[t];if(n){var u=e.values(n);return r?e.filter(u,(function(e){return e.v===r})):u}},u.prototype.outEdges=function(t,r){var n=this._out[t];if(n){var u=e.values(n);return r?e.filter(u,(function(e){return e.w===r})):u}},u.prototype.nodeEdges=function(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))},ed}function dh(){return id?ud:(id=1,ud={Graph:ch(),version:nd?rd:(nd=1,rd="2.1.8")})}function fh(){if(od)return ad;od=1;var e=sh(),t=ch();function r(t){return e.map(t.nodes(),(function(r){var n=t.node(r),u=t.parent(r),i={v:r};return e.isUndefined(n)||(i.value=n),e.isUndefined(u)||(i.parent=u),i}))}function n(t){return e.map(t.edges(),(function(r){var n=t.edge(r),u={v:r.v,w:r.w};return e.isUndefined(r.name)||(u.name=r.name),e.isUndefined(n)||(u.value=n),u}))}return ad={write:function(t){var u={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:r(t),edges:n(t)};e.isUndefined(t.graph())||(u.value=e.clone(t.graph()));return u},read:function(r){var n=new t(r.options).setGraph(r.value);return e.each(r.nodes,(function(e){n.setNode(e.v,e.value),e.parent&&n.setParent(e.v,e.parent)})),e.each(r.edges,(function(e){n.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),n}}}function hh(){if(cd)return sd;cd=1;var e=sh();return sd=function(t){var r,n={},u=[];function i(u){e.has(n,u)||(n[u]=!0,r.push(u),e.each(t.successors(u),i),e.each(t.predecessors(u),i))}return e.each(t.nodes(),(function(e){r=[],i(e),r.length&&u.push(r)})),u},sd}function lh(){if(fd)return dd;fd=1;var e=sh();function t(){this._arr=[],this._keyIndices={}}return dd=t,t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},t.prototype.has=function(t){return e.has(this._keyIndices,t)},t.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},t.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(t,r){var n=this._keyIndices;if(t=String(t),!e.has(n,t)){var u=this._arr,i=u.length;return n[t]=i,u.push({key:t,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},t.prototype.decrease=function(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+t);this._arr[r].priority=t,this._decrease(r)},t.prototype._heapify=function(e){var t=this._arr,r=2*e,n=r+1,u=e;r<t.length&&(u=t[r].priority<t[u].priority?r:u,n<t.length&&(u=t[n].priority<t[u].priority?n:u),u!==e&&(this._swap(e,u),this._heapify(u)))},t.prototype._decrease=function(e){for(var t,r=this._arr,n=r[e].priority;0!==e&&!(r[t=e>>1].priority<n);)this._swap(e,t),e=t},t.prototype._swap=function(e,t){var r=this._arr,n=this._keyIndices,u=r[e],i=r[t];r[e]=i,r[t]=u,n[i.key]=e,n[u.key]=t},dd}function ph(){if(ld)return hd;ld=1;var e=sh(),t=lh();hd=function(e,n,u,i){return function(e,r,n,u){var i,a,o={},s=new t,c=function(e){var t=e.v!==i?e.v:e.w,r=o[t],u=n(e),c=a.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+u);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(t,c))};e.nodes().forEach((function(e){var t=e===r?0:Number.POSITIVE_INFINITY;o[e]={distance:t},s.add(e,t)}));for(;s.size()>0&&(i=s.removeMin(),(a=o[i]).distance!==Number.POSITIVE_INFINITY);)u(i).forEach(c);return o}(e,String(n),u||r,i||function(t){return e.outEdges(t)})};var r=e.constant(1);return hd}function vh(){if(vd)return pd;vd=1;var e=ph(),t=sh();return pd=function(r,n,u){return t.transform(r.nodes(),(function(t,i){t[i]=e(r,i,n,u)}),{})}}function Dh(){if(md)return Dd;md=1;var e=sh();return Dd=function(t){var r=0,n=[],u={},i=[];function a(o){var s=u[o]={onStack:!0,lowlink:r,index:r++};if(n.push(o),t.successors(o).forEach((function(t){e.has(u,t)?u[t].onStack&&(s.lowlink=Math.min(s.lowlink,u[t].index)):(a(t),s.lowlink=Math.min(s.lowlink,u[t].lowlink))})),s.lowlink===s.index){var c,d=[];do{c=n.pop(),u[c].onStack=!1,d.push(c)}while(o!==c);i.push(d)}}return t.nodes().forEach((function(t){e.has(u,t)||a(t)})),i},Dd}function mh(){if(yd)return gd;yd=1;var e=sh(),t=Dh();return gd=function(r){return e.filter(t(r),(function(e){return e.length>1||1===e.length&&r.hasEdge(e[0],e[0])}))}}function gh(){if(_d)return Ed;_d=1;var e=sh();Ed=function(e,r,n){return function(e,t,r){var n={},u=e.nodes();return u.forEach((function(e){n[e]={},n[e][e]={distance:0},u.forEach((function(t){e!==t&&(n[e][t]={distance:Number.POSITIVE_INFINITY})})),r(e).forEach((function(r){var u=r.v===e?r.w:r.v,i=t(r);n[e][u]={distance:i,predecessor:e}}))})),u.forEach((function(e){var t=n[e];u.forEach((function(r){var i=n[r];u.forEach((function(r){var n=i[e],u=t[r],a=i[r],o=n.distance+u.distance;o<a.distance&&(a.distance=o,a.predecessor=u.predecessor)}))}))})),n}(e,r||t,n||function(t){return e.outEdges(t)})};var t=e.constant(1);return Ed}function yh(){if(Ad)return Cd;Ad=1;var e=sh();function t(t){var n={},u={},i=[];if(e.each(t.sinks(),(function a(o){if(e.has(u,o))throw new r;e.has(n,o)||(u[o]=!0,n[o]=!0,e.each(t.predecessors(o),a),delete u[o],i.push(o))})),e.size(n)!==t.nodeCount())throw new r;return i}function r(){}return Cd=t,t.CycleException=r,r.prototype=new Error,Cd}function Eh(){if(bd)return Fd;bd=1;var e=yh();return Fd=function(t){try{e(t)}catch(t){if(t instanceof e.CycleException)return!1;throw t}return!0}}function _h(){if(xd)return wd;xd=1;var e=sh();function t(r,n,u,i,a,o){e.has(i,n)||(i[n]=!0,u||o.push(n),e.each(a(n),(function(e){t(r,e,u,i,a,o)})),u&&o.push(n))}return wd=function(r,n,u){e.isArray(n)||(n=[n]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],o={};return e.each(n,(function(e){if(!r.hasNode(e))throw new Error("Graph does not have node: "+e);t(r,e,"post"===u,o,i,a)})),a},wd}function Ch(){if(kd)return Bd;kd=1;var e=_h();return Bd=function(t,r){return e(t,r,"post")}}function Ah(){if(Nd)return jd;Nd=1;var e=_h();return jd=function(t,r){return e(t,r,"pre")}}function Fh(){if(Sd)return Od;Sd=1;var e=sh(),t=ch(),r=lh();return Od=function(n,u){var i,a=new t,o={},s=new r;function c(e){var t=e.v===i?e.w:e.v,r=s.priority(t);if(void 0!==r){var n=u(e);n<r&&(o[t]=i,s.decrease(t,n))}}if(0===n.nodeCount())return a;e.each(n.nodes(),(function(e){s.add(e,Number.POSITIVE_INFINITY),a.setNode(e)})),s.decrease(n.nodes()[0],0);var d=!1;for(;s.size()>0;){if(i=s.removeMin(),e.has(o,i))a.setEdge(i,o[i]);else{if(d)throw new Error("Input graph is not connected: "+n);d=!0}n.nodeEdges(i).forEach(c)}return a}}zd.exports;try{Md=function(){if(Pd)return Zd;Pd=1;var e=dh();return Zd={Graph:e.Graph,json:fh(),alg:Td?Id:(Td=1,Id={components:hh(),dijkstra:ph(),dijkstraAll:vh(),findCycles:mh(),floydWarshall:gh(),isAcyclic:Eh(),postorder:Ch(),preorder:Ah(),prim:Fh(),tarjan:Dh(),topsort:yh()}),version:e.version}}()}catch(e){}Md||(Md=window.graphlib);var bh,wh,xh,Bh,kh,jh,Nh,Oh,Sh,Ih,Th,Zh,Ph,Mh,zh,Lh,$h,Rh,Uh,Vh,Gh,qh,Hh,Wh,Kh,Yh,Jh,Xh,Qh,el,tl,rl,nl,ul,il,al,ol,sl,cl,dl,fl,hl,ll,pl,vl,Dl,ml,gl,yl,El,_l,Cl,Al,Fl,bl,wl,xl,Bl,kl,jl,Nl,Ol,Sl,Il,Tl,Zl,Pl,Ml,zl,Ll,$l,Rl,Ul,Vl,Gl,ql,Hl,Wl,Kl,Yl,Jl,Xl,Ql,ep,tp,rp,np,up,ip,ap,op,sp,cp,dp=Md;function fp(){if(Bh)return xh;Bh=1;var e=ru(),t=Fi(),r=$u(),n=cu();return xh=function(u,i,a){if(!n(a))return!1;var o=typeof i;return!!("number"==o?t(a)&&r(i,a.length):"string"==o&&i in a)&&e(a[i],u)}}function hp(){if(Zh)return Th;Zh=1;var e=function(){if(Ih)return Sh;Ih=1;var e=/\s/;return Sh=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}}(),t=/^\s+/;return Th=function(r){return r?r.slice(0,e(r)+1).replace(t,""):r}}function lp(){if(Lh)return zh;Lh=1;var e=function(){if(Mh)return Ph;Mh=1;var e=hp(),t=cu(),r=xf(),n=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt;return Ph=function(o){if("number"==typeof o)return o;if(r(o))return NaN;if(t(o)){var s="function"==typeof o.valueOf?o.valueOf():o;o=t(s)?s+"":s}if("string"!=typeof o)return 0===o?o:+o;o=e(o);var c=u.test(o);return c||i.test(o)?a(o.slice(2),c?2:8):n.test(o)?NaN:+o}}(),t=1/0;return zh=function(r){return r?(r=e(r))===t||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0}}function pp(){if(Vh)return Uh;Vh=1;var e=th(),t=Lf(),r=function(){if(Rh)return $h;Rh=1;var e=lp();return $h=function(t){var r=e(t),n=r%1;return r==r?n?r-n:r:0}}(),n=Math.max;return Uh=function(u,i,a){var o=null==u?0:u.length;if(!o)return-1;var s=null==a?0:r(a);return s<0&&(s=n(o+s,0)),e(u,t(i,3),s)}}function vp(){if(Wh)return Hh;Wh=1;var e=Jf();return Hh=function(t){return(null==t?0:t.length)?e(t,1):[]}}function Dp(){if(rl)return tl;rl=1;var e=xf();return tl=function(t,r,n){for(var u=-1,i=t.length;++u<i;){var a=t[u],o=r(a);if(null!=o&&(void 0===s?o==o&&!e(o):n(o,s)))var s=o,c=a}return c}}function mp(){if(sl)return ol;sl=1;var e=Cu(),t=ru();return ol=function(r,n,u){(void 0!==u&&!t(r[n],u)||void 0===u&&!(n in r))&&e(r,n,u)},ol}function gp(){if(hl)return fl;return hl=1,fl=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},fl}function yp(){if(Dl)return vl;Dl=1;var e=mp(),t=Ld(),r=ef(),n=$d(),u=nf(),i=wu(),a=xu(),o=ih(),s=Lu(),c=du(),d=cu(),f=function(){if(dl)return cl;dl=1;var e=su(),t=qd(),r=bu(),n=Function.prototype,u=Object.prototype,i=n.toString,a=u.hasOwnProperty,o=i.call(Object);return cl=function(n){if(!r(n)||"[object Object]"!=e(n))return!1;var u=t(n);if(null===u)return!0;var s=a.call(u,"constructor")&&u.constructor;return"function"==typeof s&&s instanceof s&&i.call(s)==o}}(),h=yi(),l=gp(),p=function(){if(pl)return ll;pl=1;var e=Fu(),t=xi();return ll=function(r){return e(r,t(r))}}();return vl=function(v,D,m,g,y,E,_){var C=l(v,m),A=l(D,m),F=_.get(A);if(F)e(v,m,F);else{var b=E?E(C,A,m+"",v,D,_):void 0,w=void 0===b;if(w){var x=a(A),B=!x&&s(A),k=!x&&!B&&h(A);b=A,x||B||k?a(C)?b=C:o(C)?b=n(C):B?(w=!1,b=t(A,!0)):k?(w=!1,b=r(A,!0)):b=[]:f(A)||i(A)?(b=C,i(C)?b=p(C):d(C)&&!c(C)||(b=u(A))):w=!1}w&&(_.set(A,b),y(b,A,g,E,_),_.delete(A)),e(v,m,b)}},vl}function Ep(){if(Fl)return Al;return Fl=1,Al=function(e,t){return e<t}}function _p(){if(Il)return Sl;Il=1;var e=If(),t=function(){if(Ol)return Nl;Ol=1;var e=Au(),t=Of(),r=$u(),n=cu(),u=Sf();return Nl=function(i,a,o,s){if(!n(i))return i;for(var c=-1,d=(a=t(a,i)).length,f=d-1,h=i;null!=h&&++c<d;){var l=u(a[c]),p=o;if("__proto__"===l||"constructor"===l||"prototype"===l)return i;if(c!=f){var v=h[l];void 0===(p=s?s(v,l,h):void 0)&&(p=n(v)?v:r(a[c+1])?[]:{})}e(h,l,p),h=h[l]}return i},Nl}(),r=Of();return Sl=function(n,u,i){for(var a=-1,o=u.length,s={};++a<o;){var c=u[a],d=e(n,c);i(d,c)&&t(s,r(c,n),d)}return s}}function Cp(){if(Vl)return Ul;Vl=1;var e=function(){if(Rl)return $l;Rl=1;var e=Math.ceil,t=Math.max;return $l=function(r,n,u,i){for(var a=-1,o=t(e((n-r)/(u||1)),0),s=Array(o);o--;)s[i?o:++a]=r,r+=u;return s}}(),t=fp(),r=lp();return Ul=function(n){return function(u,i,a){return a&&"number"!=typeof a&&t(u,i,a)&&(i=a=void 0),u=r(u),void 0===i?(i=u,u=0):i=r(i),a=void 0===a?u<i?1:-1:r(a),e(u,i,a,n)}}}function Ap(){if(Xl)return Jl;Xl=1;var e=function(){if(Yl)return Kl;Yl=1;var e=xf();return Kl=function(t,r){if(t!==r){var n=void 0!==t,u=null===t,i=t==t,a=e(t),o=void 0!==r,s=null===r,c=r==r,d=e(r);if(!s&&!d&&!a&&t>r||a&&o&&c&&!s&&!d||u&&o&&c||!n&&c||!i)return 1;if(!u&&!a&&!d&&t<r||d&&n&&i&&!u&&!a||s&&n&&i||!o&&i||!c)return-1}return 0}}();return Jl=function(t,r,n){for(var u=-1,i=t.criteria,a=r.criteria,o=i.length,s=n.length;++u<o;){var c=e(i[u],a[u]);if(c)return u>=s?c:c*("desc"==n[u]?-1:1)}return t.index-r.index}}function Fp(){if(ep)return Ql;ep=1;var e=jf(),t=If(),r=Lf(),n=Gf(),u=Wl?Hl:(Wl=1,Hl=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}),i=Uu(),a=Ap(),o=lf(),s=xu();return Ql=function(c,d,f){d=d.length?e(d,(function(e){return s(e)?function(r){return t(r,1===e.length?e[0]:e)}:e})):[o];var h=-1;d=e(d,i(r));var l=n(c,(function(t,r,n){return{criteria:e(d,(function(e){return e(t)})),index:++h,value:t}}));return u(l,(function(e,t){return a(e,t,f)}))}}try{cp={cloneDeep:function(){if(wh)return bh;wh=1;var e=of();return bh=function(t){return e(t,5)}}(),constant:cf(),defaults:function(){if(jh)return kh;jh=1;var e=eh(),t=ru(),r=fp(),n=xi(),u=Object.prototype,i=u.hasOwnProperty,a=e((function(e,a){e=Object(e);var o=-1,s=a.length,c=s>2?a[2]:void 0;for(c&&r(a[0],a[1],c)&&(s=1);++o<s;)for(var d=a[o],f=n(d),h=-1,l=f.length;++h<l;){var p=f[h],v=e[p];(void 0===v||t(v,u[p])&&!i.call(e,p))&&(e[p]=d[p])}return e}));return kh=a}(),each:Df(),filter:$f(),find:function(){if(qh)return Gh;qh=1;var e=function(){if(Oh)return Nh;Oh=1;var e=Lf(),t=Fi(),r=bi();return Nh=function(n){return function(u,i,a){var o=Object(u);if(!t(u)){var s=e(i,3);u=r(u),i=function(e){return s(o[e],e,o)}}var c=n(u,i,a);return c>-1?o[s?u[c]:c]:void 0}},Nh}(),t=e(pp());return Gh=t}(),flatten:vp(),forEach:vf(),forIn:function(){if(Yh)return Kh;Yh=1;var e=df(),t=pf(),r=xi();return Kh=function(n,u){return null==n?n:e(n,t(u),r)}}(),has:Rf(),isUndefined:Vf(),last:Xh?Jh:(Xh=1,Jh=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}),map:qf(),mapValues:function(){if(el)return Qh;el=1;var e=Cu(),t=ff(),r=Lf();return Qh=function(n,u){var i={};return u=r(u,3),t(n,(function(t,r,n){e(i,r,u(t,r,n))})),i},Qh}(),max:function(){if(al)return il;al=1;var e=Dp(),t=ul?nl:(ul=1,nl=function(e,t){return e>t}),r=lf();return il=function(n){return n&&n.length?e(n,r,t):void 0}}(),merge:function(){if(Cl)return _l;Cl=1;var e=function(){if(gl)return ml;gl=1;var e=yu(),t=mp(),r=df(),n=yp(),u=cu(),i=xi(),a=gp();return ml=function o(s,c,d,f,h){s!==c&&r(c,(function(r,i){if(h||(h=new e),u(r))n(s,c,i,d,o,f,h);else{var l=f?f(a(s,i),r,i+"",s,c,h):void 0;void 0===l&&(l=r),t(s,i,l)}}),i)},ml}(),t=function(){if(El)return yl;El=1;var e=eh(),t=fp();return yl=function(r){return e((function(e,n){var u=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=r.length>3&&"function"==typeof a?(i--,a):void 0,o&&t(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++u<i;){var s=n[u];s&&r(e,s,u,a)}return e}))},yl}(),r=t((function(t,r,n){e(t,r,n)}));return _l=r}(),min:function(){if(wl)return bl;wl=1;var e=Dp(),t=Ep(),r=lf();return bl=function(n){return n&&n.length?e(n,r,t):void 0}}(),minBy:function(){if(Bl)return xl;Bl=1;var e=Dp(),t=Lf(),r=Ep();return xl=function(n,u){return n&&n.length?e(n,t(u,2),r):void 0}}(),now:function(){if(jl)return kl;jl=1;var e=au();return kl=function(){return e.Date.now()}}(),pick:function(){if(Ll)return zl;Ll=1;var e=function(){if(Zl)return Tl;Zl=1;var e=_p(),t=Zf();return Tl=function(r,n){return e(r,n,(function(e,n){return t(r,n)}))}}(),t=function(){if(Ml)return Pl;Ml=1;var e=vp(),t=Xf(),r=Qf();return Pl=function(n){return r(t(n,void 0,e),n+"")}}()((function(t,r){return null==t?{}:e(t,r)}));return zl=t}(),range:function(){if(ql)return Gl;ql=1;var e=Cp()();return Gl=e}(),reduce:Hf(),sortBy:function(){if(rp)return tp;rp=1;var e=Jf(),t=Fp(),r=eh(),n=fp(),u=r((function(r,u){if(null==r)return[];var i=u.length;return i>1&&n(r,u[0],u[1])?u=[]:i>2&&n(u[0],u[1],u[2])&&(u=[u[0]]),t(r,e(u,1),[])}));return tp=u}(),uniqueId:function(){if(up)return np;up=1;var e=Nf(),t=0;return np=function(r){var n=++t;return e(r)+n}}(),values:oh(),zipObject:function(){if(sp)return op;sp=1;var e=Au(),t=ap?ip:(ap=1,ip=function(e,t,r){for(var n=-1,u=e.length,i=t.length,a={};++n<u;){var o=n<i?t[n]:void 0;r(a,e[n],o)}return a});return op=function(r,n){return t(r||[],n||[],e)}}()}}catch(e){}cp||(cp=window._);var bp=cp,wp=xp;function xp(){var e={};e._next=e._prev=e,this._sentinel=e}function Bp(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function kp(e,t){if("_next"!==e&&"_prev"!==e)return t}xp.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Bp(t),t},xp.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Bp(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},xp.prototype.toString=function(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,kp)),r=r._prev;return"["+e.join(", ")+"]"};var jp=bp,Np=dp.Graph,Op=wp,Sp=function(e,t){if(e.nodeCount()<=1)return[];var r=function(e,t){var r=new Np,n=0,u=0;jp.forEach(e.nodes(),(function(e){r.setNode(e,{v:e,in:0,out:0})})),jp.forEach(e.edges(),(function(e){var i=r.edge(e.v,e.w)||0,a=t(e),o=i+a;r.setEdge(e.v,e.w,o),u=Math.max(u,r.node(e.v).out+=a),n=Math.max(n,r.node(e.w).in+=a)}));var i=jp.range(u+n+3).map((function(){return new Op})),a=n+1;return jp.forEach(r.nodes(),(function(e){Zp(i,a,r.node(e))})),{graph:r,buckets:i,zeroIdx:a}}(e,t||Ip),n=function(e,t,r){var n,u=[],i=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;n=a.dequeue();)Tp(e,t,r,n);for(;n=i.dequeue();)Tp(e,t,r,n);if(e.nodeCount())for(var o=t.length-2;o>0;--o)if(n=t[o].dequeue()){u=u.concat(Tp(e,t,r,n,!0));break}}return u}(r.graph,r.buckets,r.zeroIdx);return jp.flatten(jp.map(n,(function(t){return e.outEdges(t.v,t.w)})),!0)},Ip=jp.constant(1);function Tp(e,t,r,n,u){var i=u?[]:void 0;return jp.forEach(e.inEdges(n.v),(function(n){var a=e.edge(n),o=e.node(n.v);u&&i.push({v:n.v,w:n.w}),o.out-=a,Zp(t,r,o)})),jp.forEach(e.outEdges(n.v),(function(n){var u=e.edge(n),i=n.w,a=e.node(i);a.in-=u,Zp(t,r,a)})),e.removeNode(n.v),i}function Zp(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}var Pp=bp,Mp=Sp,zp={run:function(e){var t="greedy"===e.graph().acyclicer?Mp(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],r={},n={};function u(i){Pp.has(n,i)||(n[i]=!0,r[i]=!0,Pp.forEach(e.outEdges(i),(function(e){Pp.has(r,e.w)?t.push(e):u(e.w)})),delete r[i])}return Pp.forEach(e.nodes(),u),t}(e);Pp.forEach(t,(function(t){var r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,Pp.uniqueId("rev"))}))},undo:function(e){Pp.forEach(e.edges(),(function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}}))}};var Lp=bp,$p=dp.Graph,Rp={addDummyNode:Up,simplify:function(e){var t=(new $p).setGraph(e.graph());return Lp.forEach(e.nodes(),(function(r){t.setNode(r,e.node(r))})),Lp.forEach(e.edges(),(function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1},u=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+u.weight,minlen:Math.max(n.minlen,u.minlen)})})),t},asNonCompoundGraph:function(e){var t=new $p({multigraph:e.isMultigraph()}).setGraph(e.graph());return Lp.forEach(e.nodes(),(function(r){e.children(r).length||t.setNode(r,e.node(r))})),Lp.forEach(e.edges(),(function(r){t.setEdge(r,e.edge(r))})),t},successorWeights:function(e){var t=Lp.map(e.nodes(),(function(t){var r={};return Lp.forEach(e.outEdges(t),(function(t){r[t.w]=(r[t.w]||0)+e.edge(t).weight})),r}));return Lp.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=Lp.map(e.nodes(),(function(t){var r={};return Lp.forEach(e.inEdges(t),(function(t){r[t.v]=(r[t.v]||0)+e.edge(t).weight})),r}));return Lp.zipObject(e.nodes(),t)},intersectRect:function(e,t){var r,n,u=e.x,i=e.y,a=t.x-u,o=t.y-i,s=e.width/2,c=e.height/2;if(!a&&!o)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(o)*s>Math.abs(a)*c?(o<0&&(c=-c),r=c*a/o,n=c):(a<0&&(s=-s),r=s,n=s*o/a);return{x:u+r,y:i+n}},buildLayerMatrix:function(e){var t=Lp.map(Lp.range(Vp(e)+1),(function(){return[]}));return Lp.forEach(e.nodes(),(function(r){var n=e.node(r),u=n.rank;Lp.isUndefined(u)||(t[u][n.order]=r)})),t},normalizeRanks:function(e){var t=Lp.min(Lp.map(e.nodes(),(function(t){return e.node(t).rank})));Lp.forEach(e.nodes(),(function(r){var n=e.node(r);Lp.has(n,"rank")&&(n.rank-=t)}))},removeEmptyRanks:function(e){var t=Lp.min(Lp.map(e.nodes(),(function(t){return e.node(t).rank}))),r=[];Lp.forEach(e.nodes(),(function(n){var u=e.node(n).rank-t;r[u]||(r[u]=[]),r[u].push(n)}));var n=0,u=e.graph().nodeRankFactor;Lp.forEach(r,(function(t,r){Lp.isUndefined(t)&&r%u!=0?--n:n&&Lp.forEach(t,(function(t){e.node(t).rank+=n}))}))},addBorderNode:function(e,t,r,n){var u={width:0,height:0};arguments.length>=4&&(u.rank=r,u.order=n);return Up(e,"border",u,t)},maxRank:Vp,partition:function(e,t){var r={lhs:[],rhs:[]};return Lp.forEach(e,(function(e){t(e)?r.lhs.push(e):r.rhs.push(e)})),r},time:function(e,t){var r=Lp.now();try{return t()}finally{console.log(e+" time: "+(Lp.now()-r)+"ms")}},notime:function(e,t){return t()}};function Up(e,t,r,n){var u;do{u=Lp.uniqueId(n)}while(e.hasNode(u));return r.dummy=t,e.setNode(u,r),u}function Vp(e){return Lp.max(Lp.map(e.nodes(),(function(t){var r=e.node(t).rank;if(!Lp.isUndefined(r))return r})))}var Gp=bp,qp=Rp,Hp={run:function(e){e.graph().dummyChains=[],Gp.forEach(e.edges(),(function(t){!function(e,t){var r,n,u,i=t.v,a=e.node(i).rank,o=t.w,s=e.node(o).rank,c=t.name,d=e.edge(t),f=d.labelRank;if(s===a+1)return;for(e.removeEdge(t),u=0,++a;a<s;++u,++a)d.points=[],n={width:0,height:0,edgeLabel:d,edgeObj:t,rank:a},r=qp.addDummyNode(e,"edge",n,"_d"),a===f&&(n.width=d.width,n.height=d.height,n.dummy="edge-label",n.labelpos=d.labelpos),e.setEdge(i,r,{weight:d.weight},c),0===u&&e.graph().dummyChains.push(r),i=r;e.setEdge(i,o,{weight:d.weight},c)}(e,t)}))},undo:function(e){Gp.forEach(e.graph().dummyChains,(function(t){var r,n=e.node(t),u=n.edgeLabel;for(e.setEdge(n.edgeObj,u);n.dummy;)r=e.successors(t)[0],e.removeNode(t),u.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(u.x=n.x,u.y=n.y,u.width=n.width,u.height=n.height),t=r,n=e.node(t)}))}};var Wp=bp,Kp={longestPath:function(e){var t={};Wp.forEach(e.sources(),(function r(n){var u=e.node(n);if(Wp.has(t,n))return u.rank;t[n]=!0;var i=Wp.min(Wp.map(e.outEdges(n),(function(t){return r(t.w)-e.edge(t).minlen})));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),u.rank=i}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}};var Yp=bp,Jp=dp.Graph,Xp=Kp.slack,Qp=function(e){var t,r,n=new Jp({directed:!1}),u=e.nodes()[0],i=e.nodeCount();n.setNode(u,{});for(;ev(n,e)<i;)t=tv(n,e),r=n.hasNode(t.v)?Xp(e,t):-Xp(e,t),rv(n,e,r);return n};function ev(e,t){return Yp.forEach(e.nodes(),(function r(n){Yp.forEach(t.nodeEdges(n),(function(u){var i=u.v,a=n===i?u.w:i;e.hasNode(a)||Xp(t,u)||(e.setNode(a,{}),e.setEdge(n,a,{}),r(a))}))})),e.nodeCount()}function tv(e,t){return Yp.minBy(t.edges(),(function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return Xp(t,r)}))}function rv(e,t,r){Yp.forEach(e.nodes(),(function(e){t.node(e).rank+=r}))}var nv=bp,uv=Qp,iv=Kp.slack,av=Kp.longestPath,ov=dp.alg.preorder,sv=dp.alg.postorder,cv=Rp.simplify,dv=fv;function fv(e){e=cv(e),av(e);var t,r=uv(e);for(pv(r),hv(r,e);t=Dv(r);)gv(r,e,t,mv(r,e,t))}function hv(e,t){var r=sv(e,e.nodes());r=r.slice(0,r.length-1),nv.forEach(r,(function(r){!function(e,t,r){var n=e.node(r),u=n.parent;e.edge(r,u).cutvalue=lv(e,t,r)}(e,t,r)}))}function lv(e,t,r){var n=e.node(r).parent,u=!0,i=t.edge(r,n),a=0;return i||(u=!1,i=t.edge(n,r)),a=i.weight,nv.forEach(t.nodeEdges(r),(function(i){var o,s,c=i.v===r,d=c?i.w:i.v;if(d!==n){var f=c===u,h=t.edge(i).weight;if(a+=f?h:-h,o=r,s=d,e.hasEdge(o,s)){var l=e.edge(r,d).cutvalue;a+=f?-l:l}}})),a}function pv(e,t){arguments.length<2&&(t=e.nodes()[0]),vv(e,{},1,t)}function vv(e,t,r,n,u){var i=r,a=e.node(n);return t[n]=!0,nv.forEach(e.neighbors(n),(function(u){nv.has(t,u)||(r=vv(e,t,r,u,n))})),a.low=i,a.lim=r++,u?a.parent=u:delete a.parent,r}function Dv(e){return nv.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function mv(e,t,r){var n=r.v,u=r.w;t.hasEdge(n,u)||(n=r.w,u=r.v);var i=e.node(n),a=e.node(u),o=i,s=!1;i.lim>a.lim&&(o=a,s=!0);var c=nv.filter(t.edges(),(function(t){return s===yv(e,e.node(t.v),o)&&s!==yv(e,e.node(t.w),o)}));return nv.minBy(c,(function(e){return iv(t,e)}))}function gv(e,t,r,n){var u=r.v,i=r.w;e.removeEdge(u,i),e.setEdge(n.v,n.w,{}),pv(e),hv(e,t),function(e,t){var r=nv.find(e.nodes(),(function(e){return!t.node(e).parent})),n=ov(e,r);n=n.slice(1),nv.forEach(n,(function(r){var n=e.node(r).parent,u=t.edge(r,n),i=!1;u||(u=t.edge(n,r),i=!0),t.node(r).rank=t.node(n).rank+(i?u.minlen:-u.minlen)}))}(e,t)}function yv(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}fv.initLowLimValues=pv,fv.initCutValues=hv,fv.calcCutValue=lv,fv.leaveEdge=Dv,fv.enterEdge=mv,fv.exchangeEdges=gv;var Ev=Kp.longestPath,_v=Qp,Cv=dv,Av=function(e){switch(e.graph().ranker){case"network-simplex":default:bv(e);break;case"tight-tree":!function(e){Ev(e),_v(e)}(e);break;case"longest-path":Fv(e)}};var Fv=Ev;function bv(e){Cv(e)}var wv=bp,xv=function(e){var t=function(e){var t={},r=0;function n(u){var i=r;wv.forEach(e.children(u),n),t[u]={low:i,lim:r++}}return wv.forEach(e.children(),n),t}(e);wv.forEach(e.graph().dummyChains,(function(r){for(var n=e.node(r),u=n.edgeObj,i=function(e,t,r,n){var u,i,a=[],o=[],s=Math.min(t[r].low,t[n].low),c=Math.max(t[r].lim,t[n].lim);u=r;do{u=e.parent(u),a.push(u)}while(u&&(t[u].low>s||c>t[u].lim));i=u,u=n;for(;(u=e.parent(u))!==i;)o.push(u);return{path:a.concat(o.reverse()),lca:i}}(e,t,u.v,u.w),a=i.path,o=i.lca,s=0,c=a[s],d=!0;r!==u.w;){if(n=e.node(r),d){for(;(c=a[s])!==o&&e.node(c).maxRank<n.rank;)s++;c===o&&(d=!1)}if(!d){for(;s<a.length-1&&e.node(c=a[s+1]).minRank<=n.rank;)s++;c=a[s]}e.setParent(r,c),r=e.successors(r)[0]}}))};var Bv=bp,kv=Rp,jv={run:function(e){var t=kv.addDummyNode(e,"root",{},"_root"),r=function(e){var t={};function r(n,u){var i=e.children(n);i&&i.length&&Bv.forEach(i,(function(e){r(e,u+1)})),t[n]=u}return Bv.forEach(e.children(),(function(e){r(e,1)})),t}(e),n=Bv.max(Bv.values(r))-1,u=2*n+1;e.graph().nestingRoot=t,Bv.forEach(e.edges(),(function(t){e.edge(t).minlen*=u}));var i=function(e){return Bv.reduce(e.edges(),(function(t,r){return t+e.edge(r).weight}),0)}(e)+1;Bv.forEach(e.children(),(function(a){Nv(e,t,u,i,n,r,a)})),e.graph().nodeRankFactor=u},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Bv.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}};function Nv(e,t,r,n,u,i,a){var o=e.children(a);if(o.length){var s=kv.addBorderNode(e,"_bt"),c=kv.addBorderNode(e,"_bb"),d=e.node(a);e.setParent(s,a),d.borderTop=s,e.setParent(c,a),d.borderBottom=c,Bv.forEach(o,(function(o){Nv(e,t,r,n,u,i,o);var d=e.node(o),f=d.borderTop?d.borderTop:o,h=d.borderBottom?d.borderBottom:o,l=d.borderTop?n:2*n,p=f!==h?1:u-i[a]+1;e.setEdge(s,f,{weight:l,minlen:p,nestingEdge:!0}),e.setEdge(h,c,{weight:l,minlen:p,nestingEdge:!0})})),e.parent(a)||e.setEdge(t,s,{weight:0,minlen:u+i[a]})}else a!==t&&e.setEdge(t,a,{weight:0,minlen:r})}var Ov=bp,Sv=Rp,Iv=function(e){Ov.forEach(e.children(),(function t(r){var n=e.children(r),u=e.node(r);if(n.length&&Ov.forEach(n,t),Ov.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var i=u.minRank,a=u.maxRank+1;i<a;++i)Tv(e,"borderLeft","_bl",r,u,i),Tv(e,"borderRight","_br",r,u,i)}}))};function Tv(e,t,r,n,u,i){var a={width:0,height:0,rank:i,borderType:t},o=u[t][i-1],s=Sv.addDummyNode(e,"border",a,r);u[t][i]=s,e.setParent(s,n),o&&e.setEdge(o,s,{weight:1})}var Zv=bp,Pv={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||Mv(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){Zv.forEach(e.nodes(),(function(t){Lv(e.node(t))})),Zv.forEach(e.edges(),(function(t){var r=e.edge(t);Zv.forEach(r.points,Lv),Zv.has(r,"y")&&Lv(r)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){Zv.forEach(e.nodes(),(function(t){$v(e.node(t))})),Zv.forEach(e.edges(),(function(t){var r=e.edge(t);Zv.forEach(r.points,$v),Zv.has(r,"x")&&$v(r)}))}(e),Mv(e))}};function Mv(e){Zv.forEach(e.nodes(),(function(t){zv(e.node(t))})),Zv.forEach(e.edges(),(function(t){zv(e.edge(t))}))}function zv(e){var t=e.width;e.width=e.height,e.height=t}function Lv(e){e.y=-e.y}function $v(e){var t=e.x;e.x=e.y,e.y=t}var Rv=bp,Uv=function(e){var t={},r=Rv.filter(e.nodes(),(function(t){return!e.children(t).length})),n=Rv.max(Rv.map(r,(function(t){return e.node(t).rank}))),u=Rv.map(Rv.range(n+1),(function(){return[]}));function i(r){if(!Rv.has(t,r)){t[r]=!0;var n=e.node(r);u[n.rank].push(r),Rv.forEach(e.successors(r),i)}}var a=Rv.sortBy(r,(function(t){return e.node(t).rank}));return Rv.forEach(a,i),u};var Vv=bp,Gv=function(e,t){for(var r=0,n=1;n<t.length;++n)r+=qv(e,t[n-1],t[n]);return r};function qv(e,t,r){for(var n=Vv.zipObject(r,Vv.map(r,(function(e,t){return t}))),u=Vv.flatten(Vv.map(t,(function(t){return Vv.sortBy(Vv.map(e.outEdges(t),(function(t){return{pos:n[t.w],weight:e.edge(t).weight}})),"pos")})),!0),i=1;i<r.length;)i<<=1;var a=2*i-1;i-=1;var o=Vv.map(new Array(a),(function(){return 0})),s=0;return Vv.forEach(u.forEach((function(e){var t=e.pos+i;o[t]+=e.weight;for(var r=0;t>0;)t%2&&(r+=o[t+1]),o[t=t-1>>1]+=e.weight;s+=e.weight*r}))),s}var Hv=bp;var Wv=bp,Kv=function(e,t){var r={};return Wv.forEach(e,(function(e,t){var n=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};Wv.isUndefined(e.barycenter)||(n.barycenter=e.barycenter,n.weight=e.weight)})),Wv.forEach(t.edges(),(function(e){var t=r[e.v],n=r[e.w];Wv.isUndefined(t)||Wv.isUndefined(n)||(n.indegree++,t.out.push(r[e.w]))})),function(e){var t=[];function r(e){return function(t){t.merged||(Wv.isUndefined(t.barycenter)||Wv.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight);t.weight&&(r+=t.barycenter*t.weight,n+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function n(t){return function(r){r.in.push(t),0==--r.indegree&&e.push(r)}}for(;e.length;){var u=e.pop();t.push(u),Wv.forEach(u.in.reverse(),r(u)),Wv.forEach(u.out,n(u))}return Wv.map(Wv.filter(t,(function(e){return!e.merged})),(function(e){return Wv.pick(e,["vs","i","barycenter","weight"])}))}(Wv.filter(r,(function(e){return!e.indegree})))};var Yv=bp,Jv=Rp;function Xv(e,t,r){for(var n;t.length&&(n=Yv.last(t)).i<=r;)t.pop(),e.push(n.vs),r++;return r}var Qv=bp,eD=function(e,t){return Hv.map(t,(function(t){var r=e.inEdges(t);if(r.length){var n=Hv.reduce(r,(function(t,r){var n=e.edge(r),u=e.node(r.v);return{sum:t.sum+n.weight*u.order,weight:t.weight+n.weight}}),{sum:0,weight:0});return{v:t,barycenter:n.sum/n.weight,weight:n.weight}}return{v:t}}))},tD=Kv,rD=function(e,t){var r=Jv.partition(e,(function(e){return Yv.has(e,"barycenter")})),n=r.lhs,u=Yv.sortBy(r.rhs,(function(e){return-e.i})),i=[],a=0,o=0,s=0;n.sort((c=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:c?t.i-e.i:e.i-t.i})),s=Xv(i,u,s),Yv.forEach(n,(function(e){s+=e.vs.length,i.push(e.vs),a+=e.barycenter*e.weight,o+=e.weight,s=Xv(i,u,s)}));var c;var d={vs:Yv.flatten(i,!0)};o&&(d.barycenter=a/o,d.weight=o);return d},nD=function e(t,r,n,u){var i=t.children(r),a=t.node(r),o=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,c={};o&&(i=Qv.filter(i,(function(e){return e!==o&&e!==s})));var d=eD(t,i);Qv.forEach(d,(function(r){if(t.children(r.v).length){var i=e(t,r.v,n,u);c[r.v]=i,Qv.has(i,"barycenter")&&(a=r,o=i,Qv.isUndefined(a.barycenter)?(a.barycenter=o.barycenter,a.weight=o.weight):(a.barycenter=(a.barycenter*a.weight+o.barycenter*o.weight)/(a.weight+o.weight),a.weight+=o.weight))}var a,o}));var f=tD(d,n);!function(e,t){Qv.forEach(e,(function(e){e.vs=Qv.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(f,c);var h=rD(f,u);if(o&&(h.vs=Qv.flatten([o,h.vs,s],!0),t.predecessors(o).length)){var l=t.node(t.predecessors(o)[0]),p=t.node(t.predecessors(s)[0]);Qv.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+l.order+p.order)/(h.weight+2),h.weight+=2}return h};var uD=bp,iD=dp.Graph,aD=function(e,t,r){var n=function(e){var t;for(;e.hasNode(t=uD.uniqueId("_root")););return t}(e),u=new iD({compound:!0}).setGraph({root:n}).setDefaultNodeLabel((function(t){return e.node(t)}));return uD.forEach(e.nodes(),(function(i){var a=e.node(i),o=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(u.setNode(i),u.setParent(i,o||n),uD.forEach(e[r](i),(function(t){var r=t.v===i?t.w:t.v,n=u.edge(r,i),a=uD.isUndefined(n)?0:n.weight;u.setEdge(r,i,{weight:e.edge(t).weight+a})})),uD.has(a,"minRank")&&u.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))})),u};var oD=bp;var sD=bp,cD=Uv,dD=Gv,fD=nD,hD=aD,lD=function(e,t,r){var n,u={};oD.forEach(r,(function(r){for(var i,a,o=e.parent(r);o;){if((i=e.parent(o))?(a=u[i],u[i]=o):(a=n,n=o),a&&a!==o)return void t.setEdge(a,o);o=i}}))},pD=dp.Graph,vD=Rp,DD=function(e){var t=vD.maxRank(e),r=mD(e,sD.range(1,t+1),"inEdges"),n=mD(e,sD.range(t-1,-1,-1),"outEdges"),u=cD(e);yD(e,u);for(var i,a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;++o,++s){gD(o%2?r:n,o%4>=2),u=vD.buildLayerMatrix(e);var c=dD(e,u);c<a&&(s=0,i=sD.cloneDeep(u),a=c)}yD(e,i)};function mD(e,t,r){return sD.map(t,(function(t){return hD(e,t,r)}))}function gD(e,t){var r=new pD;sD.forEach(e,(function(e){var n=e.graph().root,u=fD(e,n,r,t);sD.forEach(u.vs,(function(t,r){e.node(t).order=r})),lD(e,r,u.vs)}))}function yD(e,t){sD.forEach(t,(function(t){sD.forEach(t,(function(t,r){e.node(t).order=r}))}))}var ED=bp,_D=dp.Graph,CD=Rp,AD=function(e){var t,r=CD.buildLayerMatrix(e),n=ED.merge(FD(e,r),bD(e,r)),u={};ED.forEach(["u","d"],(function(i){t="u"===i?r:ED.values(r).reverse(),ED.forEach(["l","r"],(function(r){"r"===r&&(t=ED.map(t,(function(e){return ED.values(e).reverse()})));var a=("u"===i?e.predecessors:e.successors).bind(e),o=BD(e,t,n,a),s=kD(e,t,o.root,o.align,"r"===r);"r"===r&&(s=ED.mapValues(s,(function(e){return-e}))),u[i+r]=s}))}));var i=jD(e,u);return ND(u,i),OD(u,e.graph().align)};function FD(e,t){var r={};return ED.reduce(t,(function(t,n){var u=0,i=0,a=t.length,o=ED.last(n);return ED.forEach(n,(function(t,s){var c=function(e,t){if(e.node(t).dummy)return ED.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),d=c?e.node(c).order:a;(c||t===o)&&(ED.forEach(n.slice(i,s+1),(function(t){ED.forEach(e.predecessors(t),(function(n){var i=e.node(n),a=i.order;!(a<u||d<a)||i.dummy&&e.node(t).dummy||wD(r,n,t)}))})),i=s+1,u=d)})),n})),r}function bD(e,t){var r={};function n(t,n,u,i,a){var o;ED.forEach(ED.range(n,u),(function(n){o=t[n],e.node(o).dummy&&ED.forEach(e.predecessors(o),(function(t){var n=e.node(t);n.dummy&&(n.order<i||n.order>a)&&wD(r,t,o)}))}))}return ED.reduce(t,(function(t,r){var u,i=-1,a=0;return ED.forEach(r,(function(o,s){if("border"===e.node(o).dummy){var c=e.predecessors(o);c.length&&(u=e.node(c[0]).order,n(r,a,s,i,u),a=s,i=u)}n(r,a,r.length,u,t.length)})),r})),r}function wD(e,t,r){if(t>r){var n=t;t=r,r=n}var u=e[t];u||(e[t]=u={}),u[r]=!0}function xD(e,t,r){if(t>r){var n=t;t=r,r=n}return ED.has(e[t],r)}function BD(e,t,r,n){var u={},i={},a={};return ED.forEach(t,(function(e){ED.forEach(e,(function(e,t){u[e]=e,i[e]=e,a[e]=t}))})),ED.forEach(t,(function(e){var t=-1;ED.forEach(e,(function(e){var o=n(e);if(o.length){o=ED.sortBy(o,(function(e){return a[e]}));for(var s=(o.length-1)/2,c=Math.floor(s),d=Math.ceil(s);c<=d;++c){var f=o[c];i[e]===e&&t<a[f]&&!xD(r,e,f)&&(i[f]=e,i[e]=u[e]=u[f],t=a[f])}}}))})),{root:u,align:i}}function kD(e,t,r,n,u){var i={},a=function(e,t,r,n){var u=new _D,i=e.graph(),a=function(e,t,r){return function(n,u,i){var a,o=n.node(u),s=n.node(i),c=0;if(c+=o.width/2,ED.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":a=-o.width/2;break;case"r":a=o.width/2}if(a&&(c+=r?a:-a),a=0,c+=(o.dummy?t:e)/2,c+=(s.dummy?t:e)/2,c+=s.width/2,ED.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=s.width/2;break;case"r":a=-s.width/2}return a&&(c+=r?a:-a),a=0,c}}(i.nodesep,i.edgesep,n);return ED.forEach(t,(function(t){var n;ED.forEach(t,(function(t){var i=r[t];if(u.setNode(i),n){var o=r[n],s=u.edge(o,i);u.setEdge(o,i,Math.max(a(e,t,n),s||0))}n=t}))})),u}(e,t,r,u),o=u?"borderLeft":"borderRight";function s(e,t){for(var r=a.nodes(),n=r.pop(),u={};n;)u[n]?e(n):(u[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()}return s((function(e){i[e]=a.inEdges(e).reduce((function(e,t){return Math.max(e,i[t.v]+a.edge(t))}),0)}),a.predecessors.bind(a)),s((function(t){var r=a.outEdges(t).reduce((function(e,t){return Math.min(e,i[t.w]-a.edge(t))}),Number.POSITIVE_INFINITY),n=e.node(t);r!==Number.POSITIVE_INFINITY&&n.borderType!==o&&(i[t]=Math.max(i[t],r))}),a.successors.bind(a)),ED.forEach(n,(function(e){i[e]=i[r[e]]})),i}function jD(e,t){return ED.minBy(ED.values(t),(function(t){var r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return ED.forIn(t,(function(t,u){var i=function(e,t){return e.node(t).width}(e,u)/2;r=Math.max(t+i,r),n=Math.min(t-i,n)})),r-n}))}function ND(e,t){var r=ED.values(t),n=ED.min(r),u=ED.max(r);ED.forEach(["u","d"],(function(r){ED.forEach(["l","r"],(function(i){var a,o=r+i,s=e[o];if(s!==t){var c=ED.values(s);(a="l"===i?n-ED.min(c):u-ED.max(c))&&(e[o]=ED.mapValues(s,(function(e){return e+a})))}}))}))}function OD(e,t){return ED.mapValues(e.ul,(function(r,n){if(t)return e[t.toLowerCase()][n];var u=ED.sortBy(ED.map(e,n));return(u[1]+u[2])/2}))}var SD=bp,ID=Rp,TD=AD;var ZD=bp,PD=zp,MD=Hp,zD=Av,LD=Rp.normalizeRanks,$D=xv,RD=Rp.removeEmptyRanks,UD=jv,VD=Iv,GD=Pv,qD=DD,HD=function(e){(function(e){var t=ID.buildLayerMatrix(e),r=e.graph().ranksep,n=0;SD.forEach(t,(function(t){var u=SD.max(SD.map(t,(function(t){return e.node(t).height})));SD.forEach(t,(function(t){e.node(t).y=n+u/2})),n+=u+r}))})(e=ID.asNonCompoundGraph(e)),SD.forEach(TD(e),(function(t,r){e.node(r).x=t}))},WD=Rp,KD=dp.Graph,YD=function(e,t){var r=t&&t.debugTiming?WD.time:WD.notime;r("layout",(function(){var t=r("  buildLayoutGraph",(function(){return function(e){var t=new KD({multigraph:!0,compound:!0}),r=am(e.graph());return t.setGraph(ZD.merge({},XD,im(r,JD),ZD.pick(r,QD))),ZD.forEach(e.nodes(),(function(r){var n=am(e.node(r));t.setNode(r,ZD.defaults(im(n,em),tm)),t.setParent(r,e.parent(r))})),ZD.forEach(e.edges(),(function(r){var n=am(e.edge(r));t.setEdge(r,ZD.merge({},nm,im(n,rm),ZD.pick(n,um)))})),t}(e)}));r("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,ZD.forEach(e.edges(),(function(r){var n=e.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){ZD.forEach(e.edges(),(function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){PD.run(e)})),t("    nestingGraph.run",(function(){UD.run(e)})),t("    rank",(function(){zD(WD.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){ZD.forEach(e.edges(),(function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v),u={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};WD.addDummyNode(e,"edge-proxy",u,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){RD(e)})),t("    nestingGraph.cleanup",(function(){UD.cleanup(e)})),t("    normalizeRanks",(function(){LD(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;ZD.forEach(e.nodes(),(function(r){var n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=ZD.max(t,n.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){ZD.forEach(e.nodes(),(function(t){var r=e.node(t);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){MD.run(e)})),t("    parentDummyChains",(function(){$D(e)})),t("    addBorderSegments",(function(){VD(e)})),t("    order",(function(){qD(e)})),t("    insertSelfEdges",(function(){!function(e){var t=WD.buildLayerMatrix(e);ZD.forEach(t,(function(t){var r=0;ZD.forEach(t,(function(t,n){var u=e.node(t);u.order=n+r,ZD.forEach(u.selfEdges,(function(t){WD.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:u.rank,order:n+ ++r,e:t.e,label:t.label},"_se")})),delete u.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){GD.adjust(e)})),t("    position",(function(){HD(e)})),t("    positionSelfEdges",(function(){!function(e){ZD.forEach(e.nodes(),(function(t){var r=e.node(t);if("selfedge"===r.dummy){var n=e.node(r.e.v),u=n.x+n.width/2,i=n.y,a=r.x-u,o=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:u+2*a/3,y:i-o},{x:u+5*a/6,y:i-o},{x:u+a,y:i},{x:u+5*a/6,y:i+o},{x:u+2*a/3,y:i+o}],r.label.x=r.x,r.label.y=r.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){ZD.forEach(e.nodes(),(function(t){if(e.children(t).length){var r=e.node(t),n=e.node(r.borderTop),u=e.node(r.borderBottom),i=e.node(ZD.last(r.borderLeft)),a=e.node(ZD.last(r.borderRight));r.width=Math.abs(a.x-i.x),r.height=Math.abs(u.y-n.y),r.x=i.x+r.width/2,r.y=n.y+r.height/2}})),ZD.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){MD.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){ZD.forEach(e.edges(),(function(t){var r=e.edge(t);if(ZD.has(r,"x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){GD.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,u=0,i=e.graph(),a=i.marginx||0,o=i.marginy||0;function s(e){var i=e.x,a=e.y,o=e.width,s=e.height;t=Math.min(t,i-o/2),r=Math.max(r,i+o/2),n=Math.min(n,a-s/2),u=Math.max(u,a+s/2)}ZD.forEach(e.nodes(),(function(t){s(e.node(t))})),ZD.forEach(e.edges(),(function(t){var r=e.edge(t);ZD.has(r,"x")&&s(r)})),t-=a,n-=o,ZD.forEach(e.nodes(),(function(r){var u=e.node(r);u.x-=t,u.y-=n})),ZD.forEach(e.edges(),(function(r){var u=e.edge(r);ZD.forEach(u.points,(function(e){e.x-=t,e.y-=n})),ZD.has(u,"x")&&(u.x-=t),ZD.has(u,"y")&&(u.y-=n)})),i.width=r-t+a,i.height=u-n+o}(e)})),t("    assignNodeIntersects",(function(){!function(e){ZD.forEach(e.edges(),(function(t){var r,n,u=e.edge(t),i=e.node(t.v),a=e.node(t.w);u.points?(r=u.points[0],n=u.points[u.points.length-1]):(u.points=[],r=a,n=i),u.points.unshift(WD.intersectRect(i,r)),u.points.push(WD.intersectRect(a,n))}))}(e)})),t("    reversePoints",(function(){!function(e){ZD.forEach(e.edges(),(function(t){var r=e.edge(t);r.reversed&&r.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){PD.undo(e)}))}(t,r)})),r("  updateInputGraph",(function(){!function(e,t){ZD.forEach(e.nodes(),(function(r){var n=e.node(r),u=t.node(r);n&&(n.x=u.x,n.y=u.y,t.children(r).length&&(n.width=u.width,n.height=u.height))})),ZD.forEach(e.edges(),(function(r){var n=e.edge(r),u=t.edge(r);n.points=u.points,ZD.has(u,"x")&&(n.x=u.x,n.y=u.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var JD=["nodesep","edgesep","ranksep","marginx","marginy"],XD={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},QD=["acyclicer","ranker","rankdir","align"],em=["width","height"],tm={width:0,height:0},rm=["minlen","weight","width","height","labeloffset"],nm={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},um=["labelpos"];function im(e,t){return ZD.mapValues(ZD.pick(e,t),Number)}function am(e){var t={};return ZD.forEach(e,(function(e,r){t[r.toLowerCase()]=e})),t}var om=bp,sm=Rp,cm=dp.Graph;var dm={graphlib:dp,layout:YD,debug:{debugOrdering:function(e){var t=sm.buildLayerMatrix(e),r=new cm({compound:!0,multigraph:!0}).setGraph({});return om.forEach(e.nodes(),(function(t){r.setNode(t,{label:t}),r.setParent(t,"layer"+e.node(t).rank)})),om.forEach(e.edges(),(function(e){r.setEdge(e.v,e.w,{},e.name)})),om.forEach(t,(function(e,t){var n="layer"+t;r.setNode(n,{rank:"same"}),om.reduce(e,(function(e,t){return r.setEdge(e,t,{style:"invis"}),t}))})),r}},util:{time:Rp.time,notime:Rp.notime},version:"0.8.5"};const fm=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),hm=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),lm=(e,t)=>({x:t*e.x,y:t*e.y}),pm=e=>lm(e,1/(e=>Math.sqrt(e.x*e.x+e.y*e.y))(e)),vm=e=>e.trim().split(/(?=[A-Z])/);class Dm{constructor(){this.listeners=new Map}on(e,t){!this.listeners.has(e)&&this.listeners.set(e,new Set),this.listeners.get(e).add(t)}emit(e,...t){this.listeners.has(e)&&this.listeners.get(e).forEach((e=>e(...t)))}}const mm=(e,t)=>{e.x=0,e.y=0,e.width=t.scale,e.height=t.scale},gm=(e,t)=>{e.x=0,e.y=0,e.width=2*t.scale,e.height=t.scale},ym=e=>{e.x=0,e.y=0,e.width=0,e.height=0},Em=(e,t)=>{const r=2*t.padding,n=(e,t)=>{if(e.nodes.size){const u=new dm.graphlib.Graph({multigraph:!0});u.setGraph({nodesep:t.margin,edgesep:t.margin,ranksep:t.margin,acyclicer:e.id&&"greedy",rankdir:"LR",ranker:"network-simplex"}),e.nodes.forEach((e=>e.color&&function(e){switch(e){case"context":return n;case"actor":return ym;case"command":case"event":return mm;default:return gm}}(e.visual)(e,t))),e.nodes.forEach((({id:e,width:t,height:r})=>t&&r&&u.setNode(e,{width:t,height:r}))),e.edges.forEach((({source:e,target:t},r)=>u.setEdge(e.id,t.id,{},r))),dm.layout(u),e.nodes.forEach((e=>{const t=u.node(e.id);t&&(e.x=t.x,e.y=t.y)})),!e.id&&u.edges().forEach((t=>{const r=u.edge(t),n=e.edges.get(t.name);n.path=[n.source,...r.points,n.target].map((e=>({x:Math.floor(e.x),y:Math.floor(e.y)})))}));const{width:i=0,height:a=0}=u.graph();e.width=i+r,e.height=a+r}else e.width=vm(e.id).join(" ").length*t.fontSize+r,e.height=t.fontSize+r};return n(e,t)};function _m(e){return"number"==typeof e?e.toFixed(0):(e??"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}class Cm{constructor(e,t,r,n){this.type=e,this.attrs=t,this.parent=r,this.text=n,this.children=[]}get group(){return this.parent}attr(e,t){return this.attrs[e]=t,this}append(e){return e.parent=this,this.children.push(e),e}serialize(){const e=function(e){return Object.entries(e).filter((([e,t])=>t)).map((([e,t])=>`${e}="${_m(t)}"`)).join(" ")}({...this.attrs}),t=this.children.map((e=>e.serialize())).join("")||_m(this.text);return`<${this.type} ${e}>${t}</${this.type}>`}}class Am{_new(e,t,r){this.current.append(new Cm(e,t,this.current,r))}constructor(e){this.root=this.current=new Cm("g",{...e,"data-name":"root"})}group(e,t){const r=new Cm("g",{},this.current);return this.current.append(r),this.current=r,e&&(this.attr("id","g-"+e),this.attr("data-name",e)),t&&(t.class&&this.attr("class",t.class),(t.dx||t.dy)&&this.attr("transform",`translate(${t.dx}, ${t.dy})`)),this}ungroup(){this.current.group&&(this.current=this.current.group)}attr(e,t){return this.current.attr(e,t),this}rect(e,t,r,n,u){this._new("rect",{x:e,y:t,height:n,width:r,...u})}path(e,t,r){const n=e.map(((e,t)=>e.x&&e.y?(t?"L":"M")+e.x.toFixed(0)+" "+e.y.toFixed(0):e.dx?"h"+e.dx.toFixed(0):e.dy?"v"+e.dy.toFixed(0):"")).join(" ").concat(t?" Z":"");this._new("path",{...r,d:n})}text(e,t,r,n){this._new("text",{x:t,y:r,...n},e)}serialize(){return this.root.serialize()}}const Fm="#aaaaaa",bm="#555555",wm=(e,t,r)=>{let n=((e,t)=>{const r=e.map((e=>e.length)).sort(((e,t)=>t-e)).at(0);return Math.floor(Math.min(Math.max(Math.ceil(t/r),8),24))})(e,t);for(;n>5;){const u=Math.ceil(t/n)-1,i=Math.floor(r/n)-1,a=[];let o=e[0],s=1;for(;s<e.length;){const t=e[s++];o.length+t.length>=u?(a.push(o),o=t):o=o.concat(o.length?" ":"",t)}if(a.push(o),s===e.length&&a.length<=i)return{lines:a,fontSize:n};n--}return{lines:[e.join(" ")],fontSize:n}},xm=(e,t,r,n,u={fit:!0})=>{const i=u.w||t||0,a=u.h||r||0,{lines:o,fontSize:s}=u.fit?wm(e,i,a):{lines:e,fontSize:u.fontSize||12};n.attr("font-size",s+"pt");const c=u.x||Math.floor(i/2),d=u.y||Math.floor(a/2),f=Math.floor(o.length/2),h=o.length%2?.3:.9;o.forEach(((e,t)=>{n.text(e,c,d,{fill:bm,dy:`${(1.2*(t-f)+h).toFixed(2)}em`})}))},Bm=(e,t)=>{const r={fill:"none",stroke:e.arrow?e.color:e.target.color};if(e.arrow&&(r["stroke-width"]=3),t.path((e=>{if(e.path){const t=e.path.slice(1,-1),r=pm(fm(t[t.length-2],t.at(-1))),n=t.length-1,u=t.map((e=>({x:e.x,y:e.y})));return u[n]=hm(u[n],lm(r,1.5*(e.arrow?5:0))),u}const t=e.source.x+e.source.width/2,r=e.target.x-e.target.width/2,n=e.source.y,u=e.target.y;if(n===u)return[{x:t,y:n},{dx:r-t}];const i=Math.floor((r-t)/2);return[{x:t,y:n},{dx:i},{dy:Math.floor(u-n)},{dx:i}]})(e),!1,{...r}),e.arrow){const n=e.path[e.path.length-2],u=e.path.slice(1,-1),i=pm(fm(u[u.length-2],u.at(-1))),a=e=>hm(n,lm(i,1.5*e)),o=e=>{return lm({x:(t=i).y,y:-t.x},1.5*e);var t};t.path([hm(a(10),o(4)),a(5),hm(a(10),o(-4)),n],!0,{...r,fill:e.color})}},km=(e,t,r,n,u,i)=>{i.group("").attr("fill",e.color),i.rect(t,r,n,u),xm(vm(e.id),n,u,i,{fit:!0,x:t+n/2,y:r+u/2,w:n,h:u}),i.ungroup()},jm=(e,t,r,n,u,i)=>{km(e,t,r,n,u,i);const a=Math.ceil(n/2),o=Math.ceil(u/2);e.refs&&[...e.refs].forEach(((e,n)=>km(e,t-a+4,r+n*(o+2)-4,a,o,i)))},Nm=(e,t,r)=>{if(e.refs&&"actor"!==e.visual){const n=Math.floor(e.x-e.width/2-.2*r.scale),u=Math.floor(e.y+.4*e.height),i=Math.floor(r.scale),a=Math.floor(r.scale/2);e.refs?.size>1?"command"===e.visual?((e,t,r,n,u,i)=>{const a=[...e.refs],o=Math.floor(u/a.length);a.forEach(((e,u)=>jm(e,t,r+u*(o+2),n,o,i)))})(e,n,u,i,a,t):((e,t,r,n,u,i)=>{const a=e.map((e=>`- ${vm(e.id).join(" ")}`));i.group("").attr("fill",e[0].color).attr("text-align","left").attr("text-anchor","start"),i.rect(t,r,n,u),xm(a,n,u,i,{fit:!0,x:t+4,y:r+u/2,w:n,h:u}),i.ungroup()})([...e.refs],n,u,i,a,t):jm([...e.refs][0],n,u,i,a,t)}},Om=(e,t,r)=>{if("nodes"in e){if(e.id){const n=vm(e.id);t.text(n.join(" "),0,0,{fill:Fm,stroke:Fm,dy:-r.fontSize}),t.rect(0,0,e.width,e.height,{rx:25,ry:25})}t.group("",{dx:r.padding,dy:r.padding}),e.id&&t.attr("text-align","center").attr("text-anchor","middle").attr("stroke",bm),e.edges.forEach((r=>r.color&&Bm({...r,source:e.nodes.get(r.source.id)},t))),e.nodes.forEach((e=>e.color&&Im(e,t,r))),e.nodes.forEach((e=>e.refs&&Nm(e,t,r))),t.ungroup()}},Sm=(e,t)=>{t.attr("fill",e.color),t.rect(0,0,e.width,e.height),xm(vm(e.id),e.width,e.height,t);const r=e.ctx.schemas.get(e.id);r&&t.text(`{${r.size}}`,e.width-6,6,{"font-size":"6pt",fill:bm})},Im=(e,t,r)=>{const n=Math.floor(e.x-e.width/2),u=Math.floor(e.y-e.height/2),i="context"===e.visual?Om:"actor"!==e.visual?Sm:void 0;i&&(t.group(e.id,{class:e.visual,dx:n,dy:u}),i(e,t,r),t.ungroup())},Tm=/^[A-Z][A-Za-z0-9]+$/,Zm=/^([A-Z][A-Za-z0-9]+)(\.[A-Z][A-Za-z0-9]*){0,1}$/,Pm=Lt.array(Lt.string().regex(Zm,{message:"Invalid reference name. Use [Context.]Identifier in Pascal case!"})).optional().describe("A list of references to internal or external artifacts or messages"),Mm=Lt.record(Lt.string().regex(/^[a-z][A-Za-z0-9]+$/,{message:"Invalid field name. Use camel case!"}),Lt.enum(Rt).or(Lt.string().regex(Tm,{message:"Invalid schema name. Use Pascal case!"}))).describe("A map of field names and types (scalar or other schemas)"),zm=Lt.object({description:Lt.string().optional(),base:Lt.string().regex(Tm,{message:"Invalid schema name. Use Pascal case!"}).optional(),requires:Mm.optional(),optional:Mm.optional()}).strict().describe("A message or state schema"),Lm=Lt.object({type:Lt.literal("event"),description:Lt.string().optional(),schema:zm.optional()}).strict().describe("An event"),$m=Lt.object({type:Lt.literal("command"),description:Lt.string().optional(),schema:zm.optional(),actors:Lt.record(Lt.string().regex(Tm,{message:"Invalid actor name. Use Pascal case!"}),Lt.array(Lt.string().regex(Zm,{message:"Invalid projector name. Use [Context.]Projector in Pascal case!"}))).optional()}).strict().describe("A command, with actors that can read projections"),Rm=Lt.object({type:Lt.literal("system"),description:Lt.string().optional(),handles:Pm,emits:Pm}).strict().describe("System artifact, can handle commands and emit events"),Um=Lt.object({type:Lt.literal("aggregate"),description:Lt.string().optional(),handles:Pm,emits:Pm,schema:zm.optional()}).strict().describe("Aggregate artifact, can handle commands and emit events, with a state"),Vm=Lt.object({type:Lt.literal("policy"),description:Lt.string().optional(),handles:Pm,invokes:Pm,reads:Pm}).strict().describe("Policy artifact, can handle (react to) events, read projections, and invoke commands"),Gm=Lt.object({type:Lt.literal("process"),description:Lt.string().optional(),handles:Pm,invokes:Pm,reads:Pm,schema:zm.optional()}).strict().describe("Process manager artifact, can handle (react to) events, read projections, and invoke commands, with a state"),qm=Lt.object({type:Lt.literal("projector"),description:Lt.string().optional(),handles:Pm,schema:zm.optional()}).strict().describe("Projector artifact, can handle (project) events into a state (projection)"),Hm=Lt.object({type:Lt.literal("schema"),description:Lt.string().optional(),base:Lt.string().regex(Tm,{message:"Invalid schema name. Use Pascal case!"}).optional(),requires:Mm.optional(),optional:Mm.optional()}).strict().describe("Object schemas can be used as base types or value objects"),Wm=Lt.union([$m,Lm,Rm,Um,Vm,Gm,qm,Hm]),Km=Lt.record(Lt.string().regex(Tm,{message:"Invalid context name. Use Pascal case!"}),Lt.record(Lt.string().regex(Tm,{message:"Invalid artifact name. Use Pascal case!"}),Wm)).describe("The model is a map of bounded contexts with internal artifacts");class Ym extends Error{constructor(e,t){super(e),this.message=e,this.source=t}}const Jm={monospace:"Monospace",inconsolata:"Inconsolata",caveat:"Caveat",handlee:"Handlee"},Xm="inconsolata",Qm=(e,t,r=Xm)=>{const n={scale:t,stroke:"#dedede",fill:"white",font:Jm[r.toLowerCase()]||Jm[Xm],fontSize:12,padding:30,margin:40};try{const t=Km.parse(Z.parse(e)),r=Qt(t);Em(r,n);const u=((e,t)=>{const r=new Am({fill:t.fill,"font-family":t.font,"font-size":t.fontSize+"pt","text-align":"left",stroke:t.stroke,"stroke-width":1});return Om(e,r,t),r.serialize()})(r,n),i=[...r.nodes.values()].filter((e=>"actors"!==e.id)).flatMap((e=>[...e.nodes.values()]));return{svg:u,width:r.width,height:r.height,nodes:i.map((({id:e,visual:t,ctx:r,x:n,y:u,width:i,height:a,description:o})=>{const s=r.schemas.get(e);return{id:e,visual:t,ctx:r.id,x:n,y:u,width:i,height:a,fields:s?[...s.values()]:[],description:o??s?.description}}))}}catch(e){if("lineNumber"in e&&"columnNumber"in e)return{error:new Ym(e.message,{from:{line:e.lineNumber-1,col:0},to:{line:e.lineNumber-1,col:e.columnNumber}})};if(e instanceof L)return{error:Error(e.issues.map((e=>`${e.path.join(".")}: ${e.message}`)).join("\n"))};if(e instanceof Error){const t=e.stack.split("\n").slice(0,2).join(" ");return{error:Error(t)}}return{error:Error(e)}}};e.Canvas=class extends Dm{constructor(e,t,r){super(),this.document=e,this.container=t,this.SCALE=80,this.WIDTH=100*this.SCALE,this.HEIGHT=100*this.SCALE,this.dragging=!1,this.dx=0,this.dy=0,this.zoom=1,this.x=0,this.y=0,this.w=0,this.h=0,this.tooltip=e.createElement("div"),this.tooltip.className="node-tooltip",this.container.appendChild(this.tooltip),r&&(this.SCALE=r.SCALE,this.WIDTH=r.WIDTH,this.HEIGHT=r.HEIGHT,this.coordsSpan=r.coordsSpan,this.zoomBtn=r.zoomBtn,this.zoomInBtn=r.zoomInBtn,this.zoomOutBtn=r.zoomOutBtn),this.svg=this.document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.svg.setAttribute("viewBox",`0 0 ${this.WIDTH} ${this.HEIGHT}`),this.svg.setAttribute("width",`${this.WIDTH}`),this.svg.setAttribute("height",`${this.HEIGHT}`),this.container.appendChild(this.svg),this.container.addEventListener("wheel",(e=>{e.preventDefault(),e.metaKey||e.ctrlKey?(this.fitZoom(this.zoom+-.01*e.deltaY),this.transform()):this.transform(e.deltaX,e.deltaY)}));const n=({clientX:e,clientY:t})=>{this.dragging=!0,this.dx=e,this.dy=t,this.container.style.cursor="grabbing"},u=()=>{this.dragging=!1,this.container.style.cursor="default"},i=({clientX:e,clientY:t})=>{this.dragging&&(this.transform(this.dx-e,this.dy-t),this.dx=e,this.dy=t)};this.container.addEventListener("mousedown",n),this.container.addEventListener("mouseup",u),this.container.addEventListener("mousemove",i),this.container.addEventListener("touchstart",(e=>n(e.touches[0]))),this.container.addEventListener("touchend",u),this.container.addEventListener("touchmove",(e=>i(e.touches[0]))),this.zoomBtn&&(this.zoomBtn.onclick=()=>this.fitToContainer.apply(this)),this.zoomInBtn&&(this.zoomInBtn.onclick=()=>this.zoomTo.apply(this,[.1])),this.zoomOutBtn&&(this.zoomOutBtn.onclick=()=>this.zoomTo.apply(this,[-.1]))}fitToContainer(){const e=Math.min(this.container.clientWidth,window.innerWidth),t=Math.min(this.container.clientHeight,window.innerHeight);this.w&&this.h&&e&&t&&(this.fitZoom(Math.min(e/this.w,t/this.h)),this.x=Math.floor((e-this.w*this.zoom)/2),this.y=Math.floor((t-this.h*this.zoom)/2),this.transform())}zoomTo(e){this.fitZoom(this.zoom+e),this.transform()}fitZoom(e){this.zoom=Math.round(100*Math.min(Math.max(.1,e),3))/100}transform(e=0,t=0){const r=this.svg.children[0];r&&(this.x=Math.floor(Math.min(Math.max(this.x-e,0-this.w*this.zoom),this.WIDTH)),this.y=Math.floor(Math.min(Math.max(this.y-t,0-this.h*this.zoom),this.HEIGHT)),this.coordsSpan&&(this.coordsSpan.innerText=`x:${this.x} y:${this.y} w:${this.w} h:${this.h}`),this.zoomBtn&&(this.zoomBtn.innerText=`${Math.floor(100*this.zoom)}%`),r.setAttribute("transform",`translate(${this.x}, ${this.y}) scale(${this.zoom})`),this.emit("transformed",{x:this.x,y:this.y,zoom:this.zoom}))}addNodes(e){const t=e=>{const t=e.target.dataset.name,r=this.document.getElementById("node-"+t);if(r){this.tooltip.innerHTML=r?.innerHTML,this.tooltip.className="node-tooltip-visible";const t=e.x,n=e.y;this.tooltip.style.left=t+"px",this.tooltip.style.top=n+"px"}},r=()=>{this.tooltip.className="node-tooltip",this.tooltip.innerText=""};this.nodes&&this.container.removeChild(this.nodes),this.nodes=this.document.createElement("div"),this.container.appendChild(this.nodes),this.nodes.style.visibility="hidden",e&&e.filter((e=>e.fields.length||e.description)).map((e=>{const n=this.document.createElement("div");n.id="node-"+e.id,n.innerHTML=`<div class="name">${e.id}</div>\n        <div class="description">${e.description||""}</div>\n        <table class="table table-sm">\n          ${e.fields.slice(0,20).map((e=>{const t=e.name.length>10?e.name.substring(0,10)+"...":e.name,r=e.required?"th":"td";return`<tr><${r}>${t}</${r}><td>${e.type}</td></tr>`})).join("")}\n            ${e.fields.length>20?"<tr><td colspan='2'>...</td></tr>":""}\n        </table>\n        `,this.nodes?.appendChild(n);const u=this.document.getElementById("g-"+e.id);u&&(u.addEventListener("mouseenter",t),u.addEventListener("mouseleave",r))}))}render(e){const{error:t,svg:r,width:n,height:u,nodes:i}=Qm(e.code,this.SCALE,e.font);if(t)return t;this.svg.innerHTML=r,this.addNodes(i),this.w=Math.floor(n),this.h=Math.floor(u),e.zoom&&(this.x=e.x||0,this.y=e.y||0,this.zoom=e.zoom),this.transform()}},e.EventEmitter=Dm,e.debounce=(e,t)=>{let r;return function(...n){clearTimeout(r),r=setTimeout((()=>{e.apply(this,n)}),t)}},e.esml=Qm}));

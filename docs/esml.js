!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).esml={})}(this,(function(t){"use strict";const n=["context","actor","aggregate","system","projector","policy","process"],r=[...n,"invokes","handles","emits","includes","reads"],e={actor:new class{grammar(){return{invokes:{visual:"command",owns:!0},reads:{visual:"projector",owns:!1}}}edge(t,n){if("command"===n.visual)return{start:t.id,end:n.id,dashed:!1,arrow:!0}}ref(t,n){if("projector"===n.visual)return{hostId:t.id,target:n}}},aggregate:new class{grammar(){return{handles:{visual:"command",owns:!0},emits:{visual:"event",owns:!0}}}edge(t,n){return"command"===n.visual?{start:n.id,end:t.id,dashed:!1,arrow:!0}:{start:t.id,end:n.id,dashed:!1,arrow:!1}}ref(){}},context:new class{grammar(){return{includes:{visual:"artifact",owns:!0}}}edge(t,n,r=!1,e=!0){return{start:t.id,end:n.id,dashed:r,arrow:e}}ref(){}},policy:new class{grammar(){return{handles:{visual:"event",owns:!1},invokes:{visual:"command",owns:!1},reads:{visual:"projector",owns:!1}}}edge(t,n){if("event"===n.visual)return{start:n.id,end:t.id,dashed:!0,arrow:!0}}ref(t,n){return"command"===n.visual?{hostId:n.id,target:t}:"projector"===n.visual?{hostId:t.id,target:n}:void 0}},process:new class{grammar(){return{handles:{visual:"event",owns:!1},invokes:{visual:"command",owns:!1},reads:{visual:"projector",owns:!1}}}edge(t,n){if("event"===n.visual)return{start:n.id,end:t.id,dashed:!0,arrow:!0}}ref(t,n){return"command"===n.visual?{hostId:n.id,target:t}:"projector"===n.visual?{hostId:t.id,target:n}:void 0}},projector:new class{grammar(){return{handles:{visual:"event",owns:!1}}}edge(t,n){return{start:n.id,end:t.id,dashed:!0,arrow:!0}}ref(){}},system:new class{grammar(){return{handles:{visual:"command",owns:!0},emits:{visual:"event",owns:!0}}}edge(t,n){return"command"===n.visual?{start:n.id,end:t.id,dashed:!1,arrow:!0}:{start:t.id,end:n.id,dashed:!1,arrow:!1}}ref(){}}};class i extends Error{constructor(t,n,r){super(`Compiler error at line ${t.from.line}: Expected ${n} but got ${r}`),this.source=t,this.expected=n,this.actual=r}}const o=(t,n,r)=>{throw new i(t.source,n,r)},u=(t="")=>({id:t,visual:"context",nodes:new Map,edges:new Set,refs:new Map,x:0,y:0});var a,c,f,s,h,d,l,v,p,g,y,m,w,b,_,E,x,j,k,N,I,O,S,M,A,z,C,L,T,P,$,D,F,R,B,G,U,V,H,W,q,Y,Z,K,X,J,Q,tt,nt,rt,et,it,ot,ut,at,ct,ft,st,ht,dt,lt,vt,pt,gt,yt,mt,wt,bt,_t,Et,xt,jt,kt,Nt,It,Ot,St,Mt,At,zt,Ct,Lt,Tt,Pt,$t,Dt,Ft,Rt,Bt,Gt,Ut,Vt,Ht,Wt,qt,Yt,Zt,Kt,Xt,Jt,Qt,tn,nn,rn,en,on,un,an,cn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function fn(){if(s)return f;return s=1,f=function(t,n){return t===n||t!=t&&n!=n}}function sn(){if(d)return h;d=1;var t=fn();return h=function(n,r){for(var e=n.length;e--;)if(t(n[e][0],r))return e;return-1}}function hn(){if(E)return _;E=1;var t=c?a:(c=1,a=function(){this.__data__=[],this.size=0}),n=function(){if(v)return l;v=1;var t=sn(),n=Array.prototype.splice;return l=function(r){var e=this.__data__,i=t(e,r);return!(i<0||(i==e.length-1?e.pop():n.call(e,i,1),--this.size,0))}}(),r=function(){if(g)return p;g=1;var t=sn();return p=function(n){var r=this.__data__,e=t(r,n);return e<0?void 0:r[e][1]}}(),e=function(){if(m)return y;m=1;var t=sn();return y=function(n){return t(this.__data__,n)>-1}}(),i=function(){if(b)return w;b=1;var t=sn();return w=function(n,r){var e=this.__data__,i=t(e,n);return i<0?(++this.size,e.push([n,r])):e[i][1]=r,this}}();function o(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=e,o.prototype.set=i,_=o}function dn(){if(z)return A;z=1;var t="object"==typeof cn&&cn&&cn.Object===Object&&cn;return A=t}function ln(){if(L)return C;L=1;var t=dn(),n="object"==typeof self&&self&&self.Object===Object&&self,r=t||n||Function("return this")();return C=r}function vn(){if(P)return T;P=1;var t=ln().Symbol;return T=t}function pn(){if(G)return B;G=1;var t=vn(),n=function(){if(D)return $;D=1;var t=vn(),n=Object.prototype,r=n.hasOwnProperty,e=n.toString,i=t?t.toStringTag:void 0;return $=function(t){var n=r.call(t,i),o=t[i];try{t[i]=void 0;var u=!0}catch(t){}var a=e.call(t);return u&&(n?t[i]=o:delete t[i]),a}}(),r=function(){if(R)return F;R=1;var t=Object.prototype.toString;return F=function(n){return t.call(n)}}(),e=t?t.toStringTag:void 0;return B=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":e&&e in Object(t)?n(t):r(t)}}function gn(){if(V)return U;return V=1,U=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}}function yn(){if(W)return H;W=1;var t=pn(),n=gn();return H=function(r){if(!n(r))return!1;var e=t(r);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}}function mn(){if(K)return Z;K=1;var t,n=function(){if(Y)return q;Y=1;var t=ln()["__core-js_shared__"];return q=t}(),r=(t=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";return Z=function(t){return!!r&&r in t}}function wn(){if(J)return X;J=1;var t=Function.prototype.toString;return X=function(n){if(null!=n){try{return t.call(n)}catch(t){}try{return n+""}catch(t){}}return""}}function bn(){if(it)return et;it=1;var t=function(){if(tt)return Q;tt=1;var t=yn(),n=mn(),r=gn(),e=wn(),i=/^\[object .+?Constructor\]$/,o=Function.prototype,u=Object.prototype,a=o.toString,c=u.hasOwnProperty,f=RegExp("^"+a.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return Q=function(o){return!(!r(o)||n(o))&&(t(o)?f:i).test(e(o))}}(),n=rt?nt:(rt=1,nt=function(t,n){return null==t?void 0:t[n]});return et=function(r,e){var i=n(r,e);return t(i)?i:void 0}}function _n(){if(ut)return ot;ut=1;var t=bn()(ln(),"Map");return ot=t}function En(){if(ct)return at;ct=1;var t=bn()(Object,"create");return at=t}function xn(){if(bt)return wt;bt=1;var t=function(){if(st)return ft;st=1;var t=En();return ft=function(){this.__data__=t?t(null):{},this.size=0}}(),n=dt?ht:(dt=1,ht=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}),r=function(){if(vt)return lt;vt=1;var t=En(),n=Object.prototype.hasOwnProperty;return lt=function(r){var e=this.__data__;if(t){var i=e[r];return"__lodash_hash_undefined__"===i?void 0:i}return n.call(e,r)?e[r]:void 0}}(),e=function(){if(gt)return pt;gt=1;var t=En(),n=Object.prototype.hasOwnProperty;return pt=function(r){var e=this.__data__;return t?void 0!==e[r]:n.call(e,r)}}(),i=function(){if(mt)return yt;mt=1;var t=En();return yt=function(n,r){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=t&&void 0===r?"__lodash_hash_undefined__":r,this}}();function o(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=e,o.prototype.set=i,wt=o}function jn(){if(Nt)return kt;Nt=1;var t=jt?xt:(jt=1,xt=function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t});return kt=function(n,r){var e=n.__data__;return t(r)?e["string"==typeof r?"string":"hash"]:e.map}}function kn(){if(Pt)return Tt;Pt=1;var t=function(){if(Et)return _t;Et=1;var t=xn(),n=hn(),r=_n();return _t=function(){this.size=0,this.__data__={hash:new t,map:new(r||n),string:new t}}}(),n=function(){if(Ot)return It;Ot=1;var t=jn();return It=function(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}}(),r=function(){if(Mt)return St;Mt=1;var t=jn();return St=function(n){return t(this,n).get(n)}}(),e=function(){if(zt)return At;zt=1;var t=jn();return At=function(n){return t(this,n).has(n)}}(),i=function(){if(Lt)return Ct;Lt=1;var t=jn();return Ct=function(n,r){var e=t(this,n),i=e.size;return e.set(n,r),this.size+=e.size==i?0:1,this}}();function o(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=e,o.prototype.set=i,Tt=o}function Nn(){if(Rt)return Ft;Rt=1;var t=hn(),n=function(){if(j)return x;j=1;var t=hn();return x=function(){this.__data__=new t,this.size=0}}(),r=N?k:(N=1,k=function(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}),e=O?I:(O=1,I=function(t){return this.__data__.get(t)}),i=M?S:(M=1,S=function(t){return this.__data__.has(t)}),o=function(){if(Dt)return $t;Dt=1;var t=hn(),n=_n(),r=kn();return $t=function(e,i){var o=this.__data__;if(o instanceof t){var u=o.__data__;if(!n||u.length<199)return u.push([e,i]),this.size=++o.size,this;o=this.__data__=new r(u)}return o.set(e,i),this.size=o.size,this}}();function u(n){var r=this.__data__=new t(n);this.size=r.size}return u.prototype.clear=n,u.prototype.delete=r,u.prototype.get=e,u.prototype.has=i,u.prototype.set=o,Ft=u}function In(){if(Gt)return Bt;return Gt=1,Bt=function(t,n){for(var r=-1,e=null==t?0:t.length;++r<e&&!1!==n(t[r],r,t););return t}}function On(){if(Vt)return Ut;Vt=1;var t=bn(),n=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch(t){}}();return Ut=n}function Sn(){if(Wt)return Ht;Wt=1;var t=On();return Ht=function(n,r,e){"__proto__"==r&&t?t(n,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[r]=e}}function Mn(){if(Yt)return qt;Yt=1;var t=Sn(),n=fn(),r=Object.prototype.hasOwnProperty;return qt=function(e,i,o){var u=e[i];r.call(e,i)&&n(u,o)&&(void 0!==o||i in e)||t(e,i,o)}}function An(){if(Kt)return Zt;Kt=1;var t=Mn(),n=Sn();return Zt=function(r,e,i,o){var u=!i;i||(i={});for(var a=-1,c=e.length;++a<c;){var f=e[a],s=o?o(i[f],r[f],f,i,r):void 0;void 0===s&&(s=r[f]),u?n(i,f,s):t(i,f,s)}return i}}function zn(){if(tn)return Qt;return tn=1,Qt=function(t){return null!=t&&"object"==typeof t}}function Cn(){if(on)return en;on=1;var t=function(){if(rn)return nn;rn=1;var t=pn(),n=zn();return nn=function(r){return n(r)&&"[object Arguments]"==t(r)}}(),n=zn(),r=Object.prototype,e=r.hasOwnProperty,i=r.propertyIsEnumerable,o=t(function(){return arguments}())?t:function(t){return n(t)&&e.call(t,"callee")&&!i.call(t,"callee")};return en=o}function Ln(){if(an)return un;an=1;var t=Array.isArray;return un=t}var Tn,Pn,$n,Dn,Fn,Rn,Bn,Gn,Un,Vn,Hn,Wn={exports:{}};function qn(){return $n||($n=1,function(t,n){var r=ln(),e=Pn?Tn:(Pn=1,Tn=function(){return!1}),i=n&&!n.nodeType&&n,o=i&&t&&!t.nodeType&&t,u=o&&o.exports===i?r.Buffer:void 0,a=(u?u.isBuffer:void 0)||e;t.exports=a}(Wn,Wn.exports)),Wn.exports}function Yn(){if(Fn)return Dn;Fn=1;var t=/^(?:0|[1-9]\d*)$/;return Dn=function(n,r){var e=typeof n;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&t.test(n))&&n>-1&&n%1==0&&n<r}}function Zn(){if(Bn)return Rn;Bn=1;return Rn=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}}function Kn(){if(Hn)return Vn;return Hn=1,Vn=function(t){return function(n){return t(n)}}}Wn.exports;var Xn,Jn,Qn,tr,nr,rr,er,ir,or,ur,ar,cr,fr,sr,hr,dr,lr,vr,pr,gr,yr,mr,wr,br,_r,Er,xr,jr={exports:{}};function kr(){return Xn||(Xn=1,function(t,n){var r=dn(),e=n&&!n.nodeType&&n,i=e&&t&&!t.nodeType&&t,o=i&&i.exports===e&&r.process,u=function(){try{var t=i&&i.require&&i.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=u}(jr,jr.exports)),jr.exports}function Nr(){if(Qn)return Jn;Qn=1;var t=function(){if(Un)return Gn;Un=1;var t=pn(),n=Zn(),r=zn(),e={};return e["[object Float32Array]"]=e["[object Float64Array]"]=e["[object Int8Array]"]=e["[object Int16Array]"]=e["[object Int32Array]"]=e["[object Uint8Array]"]=e["[object Uint8ClampedArray]"]=e["[object Uint16Array]"]=e["[object Uint32Array]"]=!0,e["[object Arguments]"]=e["[object Array]"]=e["[object ArrayBuffer]"]=e["[object Boolean]"]=e["[object DataView]"]=e["[object Date]"]=e["[object Error]"]=e["[object Function]"]=e["[object Map]"]=e["[object Number]"]=e["[object Object]"]=e["[object RegExp]"]=e["[object Set]"]=e["[object String]"]=e["[object WeakMap]"]=!1,Gn=function(i){return r(i)&&n(i.length)&&!!e[t(i)]}}(),n=Kn(),r=kr(),e=r&&r.isTypedArray,i=e?n(e):t;return Jn=i}function Ir(){if(nr)return tr;nr=1;var t=Jt?Xt:(Jt=1,Xt=function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}),n=Cn(),r=Ln(),e=qn(),i=Yn(),o=Nr(),u=Object.prototype.hasOwnProperty;return tr=function(a,c){var f=r(a),s=!f&&n(a),h=!f&&!s&&e(a),d=!f&&!s&&!h&&o(a),l=f||s||h||d,v=l?t(a.length,String):[],p=v.length;for(var g in a)!c&&!u.call(a,g)||l&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,p))||v.push(g);return v}}function Or(){if(er)return rr;er=1;var t=Object.prototype;return rr=function(n){var r=n&&n.constructor;return n===("function"==typeof r&&r.prototype||t)}}function Sr(){if(or)return ir;return or=1,ir=function(t,n){return function(r){return t(n(r))}}}function Mr(){if(fr)return cr;fr=1;var t=Or(),n=function(){if(ar)return ur;ar=1;var t=Sr()(Object.keys,Object);return ur=t}(),r=Object.prototype.hasOwnProperty;return cr=function(e){if(!t(e))return n(e);var i=[];for(var o in Object(e))r.call(e,o)&&"constructor"!=o&&i.push(o);return i}}function Ar(){if(hr)return sr;hr=1;var t=yn(),n=Zn();return sr=function(r){return null!=r&&n(r.length)&&!t(r)}}function zr(){if(lr)return dr;lr=1;var t=Ir(),n=Mr(),r=Ar();return dr=function(e){return r(e)?t(e):n(e)}}function Cr(){if(wr)return mr;wr=1;var t=gn(),n=Or(),r=yr?gr:(yr=1,gr=function(t){var n=[];if(null!=t)for(var r in Object(t))n.push(r);return n}),e=Object.prototype.hasOwnProperty;return mr=function(i){if(!t(i))return r(i);var o=n(i),u=[];for(var a in i)("constructor"!=a||!o&&e.call(i,a))&&u.push(a);return u}}function Lr(){if(_r)return br;_r=1;var t=Ir(),n=Cr(),r=Ar();return br=function(e){return r(e)?t(e,!0):n(e)}}jr.exports;var Tr,Pr,$r,Dr,Fr,Rr,Br,Gr,Ur,Vr,Hr,Wr,qr,Yr,Zr,Kr,Xr,Jr,Qr,te,ne,re,ee,ie,oe,ue,ae,ce,fe,se,he,de,le,ve,pe,ge,ye,me,we,be,_e,Ee,xe,je,ke,Ne,Ie,Oe,Se,Me,Ae,ze,Ce,Le,Te,Pe,$e,De,Fe,Re,Be,Ge,Ue,Ve,He,We,qe,Ye,Ze,Ke,Xe,Je,Qe,ti,ni,ri,ei,ii,oi,ui,ai,ci,fi,si,hi,di,li,vi,pi,gi,yi,mi,wi,bi,_i,Ei,xi,ji,ki,Ni,Ii,Oi,Si,Mi,Ai,zi,Ci,Li,Ti,Pi,$i,Di,Fi,Ri,Bi,Gi,Ui,Vi,Hi,Wi,qi,Yi,Zi,Ki,Xi,Ji,Qi,to,no,ro,eo,io,oo,uo,ao,co,fo,so,ho,lo,vo,po,go,yo,mo,wo,bo,_o,Eo,xo,jo,ko,No,Io,Oo,So,Mo,Ao,zo,Co,Lo,To,Po,$o,Do,Fo,Ro,Bo,Go,Uo,Vo,Ho,Wo,qo,Yo,Zo,Ko,Xo,Jo,Qo,tu,nu,ru,eu,iu,ou,uu,au,cu,fu,su,hu,du,lu,vu,pu,gu,yu,mu,wu,bu,_u,Eu,xu,ju,ku,Nu,Iu,Ou,Su,Mu,Au,zu,Cu,Lu,Tu,Pu,$u,Du,Fu,Ru,Bu,Gu,Uu,Vu,Hu,Wu,qu,Yu,Zu,Ku,Xu,Ju,Qu,ta,na,ra,ea,ia,oa,ua,aa,ca,fa,sa,ha,da,la,va,pa,ga,ya,ma,wa,ba,_a,Ea,xa,ja,ka,Na,Ia,Oa,Sa,Ma,Aa,za,Ca,La,Ta,Pa,$a,Da,Fa,Ra,Ba,Ga,Ua,Va,Ha,Wa={exports:{}};function qa(){return Tr||(Tr=1,function(t,n){var r=ln(),e=n&&!n.nodeType&&n,i=e&&t&&!t.nodeType&&t,o=i&&i.exports===e?r.Buffer:void 0,u=o?o.allocUnsafe:void 0;t.exports=function(t,n){if(n)return t.slice();var r=t.length,e=u?u(r):new t.constructor(r);return t.copy(e),e}}(Wa,Wa.exports)),Wa.exports}function Ya(){if($r)return Pr;return $r=1,Pr=function(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n}}function Za(){if(Fr)return Dr;return Fr=1,Dr=function(t,n){for(var r=-1,e=null==t?0:t.length,i=0,o=[];++r<e;){var u=t[r];n(u,r,t)&&(o[i++]=u)}return o}}function Ka(){if(Br)return Rr;return Br=1,Rr=function(){return[]}}function Xa(){if(Ur)return Gr;Ur=1;var t=Za(),n=Ka(),r=Object.prototype.propertyIsEnumerable,e=Object.getOwnPropertySymbols;return Gr=e?function(n){return null==n?[]:(n=Object(n),t(e(n),(function(t){return r.call(n,t)})))}:n}function Ja(){if(qr)return Wr;return qr=1,Wr=function(t,n){for(var r=-1,e=n.length,i=t.length;++r<e;)t[i+r]=n[r];return t}}function Qa(){if(Zr)return Yr;Zr=1;var t=Sr()(Object.getPrototypeOf,Object);return Yr=t}function tc(){if(Xr)return Kr;Xr=1;var t=Ja(),n=Qa(),r=Xa(),e=Ka(),i=Object.getOwnPropertySymbols;return Kr=i?function(e){for(var i=[];e;)t(i,r(e)),e=n(e);return i}:e}function nc(){if(ne)return te;ne=1;var t=Ja(),n=Ln();return te=function(r,e,i){var o=e(r);return n(r)?o:t(o,i(r))}}function rc(){if(ee)return re;ee=1;var t=nc(),n=Xa(),r=zr();return re=function(e){return t(e,r,n)}}function ec(){if(he)return se;he=1;var t=bn()(ln(),"Set");return se=t}function ic(){if(pe)return ve;pe=1;var t=function(){if(ae)return ue;ae=1;var t=bn()(ln(),"DataView");return ue=t}(),n=_n(),r=function(){if(fe)return ce;fe=1;var t=bn()(ln(),"Promise");return ce=t}(),e=ec(),i=function(){if(le)return de;le=1;var t=bn()(ln(),"WeakMap");return de=t}(),o=pn(),u=wn(),a="[object Map]",c="[object Promise]",f="[object Set]",s="[object WeakMap]",h="[object DataView]",d=u(t),l=u(n),v=u(r),p=u(e),g=u(i),y=o;return(t&&y(new t(new ArrayBuffer(1)))!=h||n&&y(new n)!=a||r&&y(r.resolve())!=c||e&&y(new e)!=f||i&&y(new i)!=s)&&(y=function(t){var n=o(t),r="[object Object]"==n?t.constructor:void 0,e=r?u(r):"";if(e)switch(e){case d:return h;case l:return a;case v:return c;case p:return f;case g:return s}return n}),ve=y}function oc(){if(we)return me;we=1;var t=ln().Uint8Array;return me=t}function uc(){if(_e)return be;_e=1;var t=oc();return be=function(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}}function ac(){if(Se)return Oe;Se=1;var t=uc();return Oe=function(n,r){var e=r?t(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}}function cc(){if(Ae)return Me;Ae=1;var t=uc(),n=function(){if(xe)return Ee;xe=1;var t=uc();return Ee=function(n,r){var e=r?t(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}}(),r=function(){if(ke)return je;ke=1;var t=/\w*$/;return je=function(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}}(),e=function(){if(Ie)return Ne;Ie=1;var t=vn(),n=t?t.prototype:void 0,r=n?n.valueOf:void 0;return Ne=function(t){return r?Object(r.call(t)):{}}}(),i=ac();return Me=function(o,u,a){var c=o.constructor;switch(u){case"[object ArrayBuffer]":return t(o);case"[object Boolean]":case"[object Date]":return new c(+o);case"[object DataView]":return n(o,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i(o,a);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(o);case"[object RegExp]":return r(o);case"[object Symbol]":return e(o)}}}function fc(){if(Ce)return ze;Ce=1;var t=gn(),n=Object.create,r=function(){function r(){}return function(e){if(!t(e))return{};if(n)return n(e);r.prototype=e;var i=new r;return r.prototype=void 0,i}}();return ze=r}function sc(){if(Te)return Le;Te=1;var t=fc(),n=Qa(),r=Or();return Le=function(e){return"function"!=typeof e.constructor||r(e)?{}:t(n(e))}}function hc(){if(Fe)return De;Fe=1;var t=function(){if($e)return Pe;$e=1;var t=ic(),n=zn();return Pe=function(r){return n(r)&&"[object Map]"==t(r)}}(),n=Kn(),r=kr(),e=r&&r.isMap,i=e?n(e):t;return De=i}function dc(){if(Ue)return Ge;Ue=1;var t=function(){if(Be)return Re;Be=1;var t=ic(),n=zn();return Re=function(r){return n(r)&&"[object Set]"==t(r)}}(),n=Kn(),r=kr(),e=r&&r.isSet,i=e?n(e):t;return Ge=i}function lc(){if(He)return Ve;He=1;var t=Nn(),n=In(),r=Mn(),e=function(){if(pr)return vr;pr=1;var t=An(),n=zr();return vr=function(r,e){return r&&t(e,n(e),r)}}(),i=function(){if(xr)return Er;xr=1;var t=An(),n=Lr();return Er=function(r,e){return r&&t(e,n(e),r)}}(),o=qa(),u=Ya(),a=function(){if(Hr)return Vr;Hr=1;var t=An(),n=Xa();return Vr=function(r,e){return t(r,n(r),e)}}(),c=function(){if(Qr)return Jr;Qr=1;var t=An(),n=tc();return Jr=function(r,e){return t(r,n(r),e)}}(),f=rc(),s=function(){if(oe)return ie;oe=1;var t=nc(),n=tc(),r=Lr();return ie=function(e){return t(e,r,n)}}(),h=ic(),d=function(){if(ye)return ge;ye=1;var t=Object.prototype.hasOwnProperty;return ge=function(n){var r=n.length,e=new n.constructor(r);return r&&"string"==typeof n[0]&&t.call(n,"index")&&(e.index=n.index,e.input=n.input),e}}(),l=cc(),v=sc(),p=Ln(),g=qn(),y=hc(),m=gn(),w=dc(),b=zr(),_=Lr(),E="[object Arguments]",x="[object Function]",j="[object Object]",k={};return k[E]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[j]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[x]=k["[object WeakMap]"]=!1,Ve=function N(I,O,S,M,A,z){var C,L=1&O,T=2&O,P=4&O;if(S&&(C=A?S(I,M,A,z):S(I)),void 0!==C)return C;if(!m(I))return I;var $=p(I);if($){if(C=d(I),!L)return u(I,C)}else{var D=h(I),F=D==x||"[object GeneratorFunction]"==D;if(g(I))return o(I,L);if(D==j||D==E||F&&!A){if(C=T||F?{}:v(I),!L)return T?c(I,i(C,I)):a(I,e(C,I))}else{if(!k[D])return A?I:{};C=l(I,D,L)}}z||(z=new t);var R=z.get(I);if(R)return R;z.set(I,C),w(I)?I.forEach((function(t){C.add(N(t,O,S,t,I,z))})):y(I)&&I.forEach((function(t,n){C.set(n,N(t,O,S,n,I,z))}));var B=$?void 0:(P?T?s:f:T?_:b)(I);return n(B||I,(function(t,n){B&&(t=I[n=t]),r(C,n,N(t,O,S,n,I,z))})),C},Ve}function vc(){if(qe)return We;qe=1;var t=lc();return We=function(n){return t(n,4)}}function pc(){if(Ze)return Ye;return Ze=1,Ye=function(t){return function(){return t}}}function gc(){if(Qe)return Je;Qe=1;var t=(Xe?Ke:(Xe=1,Ke=function(t){return function(n,r,e){for(var i=-1,o=Object(n),u=e(n),a=u.length;a--;){var c=u[t?a:++i];if(!1===r(o[c],c,o))break}return n}}))();return Je=t}function yc(){if(ni)return ti;ni=1;var t=gc(),n=zr();return ti=function(r,e){return r&&t(r,e,n)}}function mc(){if(oi)return ii;oi=1;var t=yc(),n=function(){if(ei)return ri;ei=1;var t=Ar();return ri=function(n,r){return function(e,i){if(null==e)return e;if(!t(e))return n(e,i);for(var o=e.length,u=r?o:-1,a=Object(e);(r?u--:++u<o)&&!1!==i(a[u],u,a););return e}}}()(t);return ii=n}function wc(){if(ai)return ui;return ai=1,ui=function(t){return t}}function bc(){if(fi)return ci;fi=1;var t=wc();return ci=function(n){return"function"==typeof n?n:t}}function _c(){if(hi)return si;hi=1;var t=In(),n=mc(),r=bc(),e=Ln();return si=function(i,o){return(e(i)?t:n)(i,r(o))}}function Ec(){return li?di:(li=1,di=_c())}function xc(){if(_i)return bi;_i=1;var t=kn(),n=yi?gi:(yi=1,gi=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}),r=wi?mi:(wi=1,mi=function(t){return this.__data__.has(t)});function e(n){var r=-1,e=null==n?0:n.length;for(this.__data__=new t;++r<e;)this.add(n[r])}return e.prototype.add=e.prototype.push=n,e.prototype.has=r,bi=e}function jc(){if(ki)return ji;return ki=1,ji=function(t,n){return t.has(n)}}function kc(){if(Ii)return Ni;Ii=1;var t=xc(),n=xi?Ei:(xi=1,Ei=function(t,n){for(var r=-1,e=null==t?0:t.length;++r<e;)if(n(t[r],r,t))return!0;return!1}),r=jc();return Ni=function(e,i,o,u,a,c){var f=1&o,s=e.length,h=i.length;if(s!=h&&!(f&&h>s))return!1;var d=c.get(e),l=c.get(i);if(d&&l)return d==i&&l==e;var v=-1,p=!0,g=2&o?new t:void 0;for(c.set(e,i),c.set(i,e);++v<s;){var y=e[v],m=i[v];if(u)var w=f?u(m,y,v,i,e,c):u(y,m,v,e,i,c);if(void 0!==w){if(w)continue;p=!1;break}if(g){if(!n(i,(function(t,n){if(!r(g,n)&&(y===t||a(y,t,o,u,c)))return g.push(n)}))){p=!1;break}}else if(y!==m&&!a(y,m,o,u,c)){p=!1;break}}return c.delete(e),c.delete(i),p}}function Nc(){if(Ai)return Mi;return Ai=1,Mi=function(t){var n=-1,r=Array(t.size);return t.forEach((function(t){r[++n]=t})),r}}function Ic(){if(Ci)return zi;Ci=1;var t=vn(),n=oc(),r=fn(),e=kc(),i=Si?Oi:(Si=1,Oi=function(t){var n=-1,r=Array(t.size);return t.forEach((function(t,e){r[++n]=[e,t]})),r}),o=Nc(),u=t?t.prototype:void 0,a=u?u.valueOf:void 0;return zi=function(t,u,c,f,s,h,d){switch(c){case"[object DataView]":if(t.byteLength!=u.byteLength||t.byteOffset!=u.byteOffset)return!1;t=t.buffer,u=u.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=u.byteLength||!h(new n(t),new n(u)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+t,+u);case"[object Error]":return t.name==u.name&&t.message==u.message;case"[object RegExp]":case"[object String]":return t==u+"";case"[object Map]":var l=i;case"[object Set]":var v=1&f;if(l||(l=o),t.size!=u.size&&!v)return!1;var p=d.get(t);if(p)return p==u;f|=2,d.set(t,u);var g=e(l(t),l(u),f,s,h,d);return d.delete(t),g;case"[object Symbol]":if(a)return a.call(t)==a.call(u)}return!1}}function Oc(){if($i)return Pi;$i=1;var t=Nn(),n=kc(),r=Ic(),e=function(){if(Ti)return Li;Ti=1;var t=rc(),n=Object.prototype.hasOwnProperty;return Li=function(r,e,i,o,u,a){var c=1&i,f=t(r),s=f.length;if(s!=t(e).length&&!c)return!1;for(var h=s;h--;){var d=f[h];if(!(c?d in e:n.call(e,d)))return!1}var l=a.get(r),v=a.get(e);if(l&&v)return l==e&&v==r;var p=!0;a.set(r,e),a.set(e,r);for(var g=c;++h<s;){var y=r[d=f[h]],m=e[d];if(o)var w=c?o(m,y,d,e,r,a):o(y,m,d,r,e,a);if(!(void 0===w?y===m||u(y,m,i,o,a):w)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var b=r.constructor,_=e.constructor;b==_||!("constructor"in r)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(p=!1)}return a.delete(r),a.delete(e),p}}(),i=ic(),o=Ln(),u=qn(),a=Nr(),c="[object Arguments]",f="[object Array]",s="[object Object]",h=Object.prototype.hasOwnProperty;return Pi=function(d,l,v,p,g,y){var m=o(d),w=o(l),b=m?f:i(d),_=w?f:i(l),E=(b=b==c?s:b)==s,x=(_=_==c?s:_)==s,j=b==_;if(j&&u(d)){if(!u(l))return!1;m=!0,E=!1}if(j&&!E)return y||(y=new t),m||a(d)?n(d,l,v,p,g,y):r(d,l,b,v,p,g,y);if(!(1&v)){var k=E&&h.call(d,"__wrapped__"),N=x&&h.call(l,"__wrapped__");if(k||N){var I=k?d.value():d,O=N?l.value():l;return y||(y=new t),g(I,O,v,p,y)}}return!!j&&(y||(y=new t),e(d,l,v,p,g,y))}}function Sc(){if(Fi)return Di;Fi=1;var t=Oc(),n=zn();return Di=function r(e,i,o,u,a){return e===i||(null==e||null==i||!n(e)&&!n(i)?e!=e&&i!=i:t(e,i,o,u,r,a))},Di}function Mc(){if(Ui)return Gi;Ui=1;var t=gn();return Gi=function(n){return n==n&&!t(n)}}function Ac(){if(qi)return Wi;return qi=1,Wi=function(t,n){return function(r){return null!=r&&(r[t]===n&&(void 0!==n||t in Object(r)))}}}function zc(){if(Zi)return Yi;Zi=1;var t=function(){if(Bi)return Ri;Bi=1;var t=Nn(),n=Sc();return Ri=function(r,e,i,o){var u=i.length,a=u,c=!o;if(null==r)return!a;for(r=Object(r);u--;){var f=i[u];if(c&&f[2]?f[1]!==r[f[0]]:!(f[0]in r))return!1}for(;++u<a;){var s=(f=i[u])[0],h=r[s],d=f[1];if(c&&f[2]){if(void 0===h&&!(s in r))return!1}else{var l=new t;if(o)var v=o(h,d,s,r,e,l);if(!(void 0===v?n(d,h,3,o,l):v))return!1}}return!0}}(),n=function(){if(Hi)return Vi;Hi=1;var t=Mc(),n=zr();return Vi=function(r){for(var e=n(r),i=e.length;i--;){var o=e[i],u=r[o];e[i]=[o,u,t(u)]}return e}}(),r=Ac();return Yi=function(e){var i=n(e);return 1==i.length&&i[0][2]?r(i[0][0],i[0][1]):function(n){return n===e||t(n,e,i)}}}function Cc(){if(Xi)return Ki;Xi=1;var t=pn(),n=zn();return Ki=function(r){return"symbol"==typeof r||n(r)&&"[object Symbol]"==t(r)}}function Lc(){if(Qi)return Ji;Qi=1;var t=Ln(),n=Cc(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e=/^\w*$/;return Ji=function(i,o){if(t(i))return!1;var u=typeof i;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=i&&!n(i))||(e.test(i)||!r.test(i)||null!=o&&i in Object(o))}}function Tc(){if(eo)return ro;eo=1;var t=function(){if(no)return to;no=1;var t=kn();function n(r,e){if("function"!=typeof r||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var t=arguments,n=e?e.apply(this,t):t[0],o=i.cache;if(o.has(n))return o.get(n);var u=r.apply(this,t);return i.cache=o.set(n,u)||o,u};return i.cache=new(n.Cache||t),i}return n.Cache=t,to=n}();return ro=function(n){var r=t(n,(function(t){return 500===e.size&&e.clear(),t})),e=r.cache;return r}}function Pc(){if(ao)return uo;return ao=1,uo=function(t,n){for(var r=-1,e=null==t?0:t.length,i=Array(e);++r<e;)i[r]=n(t[r],r,t);return i}}function $c(){if(ho)return so;ho=1;var t=function(){if(fo)return co;fo=1;var t=vn(),n=Pc(),r=Ln(),e=Cc(),i=t?t.prototype:void 0,o=i?i.toString:void 0;return co=function t(i){if("string"==typeof i)return i;if(r(i))return n(i,t)+"";if(e(i))return o?o.call(i):"";var u=i+"";return"0"==u&&1/i==-1/0?"-0":u},co}();return so=function(n){return null==n?"":t(n)}}function Dc(){if(vo)return lo;vo=1;var t=Ln(),n=Lc(),r=function(){if(oo)return io;oo=1;var t=Tc(),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,e=t((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(n,(function(t,n,i,o){e.push(i?o.replace(r,"$1"):n||t)})),e}));return io=e}(),e=$c();return lo=function(i,o){return t(i)?i:n(i,o)?[i]:r(e(i))}}function Fc(){if(go)return po;go=1;var t=Cc();return po=function(n){if("string"==typeof n||t(n))return n;var r=n+"";return"0"==r&&1/n==-Infinity?"-0":r}}function Rc(){if(mo)return yo;mo=1;var t=Dc(),n=Fc();return yo=function(r,e){for(var i=0,o=(e=t(e,r)).length;null!=r&&i<o;)r=r[n(e[i++])];return i&&i==o?r:void 0}}function Bc(){if(jo)return xo;jo=1;var t=Dc(),n=Cn(),r=Ln(),e=Yn(),i=Zn(),o=Fc();return xo=function(u,a,c){for(var f=-1,s=(a=t(a,u)).length,h=!1;++f<s;){var d=o(a[f]);if(!(h=null!=u&&c(u,d)))break;u=u[d]}return h||++f!=s?h:!!(s=null==u?0:u.length)&&i(s)&&e(d,s)&&(r(u)||n(u))}}function Gc(){if(No)return ko;No=1;var t=Eo?_o:(Eo=1,_o=function(t,n){return null!=t&&n in Object(t)}),n=Bc();return ko=function(r,e){return null!=r&&n(r,e,t)}}function Uc(){if(Oo)return Io;Oo=1;var t=Sc(),n=function(){if(bo)return wo;bo=1;var t=Rc();return wo=function(n,r,e){var i=null==n?void 0:t(n,r);return void 0===i?e:i}}(),r=Gc(),e=Lc(),i=Mc(),o=Ac(),u=Fc();return Io=function(a,c){return e(a)&&i(c)?o(u(a),c):function(e){var i=n(e,a);return void 0===i&&i===c?r(e,a):t(c,i,3)}}}function Vc(){if(Mo)return So;return Mo=1,So=function(t){return function(n){return null==n?void 0:n[t]}}}function Hc(){if(Lo)return Co;Lo=1;var t=Vc(),n=function(){if(zo)return Ao;zo=1;var t=Rc();return Ao=function(n){return function(r){return t(r,n)}}}(),r=Lc(),e=Fc();return Co=function(i){return r(i)?t(e(i)):n(i)}}function Wc(){if(Po)return To;Po=1;var t=zc(),n=Uc(),r=wc(),e=Ln(),i=Hc();return To=function(o){return"function"==typeof o?o:null==o?r:"object"==typeof o?e(o)?n(o[0],o[1]):t(o):i(o)}}function qc(){if(Do)return $o;Do=1;var t=Za(),n=function(){if(pi)return vi;pi=1;var t=mc();return vi=function(n,r){var e=[];return t(n,(function(t,n,i){r(t,n,i)&&e.push(t)})),e}}(),r=Wc(),e=Ln();return $o=function(i,o){return(e(i)?t:n)(i,r(o,3))}}function Yc(){if(Go)return Bo;Go=1;var t=function(){if(Ro)return Fo;Ro=1;var t=Object.prototype.hasOwnProperty;return Fo=function(n,r){return null!=n&&t.call(n,r)}}(),n=Bc();return Bo=function(r,e){return null!=r&&n(r,e,t)}}function Zc(){if(Vo)return Uo;Vo=1;var t=Mr(),n=ic(),r=Cn(),e=Ln(),i=Ar(),o=qn(),u=Or(),a=Nr(),c=Object.prototype.hasOwnProperty;return Uo=function(f){if(null==f)return!0;if(i(f)&&(e(f)||"string"==typeof f||"function"==typeof f.splice||o(f)||a(f)||r(f)))return!f.length;var s=n(f);if("[object Map]"==s||"[object Set]"==s)return!f.size;if(u(f))return!t(f).length;for(var h in f)if(c.call(f,h))return!1;return!0}}function Kc(){if(Wo)return Ho;return Wo=1,Ho=function(t){return void 0===t}}function Xc(){if(Yo)return qo;Yo=1;var t=mc(),n=Ar();return qo=function(r,e){var i=-1,o=n(r)?Array(r.length):[];return t(r,(function(t,n,r){o[++i]=e(t,n,r)})),o}}function Jc(){if(Ko)return Zo;Ko=1;var t=Pc(),n=Wc(),r=Xc(),e=Ln();return Zo=function(i,o){return(e(i)?t:r)(i,n(o,3))}}function Qc(){if(ru)return nu;ru=1;var t=Jo?Xo:(Jo=1,Xo=function(t,n,r,e){var i=-1,o=null==t?0:t.length;for(e&&o&&(r=t[++i]);++i<o;)r=n(r,t[i],i,t);return r}),n=mc(),r=Wc(),e=tu?Qo:(tu=1,Qo=function(t,n,r,e,i){return i(t,(function(t,i,o){r=e?(e=!1,t):n(r,t,i,o)})),r}),i=Ln();return nu=function(o,u,a){var c=i(o)?t:e,f=arguments.length<3;return c(o,r(u,4),a,f,n)},nu}function tf(){if(du)return hu;du=1;var t=function(){if(uu)return ou;uu=1;var t=Vc()("length");return ou=t}(),n=function(){if(cu)return au;cu=1;var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");return au=function(n){return t.test(n)}}(),r=function(){if(su)return fu;su=1;var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",e="\\ud83c[\\udffb-\\udfff]",i="[^"+t+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+r+"|"+e+")?",c="[\\ufe0e\\ufe0f]?",f=c+a+"(?:\\u200d(?:"+[i,o,u].join("|")+")"+c+a+")*",s="(?:"+[i+r+"?",r,o,u,n].join("|")+")",h=RegExp(e+"(?="+e+")|"+s+f,"g");return fu=function(t){for(var n=h.lastIndex=0;h.test(t);)++n;return n}}();return hu=function(e){return n(e)?r(e):t(e)}}function nf(){if(vu)return lu;vu=1;var t=Mr(),n=ic(),r=Ar(),e=function(){if(iu)return eu;iu=1;var t=pn(),n=Ln(),r=zn();return eu=function(e){return"string"==typeof e||!n(e)&&r(e)&&"[object String]"==t(e)}}(),i=tf();return lu=function(o){if(null==o)return 0;if(r(o))return e(o)?i(o):o.length;var u=n(o);return"[object Map]"==u||"[object Set]"==u?o.size:t(o).length}}function rf(){if(gu)return pu;gu=1;var t=In(),n=fc(),r=yc(),e=Wc(),i=Qa(),o=Ln(),u=qn(),a=yn(),c=gn(),f=Nr();return pu=function(s,h,d){var l=o(s),v=l||u(s)||f(s);if(h=e(h,4),null==d){var p=s&&s.constructor;d=v?l?new p:[]:c(s)&&a(p)?n(i(s)):{}}return(v?t:r)(s,(function(t,n,r){return h(d,t,n,r)})),d}}function ef(){if(bu)return wu;bu=1;var t=Ja(),n=function(){if(mu)return yu;mu=1;var t=vn(),n=Cn(),r=Ln(),e=t?t.isConcatSpreadable:void 0;return yu=function(t){return r(t)||n(t)||!!(e&&t&&t[e])}}();return wu=function r(e,i,o,u,a){var c=-1,f=e.length;for(o||(o=n),a||(a=[]);++c<f;){var s=e[c];i>0&&o(s)?i>1?r(s,i-1,o,u,a):t(a,s):u||(a[a.length]=s)}return a},wu}function of(){if(ju)return xu;ju=1;var t=Eu?_u:(Eu=1,_u=function(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}),n=Math.max;return xu=function(r,e,i){return e=n(void 0===e?r.length-1:e,0),function(){for(var o=arguments,u=-1,a=n(o.length-e,0),c=Array(a);++u<a;)c[u]=o[e+u];u=-1;for(var f=Array(e+1);++u<e;)f[u]=o[u];return f[e]=i(c),t(r,this,f)}},xu}function uf(){if(Mu)return Su;Mu=1;var t=function(){if(Nu)return ku;Nu=1;var t=pc(),n=On(),r=wc();return ku=n?function(r,e){return n(r,"toString",{configurable:!0,enumerable:!1,value:t(e),writable:!0})}:r}(),n=function(){if(Ou)return Iu;Ou=1;var t=Date.now;return Iu=function(n){var r=0,e=0;return function(){var i=t(),o=16-(i-e);if(e=i,o>0){if(++r>=800)return arguments[0]}else r=0;return n.apply(void 0,arguments)}},Iu}(),r=n(t);return Su=r}function af(){if(zu)return Au;zu=1;var t=wc(),n=of(),r=uf();return Au=function(e,i){return r(n(e,i,t),e+"")}}function cf(){if(Lu)return Cu;return Lu=1,Cu=function(t,n,r,e){for(var i=t.length,o=r+(e?1:-1);e?o--:++o<i;)if(n(t[o],o,t))return o;return-1}}function ff(){if(Ru)return Fu;Ru=1;var t=cf(),n=Pu?Tu:(Pu=1,Tu=function(t){return t!=t}),r=Du?$u:(Du=1,$u=function(t,n,r){for(var e=r-1,i=t.length;++e<i;)if(t[e]===n)return e;return-1});return Fu=function(e,i,o){return i==i?r(e,i,o):t(e,n,o)}}function sf(){if(Yu)return qu;Yu=1;var t=ec(),n=Wu?Hu:(Wu=1,Hu=function(){}),r=Nc(),e=t&&1/r(new t([,-0]))[1]==1/0?function(n){return new t(n)}:n;return qu=e}function hf(){if(Ku)return Zu;Ku=1;var t=xc(),n=function(){if(Gu)return Bu;Gu=1;var t=ff();return Bu=function(n,r){return!(null==n||!n.length)&&t(n,r,0)>-1}}(),r=Vu?Uu:(Vu=1,Uu=function(t,n,r){for(var e=-1,i=null==t?0:t.length;++e<i;)if(r(n,t[e]))return!0;return!1}),e=jc(),i=sf(),o=Nc();return Zu=function(u,a,c){var f=-1,s=n,h=u.length,d=!0,l=[],v=l;if(c)d=!1,s=r;else if(h>=200){var p=a?null:i(u);if(p)return o(p);d=!1,s=e,v=new t}else v=a?[]:l;t:for(;++f<h;){var g=u[f],y=a?a(g):g;if(g=c||0!==g?g:0,d&&y==y){for(var m=v.length;m--;)if(v[m]===y)continue t;a&&v.push(y),l.push(g)}else s(v,y,c)||(v!==l&&v.push(y),l.push(g))}return l}}function df(){if(Ju)return Xu;Ju=1;var t=Ar(),n=zn();return Xu=function(r){return n(r)&&t(r)}}function lf(){if(ta)return Qu;ta=1;var t=ef(),n=af(),r=hf(),e=df(),i=n((function(n){return r(t(n,1,e,!0))}));return Qu=i}function vf(){if(ia)return ea;ia=1;var t=function(){if(ra)return na;ra=1;var t=Pc();return na=function(n,r){return t(r,(function(t){return n[t]}))}}(),n=zr();return ea=function(r){return null==r?[]:t(r,n(r))}}function pf(){if(ua)return oa;var t;ua=1;try{t={clone:vc(),constant:pc(),each:Ec(),filter:qc(),has:Yc(),isArray:Ln(),isEmpty:Zc(),isFunction:yn(),isUndefined:Kc(),keys:zr(),map:Jc(),reduce:Qc(),size:nf(),transform:rf(),union:lf(),values:vf()}}catch(t){}return t||(t=window._),oa=t}function gf(){if(ca)return aa;ca=1;var t=pf();aa=i;var n="\0",r="\0",e="";function i(n){this._isDirected=!t.has(n,"directed")||n.directed,this._isMultigraph=!!t.has(n,"multigraph")&&n.multigraph,this._isCompound=!!t.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function o(t,n){t[n]?t[n]++:t[n]=1}function u(t,n){--t[n]||delete t[n]}function a(r,i,o,u){var a=""+i,c=""+o;if(!r&&a>c){var f=a;a=c,c=f}return a+e+c+e+(t.isUndefined(u)?n:u)}function c(t,n){return a(t,n.v,n.w,n.name)}return i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(t){return this._label=t,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(n){return t.isFunction(n)||(n=t.constant(n)),this._defaultNodeLabelFn=n,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var n=this;return t.filter(this.nodes(),(function(r){return t.isEmpty(n._in[r])}))},i.prototype.sinks=function(){var n=this;return t.filter(this.nodes(),(function(r){return t.isEmpty(n._out[r])}))},i.prototype.setNodes=function(n,r){var e=arguments,i=this;return t.each(n,(function(t){e.length>1?i.setNode(t,r):i.setNode(t)})),this},i.prototype.setNode=function(n,e){return t.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=e),this):(this._nodes[n]=arguments.length>1?e:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]=r,this._children[n]={},this._children[r][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},i.prototype.node=function(t){return this._nodes[t]},i.prototype.hasNode=function(n){return t.has(this._nodes,n)},i.prototype.removeNode=function(n){var r=this;if(t.has(this._nodes,n)){var e=function(t){r.removeEdge(r._edgeObjs[t])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],t.each(this.children(n),(function(t){r.setParent(t)})),delete this._children[n]),t.each(t.keys(this._in[n]),e),delete this._in[n],delete this._preds[n],t.each(t.keys(this._out[n]),e),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},i.prototype.setParent=function(n,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(e))e=r;else{for(var i=e+="";!t.isUndefined(i);i=this.parent(i))if(i===n)throw new Error("Setting "+e+" as parent of "+n+" would create a cycle");this.setNode(e)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=e,this._children[e][n]=!0,this},i.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},i.prototype.parent=function(t){if(this._isCompound){var n=this._parent[t];if(n!==r)return n}},i.prototype.children=function(n){if(t.isUndefined(n)&&(n=r),this._isCompound){var e=this._children[n];if(e)return t.keys(e)}else{if(n===r)return this.nodes();if(this.hasNode(n))return[]}},i.prototype.predecessors=function(n){var r=this._preds[n];if(r)return t.keys(r)},i.prototype.successors=function(n){var r=this._sucs[n];if(r)return t.keys(r)},i.prototype.neighbors=function(n){var r=this.predecessors(n);if(r)return t.union(r,this.successors(n))},i.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},i.prototype.filterNodes=function(n){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var e=this;t.each(this._nodes,(function(t,e){n(e)&&r.setNode(e,t)})),t.each(this._edgeObjs,(function(t){r.hasNode(t.v)&&r.hasNode(t.w)&&r.setEdge(t,e.edge(t))}));var i={};function o(t){var n=e.parent(t);return void 0===n||r.hasNode(n)?(i[t]=n,n):n in i?i[n]:o(n)}return this._isCompound&&t.each(r.nodes(),(function(t){r.setParent(t,o(t))})),r},i.prototype.setDefaultEdgeLabel=function(n){return t.isFunction(n)||(n=t.constant(n)),this._defaultEdgeLabelFn=n,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(n,r){var e=this,i=arguments;return t.reduce(n,(function(t,n){return i.length>1?e.setEdge(t,n,r):e.setEdge(t,n),n})),this},i.prototype.setEdge=function(){var n,r,e,i,u=!1,c=arguments[0];"object"==typeof c&&null!==c&&"v"in c?(n=c.v,r=c.w,e=c.name,2===arguments.length&&(i=arguments[1],u=!0)):(n=c,r=arguments[1],e=arguments[3],arguments.length>2&&(i=arguments[2],u=!0)),n=""+n,r=""+r,t.isUndefined(e)||(e=""+e);var f=a(this._isDirected,n,r,e);if(t.has(this._edgeLabels,f))return u&&(this._edgeLabels[f]=i),this;if(!t.isUndefined(e)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(r),this._edgeLabels[f]=u?i:this._defaultEdgeLabelFn(n,r,e);var s=function(t,n,r,e){var i=""+n,o=""+r;if(!t&&i>o){var u=i;i=o,o=u}var a={v:i,w:o};e&&(a.name=e);return a}(this._isDirected,n,r,e);return n=s.v,r=s.w,Object.freeze(s),this._edgeObjs[f]=s,o(this._preds[r],n),o(this._sucs[n],r),this._in[r][f]=s,this._out[n][f]=s,this._edgeCount++,this},i.prototype.edge=function(t,n,r){var e=1===arguments.length?c(this._isDirected,arguments[0]):a(this._isDirected,t,n,r);return this._edgeLabels[e]},i.prototype.hasEdge=function(n,r,e){var i=1===arguments.length?c(this._isDirected,arguments[0]):a(this._isDirected,n,r,e);return t.has(this._edgeLabels,i)},i.prototype.removeEdge=function(t,n,r){var e=1===arguments.length?c(this._isDirected,arguments[0]):a(this._isDirected,t,n,r),i=this._edgeObjs[e];return i&&(t=i.v,n=i.w,delete this._edgeLabels[e],delete this._edgeObjs[e],u(this._preds[n],t),u(this._sucs[t],n),delete this._in[n][e],delete this._out[t][e],this._edgeCount--),this},i.prototype.inEdges=function(n,r){var e=this._in[n];if(e){var i=t.values(e);return r?t.filter(i,(function(t){return t.v===r})):i}},i.prototype.outEdges=function(n,r){var e=this._out[n];if(e){var i=t.values(e);return r?t.filter(i,(function(t){return t.w===r})):i}},i.prototype.nodeEdges=function(t,n){var r=this.inEdges(t,n);if(r)return r.concat(this.outEdges(t,n))},aa}function yf(){return da?ha:(da=1,ha={Graph:gf(),version:sa?fa:(sa=1,fa="2.1.8")})}function mf(){if(va)return la;va=1;var t=pf(),n=gf();function r(n){return t.map(n.nodes(),(function(r){var e=n.node(r),i=n.parent(r),o={v:r};return t.isUndefined(e)||(o.value=e),t.isUndefined(i)||(o.parent=i),o}))}function e(n){return t.map(n.edges(),(function(r){var e=n.edge(r),i={v:r.v,w:r.w};return t.isUndefined(r.name)||(i.name=r.name),t.isUndefined(e)||(i.value=e),i}))}return la={write:function(n){var i={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:r(n),edges:e(n)};t.isUndefined(n.graph())||(i.value=t.clone(n.graph()));return i},read:function(r){var e=new n(r.options).setGraph(r.value);return t.each(r.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),t.each(r.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}}function wf(){if(ga)return pa;ga=1;var t=pf();return pa=function(n){var r,e={},i=[];function o(i){t.has(e,i)||(e[i]=!0,r.push(i),t.each(n.successors(i),o),t.each(n.predecessors(i),o))}return t.each(n.nodes(),(function(t){r=[],o(t),r.length&&i.push(r)})),i},pa}function bf(){if(ma)return ya;ma=1;var t=pf();function n(){this._arr=[],this._keyIndices={}}return ya=n,n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},n.prototype.has=function(n){return t.has(this._keyIndices,n)},n.prototype.priority=function(t){var n=this._keyIndices[t];if(void 0!==n)return this._arr[n].priority},n.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(n,r){var e=this._keyIndices;if(n=String(n),!t.has(e,n)){var i=this._arr,o=i.length;return e[n]=o,i.push({key:n,priority:r}),this._decrease(o),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},n.prototype.decrease=function(t,n){var r=this._keyIndices[t];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)},n.prototype._heapify=function(t){var n=this._arr,r=2*t,e=r+1,i=t;r<n.length&&(i=n[r].priority<n[i].priority?r:i,e<n.length&&(i=n[e].priority<n[i].priority?e:i),i!==t&&(this._swap(t,i),this._heapify(i)))},n.prototype._decrease=function(t){for(var n,r=this._arr,e=r[t].priority;0!==t&&!(r[n=t>>1].priority<e);)this._swap(t,n),t=n},n.prototype._swap=function(t,n){var r=this._arr,e=this._keyIndices,i=r[t],o=r[n];r[t]=o,r[n]=i,e[o.key]=t,e[i.key]=n},ya}function _f(){if(ba)return wa;ba=1;var t=pf(),n=bf();wa=function(t,e,i,o){return function(t,r,e,i){var o,u,a={},c=new n,f=function(t){var n=t.v!==o?t.v:t.w,r=a[n],i=e(t),f=u.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);f<r.distance&&(r.distance=f,r.predecessor=o,c.decrease(n,f))};t.nodes().forEach((function(t){var n=t===r?0:Number.POSITIVE_INFINITY;a[t]={distance:n},c.add(t,n)}));for(;c.size()>0&&(o=c.removeMin(),(u=a[o]).distance!==Number.POSITIVE_INFINITY);)i(o).forEach(f);return a}(t,String(e),i||r,o||function(n){return t.outEdges(n)})};var r=t.constant(1);return wa}function Ef(){if(Ea)return _a;Ea=1;var t=_f(),n=pf();return _a=function(r,e,i){return n.transform(r.nodes(),(function(n,o){n[o]=t(r,o,e,i)}),{})}}function xf(){if(ja)return xa;ja=1;var t=pf();return xa=function(n){var r=0,e=[],i={},o=[];function u(a){var c=i[a]={onStack:!0,lowlink:r,index:r++};if(e.push(a),n.successors(a).forEach((function(n){t.has(i,n)?i[n].onStack&&(c.lowlink=Math.min(c.lowlink,i[n].index)):(u(n),c.lowlink=Math.min(c.lowlink,i[n].lowlink))})),c.lowlink===c.index){var f,s=[];do{f=e.pop(),i[f].onStack=!1,s.push(f)}while(a!==f);o.push(s)}}return n.nodes().forEach((function(n){t.has(i,n)||u(n)})),o},xa}function jf(){if(Na)return ka;Na=1;var t=pf(),n=xf();return ka=function(r){return t.filter(n(r),(function(t){return t.length>1||1===t.length&&r.hasEdge(t[0],t[0])}))}}function kf(){if(Oa)return Ia;Oa=1;var t=pf();Ia=function(t,r,e){return function(t,n,r){var e={},i=t.nodes();return i.forEach((function(t){e[t]={},e[t][t]={distance:0},i.forEach((function(n){t!==n&&(e[t][n]={distance:Number.POSITIVE_INFINITY})})),r(t).forEach((function(r){var i=r.v===t?r.w:r.v,o=n(r);e[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var n=e[t];i.forEach((function(r){var o=e[r];i.forEach((function(r){var e=o[t],i=n[r],u=o[r],a=e.distance+i.distance;a<u.distance&&(u.distance=a,u.predecessor=i.predecessor)}))}))})),e}(t,r||n,e||function(n){return t.outEdges(n)})};var n=t.constant(1);return Ia}function Nf(){if(Ma)return Sa;Ma=1;var t=pf();function n(n){var e={},i={},o=[];if(t.each(n.sinks(),(function u(a){if(t.has(i,a))throw new r;t.has(e,a)||(i[a]=!0,e[a]=!0,t.each(n.predecessors(a),u),delete i[a],o.push(a))})),t.size(e)!==n.nodeCount())throw new r;return o}function r(){}return Sa=n,n.CycleException=r,r.prototype=new Error,Sa}function If(){if(za)return Aa;za=1;var t=Nf();return Aa=function(n){try{t(n)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0}}function Of(){if(La)return Ca;La=1;var t=pf();function n(r,e,i,o,u,a){t.has(o,e)||(o[e]=!0,i||a.push(e),t.each(u(e),(function(t){n(r,t,i,o,u,a)})),i&&a.push(e))}return Ca=function(r,e,i){t.isArray(e)||(e=[e]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),u=[],a={};return t.each(e,(function(t){if(!r.hasNode(t))throw new Error("Graph does not have node: "+t);n(r,t,"post"===i,a,o,u)})),u},Ca}function Sf(){if(Pa)return Ta;Pa=1;var t=Of();return Ta=function(n,r){return t(n,r,"post")}}function Mf(){if(Da)return $a;Da=1;var t=Of();return $a=function(n,r){return t(n,r,"pre")}}function Af(){if(Ra)return Fa;Ra=1;var t=pf(),n=gf(),r=bf();return Fa=function(e,i){var o,u=new n,a={},c=new r;function f(t){var n=t.v===o?t.w:t.v,r=c.priority(n);if(void 0!==r){var e=i(t);e<r&&(a[n]=o,c.decrease(n,e))}}if(0===e.nodeCount())return u;t.each(e.nodes(),(function(t){c.add(t,Number.POSITIVE_INFINITY),u.setNode(t)})),c.decrease(e.nodes()[0],0);var s=!1;for(;c.size()>0;){if(o=c.removeMin(),t.has(a,o))u.setEdge(o,a[o]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(o).forEach(f)}return u}}Wa.exports;try{Ha=function(){if(Va)return Ua;Va=1;var t=yf();return Ua={Graph:t.Graph,json:mf(),alg:Ga?Ba:(Ga=1,Ba={components:wf(),dijkstra:_f(),dijkstraAll:Ef(),findCycles:jf(),floydWarshall:kf(),isAcyclic:If(),postorder:Sf(),preorder:Mf(),prim:Af(),tarjan:xf(),topsort:Nf()}),version:t.version}}()}catch(t){}Ha||(Ha=window.graphlib);var zf,Cf,Lf,Tf,Pf,$f,Df,Ff,Rf,Bf,Gf,Uf,Vf,Hf,Wf,qf,Yf,Zf,Kf,Xf,Jf,Qf,ts,ns,rs,es,is,os,us,as,cs,fs,ss,hs,ds,ls,vs,ps,gs,ys,ms,ws,bs,_s,Es,xs,js,ks,Ns,Is,Os,Ss,Ms,As,zs,Cs,Ls,Ts,Ps,$s,Ds,Fs,Rs,Bs,Gs,Us,Vs,Hs,Ws,qs,Ys,Zs,Ks,Xs,Js,Qs,th,nh,rh,eh,ih,oh,uh,ah,ch,fh,sh,hh,dh,lh,vh,ph,gh,yh=Ha;function mh(){if(Tf)return Lf;Tf=1;var t=fn(),n=Ar(),r=Yn(),e=gn();return Lf=function(i,o,u){if(!e(u))return!1;var a=typeof o;return!!("number"==a?n(u)&&r(o,u.length):"string"==a&&o in u)&&t(u[o],i)}}function wh(){if(Uf)return Gf;Uf=1;var t=function(){if(Bf)return Rf;Bf=1;var t=/\s/;return Rf=function(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}}(),n=/^\s+/;return Gf=function(r){return r?r.slice(0,t(r)+1).replace(n,""):r}}function bh(){if(qf)return Wf;qf=1;var t=function(){if(Hf)return Vf;Hf=1;var t=wh(),n=gn(),r=Cc(),e=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt;return Vf=function(a){if("number"==typeof a)return a;if(r(a))return NaN;if(n(a)){var c="function"==typeof a.valueOf?a.valueOf():a;a=n(c)?c+"":c}if("string"!=typeof a)return 0===a?a:+a;a=t(a);var f=i.test(a);return f||o.test(a)?u(a.slice(2),f?2:8):e.test(a)?NaN:+a}}(),n=1/0;return Wf=function(r){return r?(r=t(r))===n||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0}}function _h(){if(Xf)return Kf;Xf=1;var t=cf(),n=Wc(),r=function(){if(Zf)return Yf;Zf=1;var t=bh();return Yf=function(n){var r=t(n),e=r%1;return r==r?e?r-e:r:0}}(),e=Math.max;return Kf=function(i,o,u){var a=null==i?0:i.length;if(!a)return-1;var c=null==u?0:r(u);return c<0&&(c=e(a+c,0)),t(i,n(o,3),c)}}function Eh(){if(ns)return ts;ns=1;var t=ef();return ts=function(n){return(null==n?0:n.length)?t(n,1):[]}}function xh(){if(fs)return cs;fs=1;var t=Cc();return cs=function(n,r,e){for(var i=-1,o=n.length;++i<o;){var u=n[i],a=r(u);if(null!=a&&(void 0===c?a==a&&!t(a):e(a,c)))var c=a,f=u}return f}}function jh(){if(ps)return vs;ps=1;var t=Sn(),n=fn();return vs=function(r,e,i){(void 0!==i&&!n(r[e],i)||void 0===i&&!(e in r))&&t(r,e,i)}}function kh(){if(ws)return ms;return ws=1,ms=function(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}}function Nh(){if(xs)return Es;xs=1;var t=jh(),n=qa(),r=ac(),e=Ya(),i=sc(),o=Cn(),u=Ln(),a=df(),c=qn(),f=yn(),s=gn(),h=function(){if(ys)return gs;ys=1;var t=pn(),n=Qa(),r=zn(),e=Function.prototype,i=Object.prototype,o=e.toString,u=i.hasOwnProperty,a=o.call(Object);return gs=function(e){if(!r(e)||"[object Object]"!=t(e))return!1;var i=n(e);if(null===i)return!0;var c=u.call(i,"constructor")&&i.constructor;return"function"==typeof c&&c instanceof c&&o.call(c)==a}}(),d=Nr(),l=kh(),v=function(){if(_s)return bs;_s=1;var t=An(),n=Lr();return bs=function(r){return t(r,n(r))}}();return Es=function(p,g,y,m,w,b,_){var E=l(p,y),x=l(g,y),j=_.get(x);if(j)t(p,y,j);else{var k=b?b(E,x,y+"",p,g,_):void 0,N=void 0===k;if(N){var I=u(x),O=!I&&c(x),S=!I&&!O&&d(x);k=x,I||O||S?u(E)?k=E:a(E)?k=e(E):O?(N=!1,k=n(x,!0)):S?(N=!1,k=r(x,!0)):k=[]:h(x)||o(x)?(k=E,o(E)?k=v(E):s(E)&&!f(E)||(k=i(x))):N=!1}N&&(_.set(x,k),w(k,x,m,b,_),_.delete(x)),t(p,y,k)}}}function Ih(){if(As)return Ms;return As=1,Ms=function(t,n){return t<n}}function Oh(){if(Bs)return Rs;Bs=1;var t=Rc(),n=function(){if(Fs)return Ds;Fs=1;var t=Mn(),n=Dc(),r=Yn(),e=gn(),i=Fc();return Ds=function(o,u,a,c){if(!e(o))return o;for(var f=-1,s=(u=n(u,o)).length,h=s-1,d=o;null!=d&&++f<s;){var l=i(u[f]),v=a;if("__proto__"===l||"constructor"===l||"prototype"===l)return o;if(f!=h){var p=d[l];void 0===(v=c?c(p,l,d):void 0)&&(v=e(p)?p:r(u[f+1])?[]:{})}t(d,l,v),d=d[l]}return o}}(),r=Dc();return Rs=function(e,i,o){for(var u=-1,a=i.length,c={};++u<a;){var f=i[u],s=t(e,f);o(s,f)&&n(c,r(f,e),s)}return c}}function Sh(){if(Xs)return Ks;Xs=1;var t=function(){if(Zs)return Ys;Zs=1;var t=Math.ceil,n=Math.max;return Ys=function(r,e,i,o){for(var u=-1,a=n(t((e-r)/(i||1)),0),c=Array(a);a--;)c[o?a:++u]=r,r+=i;return c}}(),n=mh(),r=bh();return Ks=function(e){return function(i,o,u){return u&&"number"!=typeof u&&n(i,o,u)&&(o=u=void 0),i=r(i),void 0===o?(o=i,i=0):o=r(o),u=void 0===u?i<o?1:-1:r(u),t(i,o,u,e)}}}function Mh(){if(oh)return ih;oh=1;var t=function(){if(eh)return rh;eh=1;var t=Cc();return rh=function(n,r){if(n!==r){var e=void 0!==n,i=null===n,o=n==n,u=t(n),a=void 0!==r,c=null===r,f=r==r,s=t(r);if(!c&&!s&&!u&&n>r||u&&a&&f&&!c&&!s||i&&a&&f||!e&&f||!o)return 1;if(!i&&!u&&!s&&n<r||s&&e&&o&&!i&&!u||c&&e&&o||!a&&o||!f)return-1}return 0}}();return ih=function(n,r,e){for(var i=-1,o=n.criteria,u=r.criteria,a=o.length,c=e.length;++i<a;){var f=t(o[i],u[i]);if(f)return i>=c?f:f*("desc"==e[i]?-1:1)}return n.index-r.index}}function Ah(){if(ah)return uh;ah=1;var t=Pc(),n=Rc(),r=Wc(),e=Xc(),i=nh?th:(nh=1,th=function(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}),o=Kn(),u=Mh(),a=wc(),c=Ln();return uh=function(f,s,h){s=s.length?t(s,(function(t){return c(t)?function(r){return n(r,1===t.length?t[0]:t)}:t})):[a];var d=-1;s=t(s,o(r));var l=e(f,(function(n,r,e){return{criteria:t(s,(function(t){return t(n)})),index:++d,value:n}}));return i(l,(function(t,n){return u(t,n,h)}))}}try{gh={cloneDeep:function(){if(Cf)return zf;Cf=1;var t=lc();return zf=function(n){return t(n,5)}}(),constant:pc(),defaults:function(){if($f)return Pf;$f=1;var t=af(),n=fn(),r=mh(),e=Lr(),i=Object.prototype,o=i.hasOwnProperty,u=t((function(t,u){t=Object(t);var a=-1,c=u.length,f=c>2?u[2]:void 0;for(f&&r(u[0],u[1],f)&&(c=1);++a<c;)for(var s=u[a],h=e(s),d=-1,l=h.length;++d<l;){var v=h[d],p=t[v];(void 0===p||n(p,i[v])&&!o.call(t,v))&&(t[v]=s[v])}return t}));return Pf=u}(),each:Ec(),filter:qc(),find:function(){if(Qf)return Jf;Qf=1;var t=function(){if(Ff)return Df;Ff=1;var t=Wc(),n=Ar(),r=zr();return Df=function(e){return function(i,o,u){var a=Object(i);if(!n(i)){var c=t(o,3);i=r(i),o=function(t){return c(a[t],t,a)}}var f=e(i,o,u);return f>-1?a[c?i[f]:f]:void 0}}}()(_h());return Jf=t}(),flatten:Eh(),forEach:_c(),forIn:function(){if(es)return rs;es=1;var t=gc(),n=bc(),r=Lr();return rs=function(e,i){return null==e?e:t(e,n(i),r)}}(),has:Yc(),isUndefined:Kc(),last:os?is:(os=1,is=function(t){var n=null==t?0:t.length;return n?t[n-1]:void 0}),map:Jc(),mapValues:function(){if(as)return us;as=1;var t=Sn(),n=yc(),r=Wc();return us=function(e,i){var o={};return i=r(i,3),n(e,(function(n,r,e){t(o,r,i(n,r,e))})),o}}(),max:function(){if(ls)return ds;ls=1;var t=xh(),n=hs?ss:(hs=1,ss=function(t,n){return t>n}),r=wc();return ds=function(e){return e&&e.length?t(e,r,n):void 0}}(),merge:function(){if(Ss)return Os;Ss=1;var t=function(){if(ks)return js;ks=1;var t=Nn(),n=jh(),r=gc(),e=Nh(),i=gn(),o=Lr(),u=kh();return js=function a(c,f,s,h,d){c!==f&&r(f,(function(r,o){if(d||(d=new t),i(r))e(c,f,o,s,a,h,d);else{var l=h?h(u(c,o),r,o+"",c,f,d):void 0;void 0===l&&(l=r),n(c,o,l)}}),o)},js}(),n=function(){if(Is)return Ns;Is=1;var t=af(),n=mh();return Ns=function(r){return t((function(t,e){var i=-1,o=e.length,u=o>1?e[o-1]:void 0,a=o>2?e[2]:void 0;for(u=r.length>3&&"function"==typeof u?(o--,u):void 0,a&&n(e[0],e[1],a)&&(u=o<3?void 0:u,o=1),t=Object(t);++i<o;){var c=e[i];c&&r(t,c,i,u)}return t}))}}()((function(n,r,e){t(n,r,e)}));return Os=n}(),min:function(){if(Cs)return zs;Cs=1;var t=xh(),n=Ih(),r=wc();return zs=function(e){return e&&e.length?t(e,r,n):void 0}}(),minBy:function(){if(Ts)return Ls;Ts=1;var t=xh(),n=Wc(),r=Ih();return Ls=function(e,i){return e&&e.length?t(e,n(i,2),r):void 0}}(),now:function(){if($s)return Ps;$s=1;var t=ln();return Ps=function(){return t.Date.now()}}(),pick:function(){if(qs)return Ws;qs=1;var t=function(){if(Us)return Gs;Us=1;var t=Oh(),n=Gc();return Gs=function(r,e){return t(r,e,(function(t,e){return n(r,e)}))}}(),n=function(){if(Hs)return Vs;Hs=1;var t=Eh(),n=of(),r=uf();return Vs=function(e){return r(n(e,void 0,t),e+"")}}()((function(n,r){return null==n?{}:t(n,r)}));return Ws=n}(),range:function(){if(Qs)return Js;Qs=1;var t=Sh()();return Js=t}(),reduce:Qc(),sortBy:function(){if(fh)return ch;fh=1;var t=ef(),n=Ah(),r=af(),e=mh(),i=r((function(r,i){if(null==r)return[];var o=i.length;return o>1&&e(r,i[0],i[1])?i=[]:o>2&&e(i[0],i[1],i[2])&&(i=[i[0]]),n(r,t(i,1),[])}));return ch=i}(),uniqueId:function(){if(hh)return sh;hh=1;var t=$c(),n=0;return sh=function(r){var e=++n;return t(r)+e}}(),values:vf(),zipObject:function(){if(ph)return vh;ph=1;var t=Mn(),n=lh?dh:(lh=1,dh=function(t,n,r){for(var e=-1,i=t.length,o=n.length,u={};++e<i;){var a=e<o?n[e]:void 0;r(u,t[e],a)}return u});return vh=function(r,e){return n(r||[],e||[],t)}}()}}catch(t){}gh||(gh=window._);var zh=gh,Ch=Lh;function Lh(){var t={};t._next=t._prev=t,this._sentinel=t}function Th(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Ph(t,n){if("_next"!==t&&"_prev"!==t)return n}Lh.prototype.dequeue=function(){var t=this._sentinel,n=t._prev;if(n!==t)return Th(n),n},Lh.prototype.enqueue=function(t){var n=this._sentinel;t._prev&&t._next&&Th(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n},Lh.prototype.toString=function(){for(var t=[],n=this._sentinel,r=n._prev;r!==n;)t.push(JSON.stringify(r,Ph)),r=r._prev;return"["+t.join(", ")+"]"};var $h=zh,Dh=yh.Graph,Fh=Ch,Rh=function(t,n){if(t.nodeCount()<=1)return[];var r=function(t,n){var r=new Dh,e=0,i=0;$h.forEach(t.nodes(),(function(t){r.setNode(t,{v:t,in:0,out:0})})),$h.forEach(t.edges(),(function(t){var o=r.edge(t.v,t.w)||0,u=n(t),a=o+u;r.setEdge(t.v,t.w,a),i=Math.max(i,r.node(t.v).out+=u),e=Math.max(e,r.node(t.w).in+=u)}));var o=$h.range(i+e+3).map((function(){return new Fh})),u=e+1;return $h.forEach(r.nodes(),(function(t){Uh(o,u,r.node(t))})),{graph:r,buckets:o,zeroIdx:u}}(t,n||Bh),e=function(t,n,r){var e,i=[],o=n[n.length-1],u=n[0];for(;t.nodeCount();){for(;e=u.dequeue();)Gh(t,n,r,e);for(;e=o.dequeue();)Gh(t,n,r,e);if(t.nodeCount())for(var a=n.length-2;a>0;--a)if(e=n[a].dequeue()){i=i.concat(Gh(t,n,r,e,!0));break}}return i}(r.graph,r.buckets,r.zeroIdx);return $h.flatten($h.map(e,(function(n){return t.outEdges(n.v,n.w)})),!0)},Bh=$h.constant(1);function Gh(t,n,r,e,i){var o=i?[]:void 0;return $h.forEach(t.inEdges(e.v),(function(e){var u=t.edge(e),a=t.node(e.v);i&&o.push({v:e.v,w:e.w}),a.out-=u,Uh(n,r,a)})),$h.forEach(t.outEdges(e.v),(function(e){var i=t.edge(e),o=e.w,u=t.node(o);u.in-=i,Uh(n,r,u)})),t.removeNode(e.v),o}function Uh(t,n,r){r.out?r.in?t[r.out-r.in+n].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}var Vh=zh,Hh=Rh,Wh={run:function(t){var n="greedy"===t.graph().acyclicer?Hh(t,function(t){return function(n){return t.edge(n).weight}}(t)):function(t){var n=[],r={},e={};function i(o){Vh.has(e,o)||(e[o]=!0,r[o]=!0,Vh.forEach(t.outEdges(o),(function(t){Vh.has(r,t.w)?n.push(t):i(t.w)})),delete r[o])}return Vh.forEach(t.nodes(),i),n}(t);Vh.forEach(n,(function(n){var r=t.edge(n);t.removeEdge(n),r.forwardName=n.name,r.reversed=!0,t.setEdge(n.w,n.v,r,Vh.uniqueId("rev"))}))},undo:function(t){Vh.forEach(t.edges(),(function(n){var r=t.edge(n);if(r.reversed){t.removeEdge(n);var e=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(n.w,n.v,r,e)}}))}};var qh=zh,Yh=yh.Graph,Zh={addDummyNode:Kh,simplify:function(t){var n=(new Yh).setGraph(t.graph());return qh.forEach(t.nodes(),(function(r){n.setNode(r,t.node(r))})),qh.forEach(t.edges(),(function(r){var e=n.edge(r.v,r.w)||{weight:0,minlen:1},i=t.edge(r);n.setEdge(r.v,r.w,{weight:e.weight+i.weight,minlen:Math.max(e.minlen,i.minlen)})})),n},asNonCompoundGraph:function(t){var n=new Yh({multigraph:t.isMultigraph()}).setGraph(t.graph());return qh.forEach(t.nodes(),(function(r){t.children(r).length||n.setNode(r,t.node(r))})),qh.forEach(t.edges(),(function(r){n.setEdge(r,t.edge(r))})),n},successorWeights:function(t){var n=qh.map(t.nodes(),(function(n){var r={};return qh.forEach(t.outEdges(n),(function(n){r[n.w]=(r[n.w]||0)+t.edge(n).weight})),r}));return qh.zipObject(t.nodes(),n)},predecessorWeights:function(t){var n=qh.map(t.nodes(),(function(n){var r={};return qh.forEach(t.inEdges(n),(function(n){r[n.v]=(r[n.v]||0)+t.edge(n).weight})),r}));return qh.zipObject(t.nodes(),n)},intersectRect:function(t,n){var r,e,i=t.x,o=t.y,u=n.x-i,a=n.y-o,c=t.width/2,f=t.height/2;if(!u&&!a)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(a)*c>Math.abs(u)*f?(a<0&&(f=-f),r=f*u/a,e=f):(u<0&&(c=-c),r=c,e=c*a/u);return{x:i+r,y:o+e}},buildLayerMatrix:function(t){var n=qh.map(qh.range(Xh(t)+1),(function(){return[]}));return qh.forEach(t.nodes(),(function(r){var e=t.node(r),i=e.rank;qh.isUndefined(i)||(n[i][e.order]=r)})),n},normalizeRanks:function(t){var n=qh.min(qh.map(t.nodes(),(function(n){return t.node(n).rank})));qh.forEach(t.nodes(),(function(r){var e=t.node(r);qh.has(e,"rank")&&(e.rank-=n)}))},removeEmptyRanks:function(t){var n=qh.min(qh.map(t.nodes(),(function(n){return t.node(n).rank}))),r=[];qh.forEach(t.nodes(),(function(e){var i=t.node(e).rank-n;r[i]||(r[i]=[]),r[i].push(e)}));var e=0,i=t.graph().nodeRankFactor;qh.forEach(r,(function(n,r){qh.isUndefined(n)&&r%i!=0?--e:e&&qh.forEach(n,(function(n){t.node(n).rank+=e}))}))},addBorderNode:function(t,n,r,e){var i={width:0,height:0};arguments.length>=4&&(i.rank=r,i.order=e);return Kh(t,"border",i,n)},maxRank:Xh,partition:function(t,n){var r={lhs:[],rhs:[]};return qh.forEach(t,(function(t){n(t)?r.lhs.push(t):r.rhs.push(t)})),r},time:function(t,n){var r=qh.now();try{return n()}finally{console.log(t+" time: "+(qh.now()-r)+"ms")}},notime:function(t,n){return n()}};function Kh(t,n,r,e){var i;do{i=qh.uniqueId(e)}while(t.hasNode(i));return r.dummy=n,t.setNode(i,r),i}function Xh(t){return qh.max(qh.map(t.nodes(),(function(n){var r=t.node(n).rank;if(!qh.isUndefined(r))return r})))}var Jh=zh,Qh=Zh,td={run:function(t){t.graph().dummyChains=[],Jh.forEach(t.edges(),(function(n){!function(t,n){var r,e,i,o=n.v,u=t.node(o).rank,a=n.w,c=t.node(a).rank,f=n.name,s=t.edge(n),h=s.labelRank;if(c===u+1)return;for(t.removeEdge(n),i=0,++u;u<c;++i,++u)s.points=[],e={width:0,height:0,edgeLabel:s,edgeObj:n,rank:u},r=Qh.addDummyNode(t,"edge",e,"_d"),u===h&&(e.width=s.width,e.height=s.height,e.dummy="edge-label",e.labelpos=s.labelpos),t.setEdge(o,r,{weight:s.weight},f),0===i&&t.graph().dummyChains.push(r),o=r;t.setEdge(o,a,{weight:s.weight},f)}(t,n)}))},undo:function(t){Jh.forEach(t.graph().dummyChains,(function(n){var r,e=t.node(n),i=e.edgeLabel;for(t.setEdge(e.edgeObj,i);e.dummy;)r=t.successors(n)[0],t.removeNode(n),i.points.push({x:e.x,y:e.y}),"edge-label"===e.dummy&&(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height),n=r,e=t.node(n)}))}};var nd=zh,rd={longestPath:function(t){var n={};nd.forEach(t.sources(),(function r(e){var i=t.node(e);if(nd.has(n,e))return i.rank;n[e]=!0;var o=nd.min(nd.map(t.outEdges(e),(function(n){return r(n.w)-t.edge(n).minlen})));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),i.rank=o}))},slack:function(t,n){return t.node(n.w).rank-t.node(n.v).rank-t.edge(n).minlen}};var ed=zh,id=yh.Graph,od=rd.slack,ud=function(t){var n,r,e=new id({directed:!1}),i=t.nodes()[0],o=t.nodeCount();e.setNode(i,{});for(;ad(e,t)<o;)n=cd(e,t),r=e.hasNode(n.v)?od(t,n):-od(t,n),fd(e,t,r);return e};function ad(t,n){return ed.forEach(t.nodes(),(function r(e){ed.forEach(n.nodeEdges(e),(function(i){var o=i.v,u=e===o?i.w:o;t.hasNode(u)||od(n,i)||(t.setNode(u,{}),t.setEdge(e,u,{}),r(u))}))})),t.nodeCount()}function cd(t,n){return ed.minBy(n.edges(),(function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return od(n,r)}))}function fd(t,n,r){ed.forEach(t.nodes(),(function(t){n.node(t).rank+=r}))}var sd=zh,hd=ud,dd=rd.slack,ld=rd.longestPath,vd=yh.alg.preorder,pd=yh.alg.postorder,gd=Zh.simplify,yd=md;function md(t){t=gd(t),ld(t);var n,r=hd(t);for(_d(r),wd(r,t);n=xd(r);)kd(r,t,n,jd(r,t,n))}function wd(t,n){var r=pd(t,t.nodes());r=r.slice(0,r.length-1),sd.forEach(r,(function(r){!function(t,n,r){var e=t.node(r),i=e.parent;t.edge(r,i).cutvalue=bd(t,n,r)}(t,n,r)}))}function bd(t,n,r){var e=t.node(r).parent,i=!0,o=n.edge(r,e),u=0;return o||(i=!1,o=n.edge(e,r)),u=o.weight,sd.forEach(n.nodeEdges(r),(function(o){var a,c,f=o.v===r,s=f?o.w:o.v;if(s!==e){var h=f===i,d=n.edge(o).weight;if(u+=h?d:-d,a=r,c=s,t.hasEdge(a,c)){var l=t.edge(r,s).cutvalue;u+=h?-l:l}}})),u}function _d(t,n){arguments.length<2&&(n=t.nodes()[0]),Ed(t,{},1,n)}function Ed(t,n,r,e,i){var o=r,u=t.node(e);return n[e]=!0,sd.forEach(t.neighbors(e),(function(i){sd.has(n,i)||(r=Ed(t,n,r,i,e))})),u.low=o,u.lim=r++,i?u.parent=i:delete u.parent,r}function xd(t){return sd.find(t.edges(),(function(n){return t.edge(n).cutvalue<0}))}function jd(t,n,r){var e=r.v,i=r.w;n.hasEdge(e,i)||(e=r.w,i=r.v);var o=t.node(e),u=t.node(i),a=o,c=!1;o.lim>u.lim&&(a=u,c=!0);var f=sd.filter(n.edges(),(function(n){return c===Nd(t,t.node(n.v),a)&&c!==Nd(t,t.node(n.w),a)}));return sd.minBy(f,(function(t){return dd(n,t)}))}function kd(t,n,r,e){var i=r.v,o=r.w;t.removeEdge(i,o),t.setEdge(e.v,e.w,{}),_d(t),wd(t,n),function(t,n){var r=sd.find(t.nodes(),(function(t){return!n.node(t).parent})),e=vd(t,r);e=e.slice(1),sd.forEach(e,(function(r){var e=t.node(r).parent,i=n.edge(r,e),o=!1;i||(i=n.edge(e,r),o=!0),n.node(r).rank=n.node(e).rank+(o?i.minlen:-i.minlen)}))}(t,n)}function Nd(t,n,r){return r.low<=n.lim&&n.lim<=r.lim}md.initLowLimValues=_d,md.initCutValues=wd,md.calcCutValue=bd,md.leaveEdge=xd,md.enterEdge=jd,md.exchangeEdges=kd;var Id=rd.longestPath,Od=ud,Sd=yd,Md=function(t){switch(t.graph().ranker){case"network-simplex":default:zd(t);break;case"tight-tree":!function(t){Id(t),Od(t)}(t);break;case"longest-path":Ad(t)}};var Ad=Id;function zd(t){Sd(t)}var Cd=zh,Ld=function(t){var n=function(t){var n={},r=0;function e(i){var o=r;Cd.forEach(t.children(i),e),n[i]={low:o,lim:r++}}return Cd.forEach(t.children(),e),n}(t);Cd.forEach(t.graph().dummyChains,(function(r){for(var e=t.node(r),i=e.edgeObj,o=function(t,n,r,e){var i,o,u=[],a=[],c=Math.min(n[r].low,n[e].low),f=Math.max(n[r].lim,n[e].lim);i=r;do{i=t.parent(i),u.push(i)}while(i&&(n[i].low>c||f>n[i].lim));o=i,i=e;for(;(i=t.parent(i))!==o;)a.push(i);return{path:u.concat(a.reverse()),lca:o}}(t,n,i.v,i.w),u=o.path,a=o.lca,c=0,f=u[c],s=!0;r!==i.w;){if(e=t.node(r),s){for(;(f=u[c])!==a&&t.node(f).maxRank<e.rank;)c++;f===a&&(s=!1)}if(!s){for(;c<u.length-1&&t.node(f=u[c+1]).minRank<=e.rank;)c++;f=u[c]}t.setParent(r,f),r=t.successors(r)[0]}}))};var Td=zh,Pd=Zh,$d={run:function(t){var n=Pd.addDummyNode(t,"root",{},"_root"),r=function(t){var n={};function r(e,i){var o=t.children(e);o&&o.length&&Td.forEach(o,(function(t){r(t,i+1)})),n[e]=i}return Td.forEach(t.children(),(function(t){r(t,1)})),n}(t),e=Td.max(Td.values(r))-1,i=2*e+1;t.graph().nestingRoot=n,Td.forEach(t.edges(),(function(n){t.edge(n).minlen*=i}));var o=function(t){return Td.reduce(t.edges(),(function(n,r){return n+t.edge(r).weight}),0)}(t)+1;Td.forEach(t.children(),(function(u){Dd(t,n,i,o,e,r,u)})),t.graph().nodeRankFactor=i},cleanup:function(t){var n=t.graph();t.removeNode(n.nestingRoot),delete n.nestingRoot,Td.forEach(t.edges(),(function(n){t.edge(n).nestingEdge&&t.removeEdge(n)}))}};function Dd(t,n,r,e,i,o,u){var a=t.children(u);if(a.length){var c=Pd.addBorderNode(t,"_bt"),f=Pd.addBorderNode(t,"_bb"),s=t.node(u);t.setParent(c,u),s.borderTop=c,t.setParent(f,u),s.borderBottom=f,Td.forEach(a,(function(a){Dd(t,n,r,e,i,o,a);var s=t.node(a),h=s.borderTop?s.borderTop:a,d=s.borderBottom?s.borderBottom:a,l=s.borderTop?e:2*e,v=h!==d?1:i-o[u]+1;t.setEdge(c,h,{weight:l,minlen:v,nestingEdge:!0}),t.setEdge(d,f,{weight:l,minlen:v,nestingEdge:!0})})),t.parent(u)||t.setEdge(n,c,{weight:0,minlen:i+o[u]})}else u!==n&&t.setEdge(n,u,{weight:0,minlen:r})}var Fd=zh,Rd=Zh,Bd=function(t){Fd.forEach(t.children(),(function n(r){var e=t.children(r),i=t.node(r);if(e.length&&Fd.forEach(e,n),Fd.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,u=i.maxRank+1;o<u;++o)Gd(t,"borderLeft","_bl",r,i,o),Gd(t,"borderRight","_br",r,i,o)}}))};function Gd(t,n,r,e,i,o){var u={width:0,height:0,rank:o,borderType:n},a=i[n][o-1],c=Rd.addDummyNode(t,"border",u,r);i[n][o]=c,t.setParent(c,e),a&&t.setEdge(a,c,{weight:1})}var Ud=zh,Vd={adjust:function(t){var n=t.graph().rankdir.toLowerCase();"lr"!==n&&"rl"!==n||Hd(t)},undo:function(t){var n=t.graph().rankdir.toLowerCase();"bt"!==n&&"rl"!==n||function(t){Ud.forEach(t.nodes(),(function(n){qd(t.node(n))})),Ud.forEach(t.edges(),(function(n){var r=t.edge(n);Ud.forEach(r.points,qd),Ud.has(r,"y")&&qd(r)}))}(t);"lr"!==n&&"rl"!==n||(!function(t){Ud.forEach(t.nodes(),(function(n){Yd(t.node(n))})),Ud.forEach(t.edges(),(function(n){var r=t.edge(n);Ud.forEach(r.points,Yd),Ud.has(r,"x")&&Yd(r)}))}(t),Hd(t))}};function Hd(t){Ud.forEach(t.nodes(),(function(n){Wd(t.node(n))})),Ud.forEach(t.edges(),(function(n){Wd(t.edge(n))}))}function Wd(t){var n=t.width;t.width=t.height,t.height=n}function qd(t){t.y=-t.y}function Yd(t){var n=t.x;t.x=t.y,t.y=n}var Zd=zh,Kd=function(t){var n={},r=Zd.filter(t.nodes(),(function(n){return!t.children(n).length})),e=Zd.max(Zd.map(r,(function(n){return t.node(n).rank}))),i=Zd.map(Zd.range(e+1),(function(){return[]}));function o(r){if(!Zd.has(n,r)){n[r]=!0;var e=t.node(r);i[e.rank].push(r),Zd.forEach(t.successors(r),o)}}var u=Zd.sortBy(r,(function(n){return t.node(n).rank}));return Zd.forEach(u,o),i};var Xd=zh,Jd=function(t,n){for(var r=0,e=1;e<n.length;++e)r+=Qd(t,n[e-1],n[e]);return r};function Qd(t,n,r){for(var e=Xd.zipObject(r,Xd.map(r,(function(t,n){return n}))),i=Xd.flatten(Xd.map(n,(function(n){return Xd.sortBy(Xd.map(t.outEdges(n),(function(n){return{pos:e[n.w],weight:t.edge(n).weight}})),"pos")})),!0),o=1;o<r.length;)o<<=1;var u=2*o-1;o-=1;var a=Xd.map(new Array(u),(function(){return 0})),c=0;return Xd.forEach(i.forEach((function(t){var n=t.pos+o;a[n]+=t.weight;for(var r=0;n>0;)n%2&&(r+=a[n+1]),a[n=n-1>>1]+=t.weight;c+=t.weight*r}))),c}var tl=zh;var nl=zh;var rl=zh,el=Zh;function il(t,n,r){for(var e;n.length&&(e=rl.last(n)).i<=r;)n.pop(),t.push(e.vs),r++;return r}var ol=zh,ul=function(t,n){return tl.map(n,(function(n){var r=t.inEdges(n);if(r.length){var e=tl.reduce(r,(function(n,r){var e=t.edge(r),i=t.node(r.v);return{sum:n.sum+e.weight*i.order,weight:n.weight+e.weight}}),{sum:0,weight:0});return{v:n,barycenter:e.sum/e.weight,weight:e.weight}}return{v:n}}))},al=function(t,n){var r={};return nl.forEach(t,(function(t,n){var e=r[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:n};nl.isUndefined(t.barycenter)||(e.barycenter=t.barycenter,e.weight=t.weight)})),nl.forEach(n.edges(),(function(t){var n=r[t.v],e=r[t.w];nl.isUndefined(n)||nl.isUndefined(e)||(e.indegree++,n.out.push(r[t.w]))})),function(t){var n=[];function r(t){return function(n){n.merged||(nl.isUndefined(n.barycenter)||nl.isUndefined(t.barycenter)||n.barycenter>=t.barycenter)&&function(t,n){var r=0,e=0;t.weight&&(r+=t.barycenter*t.weight,e+=t.weight);n.weight&&(r+=n.barycenter*n.weight,e+=n.weight);t.vs=n.vs.concat(t.vs),t.barycenter=r/e,t.weight=e,t.i=Math.min(n.i,t.i),n.merged=!0}(t,n)}}function e(n){return function(r){r.in.push(n),0==--r.indegree&&t.push(r)}}for(;t.length;){var i=t.pop();n.push(i),nl.forEach(i.in.reverse(),r(i)),nl.forEach(i.out,e(i))}return nl.map(nl.filter(n,(function(t){return!t.merged})),(function(t){return nl.pick(t,["vs","i","barycenter","weight"])}))}(nl.filter(r,(function(t){return!t.indegree})))},cl=function(t,n){var r=el.partition(t,(function(t){return rl.has(t,"barycenter")})),e=r.lhs,i=rl.sortBy(r.rhs,(function(t){return-t.i})),o=[],u=0,a=0,c=0;e.sort((f=!!n,function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:f?n.i-t.i:t.i-n.i})),c=il(o,i,c),rl.forEach(e,(function(t){c+=t.vs.length,o.push(t.vs),u+=t.barycenter*t.weight,a+=t.weight,c=il(o,i,c)}));var f;var s={vs:rl.flatten(o,!0)};a&&(s.barycenter=u/a,s.weight=a);return s},fl=function t(n,r,e,i){var o=n.children(r),u=n.node(r),a=u?u.borderLeft:void 0,c=u?u.borderRight:void 0,f={};a&&(o=ol.filter(o,(function(t){return t!==a&&t!==c})));var s=ul(n,o);ol.forEach(s,(function(r){if(n.children(r.v).length){var o=t(n,r.v,e,i);f[r.v]=o,ol.has(o,"barycenter")&&(u=r,a=o,ol.isUndefined(u.barycenter)?(u.barycenter=a.barycenter,u.weight=a.weight):(u.barycenter=(u.barycenter*u.weight+a.barycenter*a.weight)/(u.weight+a.weight),u.weight+=a.weight))}var u,a}));var h=al(s,e);!function(t,n){ol.forEach(t,(function(t){t.vs=ol.flatten(t.vs.map((function(t){return n[t]?n[t].vs:t})),!0)}))}(h,f);var d=cl(h,i);if(a&&(d.vs=ol.flatten([a,d.vs,c],!0),n.predecessors(a).length)){var l=n.node(n.predecessors(a)[0]),v=n.node(n.predecessors(c)[0]);ol.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+l.order+v.order)/(d.weight+2),d.weight+=2}return d};var sl=zh,hl=yh.Graph,dl=function(t,n,r){var e=function(t){var n;for(;t.hasNode(n=sl.uniqueId("_root")););return n}(t),i=new hl({compound:!0}).setGraph({root:e}).setDefaultNodeLabel((function(n){return t.node(n)}));return sl.forEach(t.nodes(),(function(o){var u=t.node(o),a=t.parent(o);(u.rank===n||u.minRank<=n&&n<=u.maxRank)&&(i.setNode(o),i.setParent(o,a||e),sl.forEach(t[r](o),(function(n){var r=n.v===o?n.w:n.v,e=i.edge(r,o),u=sl.isUndefined(e)?0:e.weight;i.setEdge(r,o,{weight:t.edge(n).weight+u})})),sl.has(u,"minRank")&&i.setNode(o,{borderLeft:u.borderLeft[n],borderRight:u.borderRight[n]}))})),i};var ll=zh;var vl=zh,pl=Kd,gl=Jd,yl=fl,ml=dl,wl=function(t,n,r){var e,i={};ll.forEach(r,(function(r){for(var o,u,a=t.parent(r);a;){if((o=t.parent(a))?(u=i[o],i[o]=a):(u=e,e=a),u&&u!==a)return void n.setEdge(u,a);a=o}}))},bl=yh.Graph,_l=Zh,El=function(t){var n=_l.maxRank(t),r=xl(t,vl.range(1,n+1),"inEdges"),e=xl(t,vl.range(n-1,-1,-1),"outEdges"),i=pl(t);kl(t,i);for(var o,u=Number.POSITIVE_INFINITY,a=0,c=0;c<4;++a,++c){jl(a%2?r:e,a%4>=2),i=_l.buildLayerMatrix(t);var f=gl(t,i);f<u&&(c=0,o=vl.cloneDeep(i),u=f)}kl(t,o)};function xl(t,n,r){return vl.map(n,(function(n){return ml(t,n,r)}))}function jl(t,n){var r=new bl;vl.forEach(t,(function(t){var e=t.graph().root,i=yl(t,e,r,n);vl.forEach(i.vs,(function(n,r){t.node(n).order=r})),wl(t,r,i.vs)}))}function kl(t,n){vl.forEach(n,(function(n){vl.forEach(n,(function(n,r){t.node(n).order=r}))}))}var Nl=zh,Il=yh.Graph,Ol=Zh,Sl=function(t){var n,r=Ol.buildLayerMatrix(t),e=Nl.merge(Ml(t,r),Al(t,r)),i={};Nl.forEach(["u","d"],(function(o){n="u"===o?r:Nl.values(r).reverse(),Nl.forEach(["l","r"],(function(r){"r"===r&&(n=Nl.map(n,(function(t){return Nl.values(t).reverse()})));var u=("u"===o?t.predecessors:t.successors).bind(t),a=Ll(t,n,e,u),c=Tl(t,n,a.root,a.align,"r"===r);"r"===r&&(c=Nl.mapValues(c,(function(t){return-t}))),i[o+r]=c}))}));var o=Pl(t,i);return $l(i,o),Dl(i,t.graph().align)};function Ml(t,n){var r={};return Nl.reduce(n,(function(n,e){var i=0,o=0,u=n.length,a=Nl.last(e);return Nl.forEach(e,(function(n,c){var f=function(t,n){if(t.node(n).dummy)return Nl.find(t.predecessors(n),(function(n){return t.node(n).dummy}))}(t,n),s=f?t.node(f).order:u;(f||n===a)&&(Nl.forEach(e.slice(o,c+1),(function(n){Nl.forEach(t.predecessors(n),(function(e){var o=t.node(e),u=o.order;!(u<i||s<u)||o.dummy&&t.node(n).dummy||zl(r,e,n)}))})),o=c+1,i=s)})),e})),r}function Al(t,n){var r={};function e(n,e,i,o,u){var a;Nl.forEach(Nl.range(e,i),(function(e){a=n[e],t.node(a).dummy&&Nl.forEach(t.predecessors(a),(function(n){var e=t.node(n);e.dummy&&(e.order<o||e.order>u)&&zl(r,n,a)}))}))}return Nl.reduce(n,(function(n,r){var i,o=-1,u=0;return Nl.forEach(r,(function(a,c){if("border"===t.node(a).dummy){var f=t.predecessors(a);f.length&&(i=t.node(f[0]).order,e(r,u,c,o,i),u=c,o=i)}e(r,u,r.length,i,n.length)})),r})),r}function zl(t,n,r){if(n>r){var e=n;n=r,r=e}var i=t[n];i||(t[n]=i={}),i[r]=!0}function Cl(t,n,r){if(n>r){var e=n;n=r,r=e}return Nl.has(t[n],r)}function Ll(t,n,r,e){var i={},o={},u={};return Nl.forEach(n,(function(t){Nl.forEach(t,(function(t,n){i[t]=t,o[t]=t,u[t]=n}))})),Nl.forEach(n,(function(t){var n=-1;Nl.forEach(t,(function(t){var a=e(t);if(a.length){a=Nl.sortBy(a,(function(t){return u[t]}));for(var c=(a.length-1)/2,f=Math.floor(c),s=Math.ceil(c);f<=s;++f){var h=a[f];o[t]===t&&n<u[h]&&!Cl(r,t,h)&&(o[h]=t,o[t]=i[t]=i[h],n=u[h])}}}))})),{root:i,align:o}}function Tl(t,n,r,e,i){var o={},u=function(t,n,r,e){var i=new Il,o=t.graph(),u=function(t,n,r){return function(e,i,o){var u,a=e.node(i),c=e.node(o),f=0;if(f+=a.width/2,Nl.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2}if(u&&(f+=r?u:-u),u=0,f+=(a.dummy?n:t)/2,f+=(c.dummy?n:t)/2,f+=c.width/2,Nl.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":u=c.width/2;break;case"r":u=-c.width/2}return u&&(f+=r?u:-u),u=0,f}}(o.nodesep,o.edgesep,e);return Nl.forEach(n,(function(n){var e;Nl.forEach(n,(function(n){var o=r[n];if(i.setNode(o),e){var a=r[e],c=i.edge(a,o);i.setEdge(a,o,Math.max(u(t,n,e),c||0))}e=n}))})),i}(t,n,r,i),a=i?"borderLeft":"borderRight";function c(t,n){for(var r=u.nodes(),e=r.pop(),i={};e;)i[e]?t(e):(i[e]=!0,r.push(e),r=r.concat(n(e))),e=r.pop()}return c((function(t){o[t]=u.inEdges(t).reduce((function(t,n){return Math.max(t,o[n.v]+u.edge(n))}),0)}),u.predecessors.bind(u)),c((function(n){var r=u.outEdges(n).reduce((function(t,n){return Math.min(t,o[n.w]-u.edge(n))}),Number.POSITIVE_INFINITY),e=t.node(n);r!==Number.POSITIVE_INFINITY&&e.borderType!==a&&(o[n]=Math.max(o[n],r))}),u.successors.bind(u)),Nl.forEach(e,(function(t){o[t]=o[r[t]]})),o}function Pl(t,n){return Nl.minBy(Nl.values(n),(function(n){var r=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY;return Nl.forIn(n,(function(n,i){var o=function(t,n){return t.node(n).width}(t,i)/2;r=Math.max(n+o,r),e=Math.min(n-o,e)})),r-e}))}function $l(t,n){var r=Nl.values(n),e=Nl.min(r),i=Nl.max(r);Nl.forEach(["u","d"],(function(r){Nl.forEach(["l","r"],(function(o){var u,a=r+o,c=t[a];if(c!==n){var f=Nl.values(c);(u="l"===o?e-Nl.min(f):i-Nl.max(f))&&(t[a]=Nl.mapValues(c,(function(t){return t+u})))}}))}))}function Dl(t,n){return Nl.mapValues(t.ul,(function(r,e){if(n)return t[n.toLowerCase()][e];var i=Nl.sortBy(Nl.map(t,e));return(i[1]+i[2])/2}))}var Fl=zh,Rl=Zh,Bl=Sl;var Gl=zh,Ul=Wh,Vl=td,Hl=Md,Wl=Zh.normalizeRanks,ql=Ld,Yl=Zh.removeEmptyRanks,Zl=$d,Kl=Bd,Xl=Vd,Jl=El,Ql=function(t){(function(t){var n=Rl.buildLayerMatrix(t),r=t.graph().ranksep,e=0;Fl.forEach(n,(function(n){var i=Fl.max(Fl.map(n,(function(n){return t.node(n).height})));Fl.forEach(n,(function(n){t.node(n).y=e+i/2})),e+=i+r}))})(t=Rl.asNonCompoundGraph(t)),Fl.forEach(Bl(t),(function(n,r){t.node(r).x=n}))},tv=Zh,nv=yh.Graph,rv=function(t,n){var r=n&&n.debugTiming?tv.time:tv.notime;r("layout",(function(){var n=r("  buildLayoutGraph",(function(){return function(t){var n=new nv({multigraph:!0,compound:!0}),r=dv(t.graph());return n.setGraph(Gl.merge({},iv,hv(r,ev),Gl.pick(r,ov))),Gl.forEach(t.nodes(),(function(r){var e=dv(t.node(r));n.setNode(r,Gl.defaults(hv(e,uv),av)),n.setParent(r,t.parent(r))})),Gl.forEach(t.edges(),(function(r){var e=dv(t.edge(r));n.setEdge(r,Gl.merge({},fv,hv(e,cv),Gl.pick(e,sv)))})),n}(t)}));r("  runLayout",(function(){!function(t,n){n("    makeSpaceForEdgeLabels",(function(){!function(t){var n=t.graph();n.ranksep/=2,Gl.forEach(t.edges(),(function(r){var e=t.edge(r);e.minlen*=2,"c"!==e.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?e.width+=e.labeloffset:e.height+=e.labeloffset)}))}(t)})),n("    removeSelfEdges",(function(){!function(t){Gl.forEach(t.edges(),(function(n){if(n.v===n.w){var r=t.node(n.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:n,label:t.edge(n)}),t.removeEdge(n)}}))}(t)})),n("    acyclic",(function(){Ul.run(t)})),n("    nestingGraph.run",(function(){Zl.run(t)})),n("    rank",(function(){Hl(tv.asNonCompoundGraph(t))})),n("    injectEdgeLabelProxies",(function(){!function(t){Gl.forEach(t.edges(),(function(n){var r=t.edge(n);if(r.width&&r.height){var e=t.node(n.v),i={rank:(t.node(n.w).rank-e.rank)/2+e.rank,e:n};tv.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),n("    removeEmptyRanks",(function(){Yl(t)})),n("    nestingGraph.cleanup",(function(){Zl.cleanup(t)})),n("    normalizeRanks",(function(){Wl(t)})),n("    assignRankMinMax",(function(){!function(t){var n=0;Gl.forEach(t.nodes(),(function(r){var e=t.node(r);e.borderTop&&(e.minRank=t.node(e.borderTop).rank,e.maxRank=t.node(e.borderBottom).rank,n=Gl.max(n,e.maxRank))})),t.graph().maxRank=n}(t)})),n("    removeEdgeLabelProxies",(function(){!function(t){Gl.forEach(t.nodes(),(function(n){var r=t.node(n);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(n))}))}(t)})),n("    normalize.run",(function(){Vl.run(t)})),n("    parentDummyChains",(function(){ql(t)})),n("    addBorderSegments",(function(){Kl(t)})),n("    order",(function(){Jl(t)})),n("    insertSelfEdges",(function(){!function(t){var n=tv.buildLayerMatrix(t);Gl.forEach(n,(function(n){var r=0;Gl.forEach(n,(function(n,e){var i=t.node(n);i.order=e+r,Gl.forEach(i.selfEdges,(function(n){tv.addDummyNode(t,"selfedge",{width:n.label.width,height:n.label.height,rank:i.rank,order:e+ ++r,e:n.e,label:n.label},"_se")})),delete i.selfEdges}))}))}(t)})),n("    adjustCoordinateSystem",(function(){Xl.adjust(t)})),n("    position",(function(){Ql(t)})),n("    positionSelfEdges",(function(){!function(t){Gl.forEach(t.nodes(),(function(n){var r=t.node(n);if("selfedge"===r.dummy){var e=t.node(r.e.v),i=e.x+e.width/2,o=e.y,u=r.x-i,a=e.height/2;t.setEdge(r.e,r.label),t.removeNode(n),r.label.points=[{x:i+2*u/3,y:o-a},{x:i+5*u/6,y:o-a},{x:i+u,y:o},{x:i+5*u/6,y:o+a},{x:i+2*u/3,y:o+a}],r.label.x=r.x,r.label.y=r.y}}))}(t)})),n("    removeBorderNodes",(function(){!function(t){Gl.forEach(t.nodes(),(function(n){if(t.children(n).length){var r=t.node(n),e=t.node(r.borderTop),i=t.node(r.borderBottom),o=t.node(Gl.last(r.borderLeft)),u=t.node(Gl.last(r.borderRight));r.width=Math.abs(u.x-o.x),r.height=Math.abs(i.y-e.y),r.x=o.x+r.width/2,r.y=e.y+r.height/2}})),Gl.forEach(t.nodes(),(function(n){"border"===t.node(n).dummy&&t.removeNode(n)}))}(t)})),n("    normalize.undo",(function(){Vl.undo(t)})),n("    fixupEdgeLabelCoords",(function(){!function(t){Gl.forEach(t.edges(),(function(n){var r=t.edge(n);if(Gl.has(r,"x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}(t)})),n("    undoCoordinateSystem",(function(){Xl.undo(t)})),n("    translateGraph",(function(){!function(t){var n=Number.POSITIVE_INFINITY,r=0,e=Number.POSITIVE_INFINITY,i=0,o=t.graph(),u=o.marginx||0,a=o.marginy||0;function c(t){var o=t.x,u=t.y,a=t.width,c=t.height;n=Math.min(n,o-a/2),r=Math.max(r,o+a/2),e=Math.min(e,u-c/2),i=Math.max(i,u+c/2)}Gl.forEach(t.nodes(),(function(n){c(t.node(n))})),Gl.forEach(t.edges(),(function(n){var r=t.edge(n);Gl.has(r,"x")&&c(r)})),n-=u,e-=a,Gl.forEach(t.nodes(),(function(r){var i=t.node(r);i.x-=n,i.y-=e})),Gl.forEach(t.edges(),(function(r){var i=t.edge(r);Gl.forEach(i.points,(function(t){t.x-=n,t.y-=e})),Gl.has(i,"x")&&(i.x-=n),Gl.has(i,"y")&&(i.y-=e)})),o.width=r-n+u,o.height=i-e+a}(t)})),n("    assignNodeIntersects",(function(){!function(t){Gl.forEach(t.edges(),(function(n){var r,e,i=t.edge(n),o=t.node(n.v),u=t.node(n.w);i.points?(r=i.points[0],e=i.points[i.points.length-1]):(i.points=[],r=u,e=o),i.points.unshift(tv.intersectRect(o,r)),i.points.push(tv.intersectRect(u,e))}))}(t)})),n("    reversePoints",(function(){!function(t){Gl.forEach(t.edges(),(function(n){var r=t.edge(n);r.reversed&&r.points.reverse()}))}(t)})),n("    acyclic.undo",(function(){Ul.undo(t)}))}(n,r)})),r("  updateInputGraph",(function(){!function(t,n){Gl.forEach(t.nodes(),(function(r){var e=t.node(r),i=n.node(r);e&&(e.x=i.x,e.y=i.y,n.children(r).length&&(e.width=i.width,e.height=i.height))})),Gl.forEach(t.edges(),(function(r){var e=t.edge(r),i=n.edge(r);e.points=i.points,Gl.has(i,"x")&&(e.x=i.x,e.y=i.y)})),t.graph().width=n.graph().width,t.graph().height=n.graph().height}(t,n)}))}))};var ev=["nodesep","edgesep","ranksep","marginx","marginy"],iv={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ov=["acyclicer","ranker","rankdir","align"],uv=["width","height"],av={width:0,height:0},cv=["minlen","weight","width","height","labeloffset"],fv={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},sv=["labelpos"];function hv(t,n){return Gl.mapValues(Gl.pick(t,n),Number)}function dv(t){var n={};return Gl.forEach(t,(function(t,r){n[r.toLowerCase()]=t})),n}var lv=zh,vv=Zh,pv=yh.Graph;var gv={graphlib:yh,layout:rv,debug:{debugOrdering:function(t){var n=vv.buildLayerMatrix(t),r=new pv({compound:!0,multigraph:!0}).setGraph({});return lv.forEach(t.nodes(),(function(n){r.setNode(n,{label:n}),r.setParent(n,"layer"+t.node(n).rank)})),lv.forEach(t.edges(),(function(t){r.setEdge(t.v,t.w,{},t.name)})),lv.forEach(n,(function(t,n){var e="layer"+n;r.setNode(e,{rank:"same"}),lv.reduce(t,(function(t,n){return r.setEdge(t,n,{style:"invis"}),n}))})),r}},util:{time:Zh.time,notime:Zh.notime},version:"0.8.5"};const yv=(t,n)=>({x:t.x-n.x,y:t.y-n.y}),mv=(t,n)=>({x:t.x+n.x,y:t.y+n.y}),wv=(t,n)=>({x:n*t.x,y:n*t.y}),bv=t=>wv(t,1/(t=>Math.sqrt(t.x*t.x+t.y*t.y))(t)),_v=t=>t.trim().split(/(?=[A-Z])/);class Ev{constructor(){this.listeners=new Map}on(t,n){!this.listeners.has(t)&&this.listeners.set(t,new Set),this.listeners.get(t).add(n)}emit(t,...n){this.listeners.has(t)&&this.listeners.get(t).forEach((t=>t(...n)))}}const xv=(t,n)=>{t.x=0,t.y=0,t.width=n.scale,t.height=n.scale},jv=(t,n)=>{t.x=0,t.y=0,t.width=2*n.scale,t.height=n.scale},kv=(t,n)=>{t.x=0,t.y=0,t.width=n.scale,t.height=n.scale/2},Nv=(t,n)=>{const r=(t,n)=>{if(t.nodes.size){const e=new gv.graphlib.Graph({multigraph:!0});e.setGraph({nodesep:n.spacing,edgesep:n.spacing,ranksep:n.spacing,acyclicer:"greedy",rankdir:"LR",ranker:"network-simplex"}),t.nodes.forEach((t=>function(t){switch(t){case"context":return r;case"actor":return kv;case"command":case"event":return xv;default:return jv}}(t.visual)(t,n))),t.nodes.forEach((({id:t,width:n,height:r})=>e.setNode(t,{width:n,height:r})));const i=[...t.edges.values()].map(((t,n)=>(e.setEdge(t.start,t.end,{},`${n}`),t)));gv.layout(e),t.nodes.forEach((t=>{const n=e.node(t.id);t.x=n.x,t.y=n.y}));const o=[0,0,0,0];for(const n of e.edges()){const r=e.edge(n),u=i[parseInt(n.name)],a=t.nodes.get(n.v),c=t.nodes.get(n.w);u.path=[a,...r.points,c].map((t=>({x:t.x,y:t.y}))),r.points.forEach((({x:t,y:n})=>{o[0]=o[0]<t?o[0]:t,o[1]=o[1]>t?o[1]:t,o[2]=o[2]<n?o[2]:n,o[3]=o[3]<n?o[3]:n}))}const{width:u=0,height:a=0}=e.graph();t.width=Math.max(u,o[1]-o[0])+2*n.padding,t.height=Math.max(a,o[3]-o[2])+2*n.padding}else t.width=2*n.padding+_v(t.id).join(" ").length*n.fontSize,t.height=3*n.padding+n.fontSize};return r(t,n)};function Iv(t){return"number"==typeof t?t.toFixed(1):(t??"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Ov(){const t={"stroke-width":1};class n{constructor(t,n,r,e){this.elideEmpty=!1,this.name=t,this.attr=n,this.parent=r,this.children=[],this.text=e||void 0}group(){return this.parent}stroke(){return this.attr.fill="none",this}fill(){return this.attr.stroke="none",this}fillAndStroke(){return this}serialize(){const t=r(this.group(),(t=>t.data))??{},n=(e={...this.attr,...t},Object.entries(e).filter((([t,n])=>void 0!==n)).map((([t,n])=>`${t}="${Iv(n)}"`)).join(" "));var e;const i=this.children.map((t=>t.serialize())).join("");return"svg"===this.name?i:this.text&&0===this.children.length?`<${this.name} ${n}>${Iv(this.text)}</${this.name}>`:0===this.children.length?this.elideEmpty?"":`<${this.name} ${n}></${this.name}>`:`<${this.name} ${n}>${i}</${this.name}>`}}function r(t,n){return t?n(t)??r(t.parent,n)??n(i):n(i)}class e extends n{constructor(t,n=0,r=0){super("g",{},t),this.attr={},this.data={},this.elideEmpty=!0,this.attr.transform=`translate(${n}, ${r})`}group(){return this}}const i=new e({});i.attr=t;var o=new n("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:ev":"http://www.w3.org/2001/xml-events"},void 0),u=new e(o);function a(t,n={x:0,y:0},r=1){return c("path",{d:t.map(((t,e)=>(e?"L":"M")+(n.x+r*t.x).toFixed(1)+" "+(n.y+r*t.y).toFixed(1))).join(" ")})}function c(t,r,e){var i=new n(t,r,u,e);return u.children.push(i),i}return u.attr=t,o.children.push(u),{group:function(t,n){const r=new e(u,t,n);u.children.push(r),u=r},ungroup:function(){u.parent&&(u=u.parent)},rect:function(t,n,r,e,i){return c("rect",{x:t,y:n,height:e,width:r,style:i||""})},path:a,circuit:function(t,n,r){var e=a(t,n,r);return e.attr.d+=" Z",e},setFontFamily:function(t){u.attr["font-family"]=t},setFont:function(t,n,r){u.attr["font-size"]=t+"px",n&&(u.attr["font-weight"]=n),r&&(u.attr["font-style"]=r)},strokeStyle:function(t){u.attr.stroke=t},fillStyle:function(t){u.attr.fill=t},fillText:function(t,n,e,i,o){const a={x:n,y:e,fill:i,stroke:i};return"center"===r(u,(t=>t.attr["text-align"]))&&(a["text-anchor"]="middle"),o&&(a.dy=o),c("text",a,t)},lineWidth:function(t){u.attr["stroke-width"]=t},setData:function(t,n){u.data=u.data??{},u.data["data-"+t]=n},setLineDash:function(t){u.attr["stroke-dasharray"]=0===t.length?"none":t[0]+" "+t[1]},stroke:function(){u.children.at(-1).stroke()},textAlign:function(t){u.attr["text-align"]=t},translate:function(t,n){if(Number.isNaN(t)||Number.isNaN(n))throw new Error("dx and dy must be real numbers");u.attr.transform=`translate(${t}, ${n})`},serialize:function(){return o.serialize()}}}const Sv=(t,n,r)=>{let e=((t,n)=>{const r=t.map((t=>t.length)),e=r.sort().at(-1)||0,i=(r.map(((t,n)=>n?r[n-1]+t+1:t))||0).sort().at(-1)||0,o=Math.floor(n/8),u=Math.max(Math.floor(n/e),o),a=Math.max(Math.floor(n/i),o);return Math.floor(Math.min(u,a,30))})(t,n);for(;e>5;){const i=Math.floor(n/e),o=Math.floor(r/e),u=[];let a=t[0],c=1;for(;c<t.length;){const n=t[c++];a.length+n.length>=i?(u.push(a),a=n):a=a.concat(a.length?" ":"",n)}if(u.push(a),c===t.length&&u.length<=o)return{lines:u,fontSize:e};e--}return{lines:t,fontSize:e}},Mv=(t,n,r,e,i={fit:!0})=>{const o=Lv(t.visual).style,u=i.width||t.width||0,a=i.height||t.height||0,{lines:c,fontSize:f}=i.fit?Sv(n,u*e.font.widthScale,.8*a):{lines:n,fontSize:i.fontSize||e.fontSize};r.setFont(f);const s=i.x||Math.floor(u/2),h=i.y||Math.floor(a/2),d=Math.floor(c.length/2),l=e.font.heightScale,v=c.length%2?l:2*l;c.forEach(((t,n)=>{r.fillText(t,s,h,o.stroke,`${1.2*(n-d)+v}em`)}))},Av=(t,n,r)=>{const e=((t,n)=>{const r=t.path.slice(1,-1),e=bv(yv(r[r.length-2],r.at(-1))),i=n.spacing*n.arrowSize/30,o=r.length-1,u=r.map((t=>({x:t.x,y:t.y})));return u[o]=mv(u[o],wv(e,i*(t.arrow?5:0))),u})(t,r);if(n.strokeStyle(r.stroke),t.dashed){n.group(0,0);var i=Math.max(4,2*r.lineWidth);n.setLineDash([i,i]),n.path(e).stroke(),n.ungroup()}else n.path(e).stroke();((t,n,r)=>{if(t.arrow){const e=t.path[t.path.length-2],i=t.path.slice(1,-1),o=r.spacing*r.arrowSize/30,u=bv(yv(i[i.length-2],i.at(-1))),a=t=>mv(e,wv(u,t*o)),c=t=>{return wv({x:(n=u).y,y:-n.x},t*o);var n},f=[mv(a(10),c(4)),a(5),mv(a(10),c(-4)),e];n.fillStyle(r.stroke),n.circuit(f).fillAndStroke()}})(t,n,r)},zv={style:{stroke:"#AAAAAA",fill:"white"},renderShape:(t,n)=>{n.rect(0,0,t.width,t.height).fillAndStroke()},renderContents:(t,n,r)=>{if((t=>"nodes"in t)(t)){if(t.id){const e=_v(t.id);n.fillText(e.join(" "),r.fontSize*e.length,-r.fontSize,zv.style.stroke)}n.group(r.padding,r.padding),n.textAlign("center"),t.edges.forEach((t=>Av(t,n,r))),t.nodes.forEach((t=>Tv(t,n,r))),t.refs.forEach((e=>((t,n,r,e)=>{const i=n.length>1?"left":"center",o=n.length>1?n.map((t=>`- ${_v(t.target.id).join(" ")}`)):_v(n[0].target.id),{hostId:u,target:a}=n[0],c=t.nodes.get(u);if(!c)return;const f=Math.floor(c.x-c.width/2-.2*e.scale),s=Math.floor(c.y+.4*c.height),h=Math.floor(c.width),d=Math.floor(.4*e.scale);r.group(0,0);{r.setData("name",`refs-${u}`),r.fillStyle(Cv[a.visual]),r.textAlign(i);const t="filter: drop-shadow(0px 5px 5px rgba(0, 0, 0, 0.5));";r.rect(f,s,h,d,t).fill(),Mv(c,o,r,e,{fit:!0,x:"center"===i?f+h/2:f+.05*e.scale,y:s+d/2,width:h,height:d})}r.ungroup()})(t,[...e.values()],n,r))),n.ungroup()}}},Cv={context:"white",actor:"#ffc107",aggregate:"#fffabb",system:"#eca0c3",projector:"#d5f694",policy:"#c595cd",process:"#c595cd",command:"#7adcfb",event:"#ffaa61"},Lv=t=>"context"===t?zv:(t=>({style:{stroke:"#555555",fill:Cv[t]},renderShape:(t,n)=>{n.rect(0,0,t.width,t.height,"filter: drop-shadow(0px 5px 5px rgba(0, 0, 0, 0.5));").fill()},renderContents:(t,n,r)=>Mv(t,_v(t.id),n,r)}))(t),Tv=(t,n,r)=>{const{style:e,renderShape:i,renderContents:o}=Lv(t.visual),u=Math.floor(t.x-t.width/2),a=Math.floor(t.y-t.height/2);n.group(u,a),n.setData("name",t.id),n.fillStyle(e.fill),i(t,n,r),o(t,n,r),n.ungroup()},Pv=(t,n)=>{const r=Ov();return r.setData("name","root"),r.setFontFamily(n.font.family),r.setFont(n.fontSize),r.textAlign("left"),r.lineWidth(n.lineWidth),zv.renderContents(t,r,n),r.serialize()};class $v extends Error{constructor(t,n,r){super(`Parser error at line ${t.from.line}: Expected ${n} but got ${r}`),this.source=t,this.expected=n,this.actual=r}}const Dv={monospace:{family:"Monospace",widthScale:1.3,heightScale:.4},inconsolata:{family:"Inconsolata",widthScale:1.5,heightScale:.4},caveat:{family:"Caveat",widthScale:2.1,heightScale:.4},handlee:{family:"Handlee",widthScale:1.7,heightScale:.4}},Fv="inconsolata",Rv=(t,a,c=Fv)=>{const f={arrowSize:.5,gravity:Math.round(1),background:"#f8f9fa",font:Dv[c.toLowerCase()]||Dv[Fv],fontSize:12,leading:1.25,lineWidth:1,padding:12,spacing:40,stroke:"#DDDDDD",scale:a};try{const i=(t=>{const i=new Map,o={ix:0,line:0,line_ix:0},u={ix:0,line:0,line_ix:0},a={ix:0,line:0,line_ix:0},c=()=>({from:{line:u.line,col:u.ix-u.line_ix},to:{line:a.line,col:a.ix-a.line_ix}}),f=(t,n)=>{throw new $v(c(),t,n.length>30?n.substring(0,40)+"...":n)},s=(t,n)=>{[...r].includes(t)&&f(n,t)},h=["\t"," ","\n"],d=()=>{for(Object.assign(a,o);o.ix<t.length;){let n=t.charAt(o.ix);if("\n"===n)o.line++,o.line_ix=++o.ix;else if(h.includes(n))o.ix++;else{if("#"!==n)break;do{o.ix++,n=t.charAt(o.ix)}while(o.ix<t.length&&"\n"!==n)}}},l=()=>{d();let n="",r="",e="";for(Object.assign(u,o),Object.assign(a,o);o.ix<t.length;)if(e=t.charAt(o.ix),e>="a"&&e<="z"||e>="A"&&e<="Z"||n.length&&e>="0"&&e<="9")n+=e,r+=e,o.ix++;else if([",",...h].includes(e)){if(d(),o.ix<t.length){if(e=t.charAt(o.ix),","!==e)break;n="",r+=e,o.ix++,d()}}else f("identifier",e);return{token:r,source:c()}},v=t=>{const{token:r,source:o}=l();!r&&f("name","nothing"),r.indexOf(",")>0&&f("name","names"),s(r,"name"),!i.has(r)&&i.set(r,{type:t.token,source:t.source,rels:new Map});const u=i.get(r);u.type!==t.token&&f(u.type,t.token),u.source.to=o.to;let a=l();if(n.includes(a.token))return a;const c=e[t.token].grammar();for(;a.token in c;){const t=c[a.token],{token:n,source:r}=l();!n&&f("names","nothing"),n.split(",").forEach((t=>s(t.trim(),"names"))),n.split(",").filter(Boolean).forEach((n=>u?.rels.set(n,t))),u.source.to=r.to,a=l()}return a};let p=l();for(;p.token.length;)n.includes(p.token)?p=v(p):p.token.length&&f("keyword",p.token);return i})(t),a=(t=>{const n=new Map,r=(t,r,e,i)=>{const u=n.get(r);if(u)return u.visual!==e&&o(t,`${r} as ${u.visual}`,e),!u.ctx&&i&&(u.ctx=t.context),u;const a={id:r,visual:e};return i&&(a.ctx=t.context),n.set(r,a),a},i=(n,e)=>{const i=t.get(e);if(i&&"context"!==i.type&&!i.context){i.context=n.id;const u=r(i,e,i.type,!0);i.rels.forEach((({visual:n,owns:e},u)=>{const a=t.get(u);"context"===a?.type&&o(i,"component",u),"artifact"===n?o(i,"valid relationship",n):r(i,u,n,e)})),n.nodes.set(e,u)}},a=u();t.forEach(((t,n)=>{if("context"===t.type){const r=u(n);t.rels.forEach(((t,n)=>i(r,n))),a.nodes.set(n,r)}}));const c=u("global");t.forEach(((t,n)=>{"context"===t.type||t.context||i(c,n)})),c.nodes.size&&a.nodes.set("global",c);const f=new Set;return t.forEach(((t,r)=>{if("context"!==t.type){const i=e[t.type],o=n.get(r),u=a.nodes.get(o.ctx);t.rels.forEach((({visual:r},c)=>{const s=n.get(c);if(s.ctx&&o.ctx!==s.ctx){const n=a.nodes.get(s.ctx),i="aggregate"===t.type||"system"===t.type,o="event"===r&&!i||"command"===r&&i||"projector"===r&&"projector"!==t.type,c=o?n:u,h=o?u:n,d=e.context.edge(c,h);if(d){const t=`${c.id}->${h.id}`;f.has(t)||(a.edges.add(d),f.add(t))}}if(o.ctx===s.ctx||"event"===s.visual){const t={...s},n=i.edge(o,t);n&&u.edges.add(n),u.nodes.set(c,t)}const h=i.ref(o,s);h&&(!u.refs.has(h.hostId)&&u.refs.set(h.hostId,new Map),u.refs.get(h.hostId).set(`${h.hostId},${h.target.id}`,h))}))}})),a})(i);Nv(a,f);return{svg:Pv(a,f),width:a.width,height:a.height}}catch(t){if(t instanceof $v)return{error:t};if(t instanceof i)return{error:t};if(t instanceof Error){const n=t.stack.split("\n").slice(0,2).join(" ");return{error:Error(n)}}return{error:Error(t)}}};t.Canvas=class extends Ev{constructor(t,n,r){super(),this.document=t,this.container=n,this.SCALE=80,this.WIDTH=100*this.SCALE,this.HEIGHT=100*this.SCALE,this.dragging=!1,this.dx=0,this.dy=0,this.zoom=1,this.x=0,this.y=0,this.w=0,this.h=0,r&&(this.SCALE=r.SCALE,this.WIDTH=r.WIDTH,this.HEIGHT=r.HEIGHT,this.coordsSpan=r.coordsSpan,this.zoomSpan=r.zoomSpan,this.fitBtn=r.fitBtn),this.svg=this.document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.svg.setAttribute("viewBox",`0 0 ${this.WIDTH} ${this.HEIGHT}`),this.svg.setAttribute("width",`${this.WIDTH}`),this.svg.setAttribute("height",`${this.HEIGHT}`),this.container.appendChild(this.svg),this.container.addEventListener("wheel",(t=>{t.preventDefault(),t.metaKey||t.ctrlKey?(this.fitZoom(this.zoom+-.01*t.deltaY),this.transform()):this.transform(t.deltaX,t.deltaY)}));const e=({clientX:t,clientY:n})=>{this.dragging=!0,this.dx=t,this.dy=n,this.container.style.cursor="grabbing"},i=()=>{this.dragging=!1,this.container.style.cursor="default"},o=({clientX:t,clientY:n})=>{this.dragging&&(this.transform(this.dx-t,this.dy-n),this.dx=t,this.dy=n)};this.container.addEventListener("mousedown",e),this.container.addEventListener("mouseup",i),this.container.addEventListener("mousemove",o),this.container.addEventListener("touchstart",(t=>e(t.touches[0]))),this.container.addEventListener("touchend",i),this.container.addEventListener("touchmove",(t=>o(t.touches[0]))),this.fitBtn&&(this.fitBtn.onclick=()=>this.fitToContainer.apply(this))}fitToContainer(){const t=this.container.clientWidth,n=this.container.clientHeight;this.w&&this.h&&t&&n&&(this.fitZoom(Math.min(t/this.w,n/this.h)),this.x=Math.floor((t-this.w*this.zoom)/2),this.y=Math.floor((n-this.h*this.zoom)/2),this.transform())}fitZoom(t){this.zoom=Math.round(100*Math.min(Math.max(.1,t),3))/100}transform(t=0,n=0){const r=this.svg.children[0];r&&(this.x=Math.floor(Math.min(Math.max(this.x-t,0-this.w*this.zoom),this.WIDTH)),this.y=Math.floor(Math.min(Math.max(this.y-n,0-this.h*this.zoom),this.HEIGHT)),this.coordsSpan&&(this.coordsSpan.innerText=`x:${this.x} y:${this.y} w:${this.w} h:${this.h}`),this.zoomSpan&&(this.zoomSpan.innerText=`${Math.floor(100*this.zoom)}%`),r.setAttribute("transform",`translate(${this.x}, ${this.y}) scale(${this.zoom})`),this.emit("transformed",{x:this.x,y:this.y,zoom:this.zoom}))}render(t){const{error:n,svg:r,width:e,height:i}=Rv(t.code,this.SCALE,t.font);if(n)return n;this.svg.innerHTML=r,this.w=Math.floor(e),this.h=Math.floor(i),t.zoom&&(this.x=t.x||0,this.y=t.y||0,this.zoom=t.zoom),this.transform()}},t.EventEmitter=Ev,t.Keywords=r,t.debounce=(t,n)=>{let r;return function(...e){clearTimeout(r),r=setTimeout((()=>{t.apply(this,e)}),n)}},t.esml=Rv}));
